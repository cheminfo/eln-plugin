(function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,t.elnPlugin=e()}})(function(){var e=Math.ceil,t=Math.round,n=Number.isInteger,r=Math.sin,a=Math.PI,o=Math.sqrt,s=Number.MAX_VALUE,l=Number.MIN_VALUE,u=Math.log,_=Math.abs,f=Math.pow,d=Math.exp,C=Math.max,w=Math.min,p=Math.floor,c=String.fromCharCode,i,m,h;return function(){function s(l,e,n){function t(o,i){if(!e[o]){if(!l[o]){var d="function"==typeof require&&require;if(!i&&d)return d(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var a=e[o]={exports:{}};l[o][0].call(a.exports,function(e){var i=l[o][1][e];return t(i||e)},a,a.exports,s,l,e,n)}return e[o].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)t(n[a]);return t}return s}()({1:[function(e,t){(function(e){"use strict";(function(i){var n=function(t){return"function"==typeof t?t:"function"==typeof e?function(t){return new e(t,"base64").toString("binary")}:"object"==typeof i.base64js?function(e){var t=i.base64js.b64ToByteArray(e);return Array.prototype.map.call(t,function(e){return c(e)}).join("")}:function(){throw new Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.")}}(i.atob);i.atob=n,"object"==typeof t&&t&&t.exports&&(t.exports=n)})(window)}).call(this,e("buffer").Buffer)},{buffer:7}],2:[function(e,t,n){"use strict";function r(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");-1===i&&(i=t);var n=i===t?0:4-i%4;return[i,n]}function a(e,t,i){return 3*(t+i)/4-i}function s(e){return l[63&e>>18]+l[63&e>>12]+l[63&e>>6]+l[63&e]}function o(e,t,n){for(var r=[],a=t,i;a<n;a+=3)i=(16711680&e[a]<<16)+(65280&e[a+1]<<8)+(255&e[a+2]),r.push(s(i));return r.join("")}n.byteLength=function(e){var t=r(e),i=t[0],n=t[1];return 3*(i+n)/4-n},n.toByteArray=function(e){var t=r(e),n=t[0],s=t[1],o=new u(a(e,n,s)),l=0,p=0<s?n-4:n,c,m;for(m=0;m<p;m+=4)c=d[e.charCodeAt(m)]<<18|d[e.charCodeAt(m+1)]<<12|d[e.charCodeAt(m+2)]<<6|d[e.charCodeAt(m+3)],o[l++]=255&c>>16,o[l++]=255&c>>8,o[l++]=255&c;return 2===s&&(c=d[e.charCodeAt(m)]<<2|d[e.charCodeAt(m+1)]>>4,o[l++]=255&c),1===s&&(c=d[e.charCodeAt(m)]<<10|d[e.charCodeAt(m+1)]<<4|d[e.charCodeAt(m+2)]>>2,o[l++]=255&c>>8,o[l++]=255&c),o},n.fromByteArray=function(e){for(var t=e.length,n=t%3,r=[],a=16383,s=0,i=t-n,d;s<i;s+=a)r.push(o(e,s,s+a>i?i:s+a));return 1==n?(d=e[t-1],r.push(l[d>>2]+l[63&d<<4]+"==")):2==n&&(d=(e[t-2]<<8)+e[t-1],r.push(l[d>>10]+l[63&d>>4]+l[63&d<<2]+"=")),r.join("")};for(var l=[],d=[],u="undefined"==typeof Uint8Array?Array:Uint8Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,i=p.length;c<i;++c)l[c]=p[c],d[p.charCodeAt(c)]=c;d[45]=62,d[95]=63},{}],3:[function(e,t){"use strict";t.exports=function(e,t,i,n,r){var a,s;if(void 0===n)n=0;else if(n|=0,0>n||n>=e.length)throw new RangeError("invalid lower bound");if(void 0===r)r=e.length-1;else if(r|=0,r<n||r>=e.length)throw new RangeError("invalid upper bound");for(;n<=r;)if(a=n+(r-n>>>1),s=+i(e[a],t,a,e),0>s)n=a+1;else if(0<s)r=a-1;else return a;return~n}},{}],4:[function(){"use strict"},{}],5:[function(e,t){"use strict";function i(){function e(e){for(var t=[],n=0;n<e.length;n++)t.push(parseFloat(e[n]));return t}function t(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"")}function n(e){return-1!==b.indexOf(e)}function r(e){for(var n=e.spectra,r=n.length,a={times:Array(r),series:{ms:{dimension:2,data:Array(r)}}},s=[],o=0,i;o<b.length;o++)i=t(b[o]),n[0][i]&&(s.push(i),a.series[i]={dimension:1,data:Array(r)});for(var l=0,d;l<r;l++){d=n[l],a.times[l]=d.pageValue;for(var u=0;u<s.length;u++)a.series[s[u]].data[l]=parseFloat(d[s[u]]);d.data&&(a.series.ms.data[l]=[d.data[0].x,d.data[0].y])}e.chromatogram=a}function a(e){var t=e.spectra[0].data[0];e.chromatogram={times:t.x.slice(),series:{intensity:{dimension:1,data:t.y.slice()}}}}function i(e,t){if(t.xFactor||(t.xFactor=1),t.yFactor||(t.yFactor=1),t.observeFrequency&&t.xUnit&&"HZ"===t.xUnit.toUpperCase()&&(t.xUnit="PPM",t.xFactor/=t.observeFrequency,t.firstX/=t.observeFrequency,t.lastX/=t.observeFrequency,t.deltaX/=t.observeFrequency),t.shiftOffsetVal){var i=t.firstX-t.shiftOffsetVal;t.firstX-=i,t.lastX-=i}}function s(e){e=e.sort(o);var t=e.length;return e[p(t/2)]}function o(e,t){return e-t}function l(e){for(var t=e[0].data[0][0],n=t,r=e.length,a=e[0].data[0].length/2,o=Array(r),l=0;l<r;l++){o[l]=Array(a);for(var i=e[l].data[0],d=0,u;d<a;d++)u=i[2*d+1],o[l][d]=u,u<t&&(t=u),u>n&&(n=u)}var p=e[0].data[0][0],c=e[0].data[0][e[0].data[0].length-2],m=e[0].pageValue,h=e[r-1].pageValue;if(p>c)for(var g of o)g.reverse();return m>h&&o.reverse(),{z:o,minX:w(p,c),maxX:C(p,c),minY:w(m,h),maxY:C(m,h),minZ:t,maxZ:n,noise:s(o[0].map(Math.abs))}}function u(e,t){var i=l(e.spectra);t.noContour||(e.contourLines=c(i,t),delete i.z),e.minMax=i}function c(e,t){for(var i=e.noise,n=e.z,r=n.length,a=n[0].length,s=e.minX,o=e.maxX,l=(o-s)/(a-1),u=e.minY,p=e.maxY,c=(p-u)/(r-1),m=e.minZ,h=e.maxZ,g=2*t.nbContourLevels,f=Array(g),y=0,b,x,_,k,C,w,v,S,j,E,D,A,T,I;y<g;y++){I={},f[y]=I;var P=y%2,H=(h-t.noiseMultiplier*i)*d((y>>1)-t.nbContourLevels);T=0==P?H+t.noiseMultiplier*i:0-H-t.noiseMultiplier*i;var F=[];if(I.zValue=T,I.lines=F,!(T<=m||T>=h))for(var O=0;O<r-1;O++)for(var R=n[O],z=n[O+1],N=0;N<a-1;N++)b=R[N],x=R[N+1],_=z[N],k=z[N+1],C=b>T,w=x>T,v=_>T,S=k>T,C!==w&&C!==v&&(j=N+(T-b)/(x-b),E=O,D=N,A=O+(T-b)/(_-b),F.push(j*l+s),F.push(E*c+u),F.push(D*l+s),F.push(A*c+u)),S!==w&&S!==v&&(j=N+1,E=O+1-(T-k)/(x-k),D=N+1-(T-k)/(_-k),A=O+1,F.push(j*l+s),F.push(E*c+u),F.push(D*l+s),F.push(A*c+u)),w!==v&&(j=(N+1-(T-x)/(_-x))*l+s,E=(O+(T-x)/(_-x))*c+u,w!==C&&(D=N+1-(T-x)/(b-x),A=O,F.push(j),F.push(E),F.push(D*l+s),F.push(A*c+u)),v!==C&&(D=N,A=O+1-(T-_)/(b-_),F.push(j),F.push(E),F.push(D*l+s),F.push(A*c+u)),w!==S&&(D=N+1,A=O+(T-x)/(k-x),F.push(j),F.push(E),F.push(D*l+s),F.push(A*c+u)),v!==S&&(D=N+(T-_)/(k-_),A=O+1,F.push(j),F.push(E),F.push(D*l+s),F.push(A*c+u)))}return{minX:e.minX,maxX:e.maxX,minY:e.minY,maxY:e.maxY,segments:f}}function m(e,t){var n=e.yFactor,r=e.deltaX;e.isXYdata=!0;var a=[];e.data=[a];for(var s=e.firstX,o=e.firstY,l=!1,d=0,i;d<t.length;d++)if(i=t.charCodeAt(d),13===i||10===i)l=!0;else if(l)break;for(var u=!0,p=!1,c=!1,m=0,h=!1,g=!1,y=0,b=0,x=!1,_=!1,k=!1,C=0;d<=t.length;d++)if(i=d===t.length?13:t.charCodeAt(d),g)(13===i||10===i)&&(u=!0,g=!1);else if(57>=i&&48<=i)_=!0,0<C?y+=(i-48)/f(10,C++):(y*=10,y+=i-48);else if(44===i||46===i)_=!0,C++;else{if(_){if(u)u=!1,c&&(k=!0);else if(k)k=!1;else{p?(m=x?0-y:y,c=!0,p=!1):!h&&(b=x?0-y:y);for(var w=h?y-1:1,v=0;v<w;v++)c?o+=m:o=b,a.push(s),a.push(o*n),s+=r}x=!1,y=0,C=0,_=!1,h=!1}if(74>i&&63<i)_=!0,c=!1,y=i-64;else if(96<i&&106>i)_=!0,c=!1,y=i-96,x=!0;else if(115===i)_=!0,h=!0,y=9;else if(82<i&&91>i)_=!0,h=!0,y=i-82;else if(73<i&&83>i)_=!0,p=!0,y=i-73;else if(105<i&&115>i)_=!0,p=!0,y=i-105,x=!0;else if(36===i&&36===t.charCodeAt(d+1))_=!0,g=!0;else if(37===i)_=!0,p=!0,y=0,x=!1;else if(45===i){var S=t.charCodeAt(d+1);(48<=S&&57>=S||44===S||46===S)&&(_=!0,!u&&(c=!1),x=!0)}else(13===i||10===i)&&(u=!0,g=!1)}}function h(e,t){var n=/(\(+|\)+|<+|>+|\s+)/g;e.isXYAdata=!0;var r=[],a;e.data=[r];for(var s=t.split(/,? *,?[;\r\n]+ */),o=1;o<s.length;o++)a=s[o].trim().replace(n,"").split(","),r.push(parseFloat(a[0])),r.push(parseFloat(a[1]))}function g(e,t,n){var r=/\$\$.*/,a=/[,\t ]+/;e.isPeaktable=!0;var s=[],o;e.data=[s];for(var l=t.split(/,? *,?[;\r\n]+ */),d=1;d<l.length;d++)if(o=l[d].trim().replace(r,"").split(a),0==o.length%2)for(var i=0;i<o.length;i+=2)s.push(parseFloat(o[i])*e.xFactor),s.push(parseFloat(o[i+1])*e.yFactor);else n.logs.push(`Format error: ${o}`)}var y=/[, \t]+/,b=["TIC",".RIC","SCANNUMBER"];class x{}var _={keepRecordsRegExp:/^$/,xy:!1,withoutXY:!1,chromatogram:!1,keepSpectra:!1,noContour:!1,nbContourLevels:7,noiseMultiplier:5,profiling:!1};return function(s,o){o=Object.assign({},_,o);var l=!o.withoutXY,d=Date.now(),p={},c={},f,b,C,w,v,S,E;c.profiling=!!o.profiling&&[],c.logs=[];var D=[];c.spectra=D,c.info={};var A=new x;if("string"!=typeof s)throw new TypeError("the JCAMP should be a string");c.profiling&&c.profiling.push({action:"Before split to LDRS",time:Date.now()-d}),w=s.split(/[\r\n]+##/),c.profiling&&c.profiling.push({action:"Split to LDRS",time:Date.now()-d}),w[0]&&(w[0]=w[0].replace(/^[\r\n ]*##/,""));for(var T=0;T<w.length;T++){if(f=w[T],v=f.indexOf("="),0<v?(b=f.substring(0,v),C=f.substring(v+1).trim()):(b=f,C=""),b=b.replace(/[_ -]/g,"").toUpperCase(),"DATATABLE"===b&&(S=C.indexOf("\n"),-1===S&&(S=C.indexOf("\r")),0<S)){var I=-1,P=-1;if(E=C.substring(0,S).split(/[ ,;\t]+/),0<E[0].indexOf("++")){var H=E[0].replace(/.*\(([a-zA-Z0-9]+)\+\+.*/,"$1"),F=E[0].replace(/.*\.\.([a-zA-Z0-9]+).*/,"$1");I=p.symbol.indexOf(H),P=p.symbol.indexOf(F)}-1===I&&(I=0),-1===P&&(P=0),p.first&&(p.first.length>I&&(A.firstX=p.first[I]),p.first.length>P&&(A.firstY=p.first[P])),p.last&&(p.last.length>I&&(A.lastX=p.last[I]),p.last.length>P&&(A.lastY=p.last[P])),p.vardim&&p.vardim.length>I&&(A.nbPoints=p.vardim[I]),p.factor&&(p.factor.length>I&&(A.xFactor=p.factor[I]),p.factor.length>P&&(A.yFactor=p.factor[P])),p.units&&(p.units.length>I&&(A.xUnit=p.units[I]),p.units.length>P&&(A.yUnit=p.units[P])),A.datatable=E[0],E[1]&&-1<E[1].indexOf("PEAKS")?b="PEAKTABLE":E[1]&&(E[1].indexOf("XYDATA")||0<E[0].indexOf("++"))&&(b="XYDATA",A.deltaX=(A.lastX-A.firstX)/(A.nbPoints-1))}if("XYDATA"===b){l&&(i(c,A),C.match(/.*\+\+.*/)?(!A.deltaX&&(A.deltaX=(A.lastX-A.firstX)/(A.nbPoints-1)),m(A,C,c)):g(A,C,c),D.push(A),A=new x);continue}else if("PEAKTABLE"===b){l&&(i(c,A),g(A,C,c),D.push(A),A=new x);continue}if("PEAKASSIGNMENTS"===b){l&&(C.match(/.*(XYA).*/)&&h(A,C),D.push(A),A=new x);continue}if("TITLE"===b)A.title=C;else if("DATATYPE"===b)A.dataType=C,-1<C.indexOf("nD")&&(c.twoD=!0);else if("NTUPLES"===b)-1<C.indexOf("nD")&&(c.twoD=!0);else if("XUNITS"===b)A.xUnit=C;else if("YUNITS"===b)A.yUnit=C;else if("FIRSTX"===b)A.firstX=parseFloat(C);else if("LASTX"===b)A.lastX=parseFloat(C);else if("FIRSTY"===b)A.firstY=parseFloat(C);else if("LASTY"===b)A.lastY=parseFloat(C);else if("NPOINTS"===b)A.nbPoints=parseFloat(C);else if("XFACTOR"===b)A.xFactor=parseFloat(C);else if("YFACTOR"===b)A.yFactor=parseFloat(C);else if("MAXX"===b)A.maxX=parseFloat(C);else if("MINX"===b)A.minX=parseFloat(C);else if("MAXY"===b)A.maxY=parseFloat(C);else if("MINY"===b)A.minY=parseFloat(C);else if("DELTAX"===b)A.deltaX=parseFloat(C);else if(".OBSERVEFREQUENCY"===b||"$SFO1"===b)A.observeFrequency||(A.observeFrequency=parseFloat(C));else if(".OBSERVENUCLEUS"===b)A.xType||(c.xType=C.replace(/[^a-zA-Z0-9]/g,""));else if("$SFO2"===b)c.indirectFrequency||(c.indirectFrequency=parseFloat(C));else if("$OFFSET"===b)c.shiftOffsetNum=0,A.shiftOffsetVal||(A.shiftOffsetVal=parseFloat(C));else if("$REFERENCEPOINT"===b);else if("VARNAME"===b)p.varname=C.split(y);else if("SYMBOL"===b)p.symbol=C.split(y);else if("VARTYPE"===b)p.vartype=C.split(y);else if("VARFORM"===b)p.varform=C.split(y);else if("VARDIM"===b)p.vardim=e(C.split(y));else if("UNITS"===b)p.units=C.split(y);else if("FACTOR"===b)p.factor=e(C.split(y));else if("FIRST"===b)p.first=e(C.split(y));else if("LAST"===b)p.last=e(C.split(y));else if("MIN"===b)p.min=e(C.split(y));else if("MAX"===b)p.max=e(C.split(y));else if(".NUCLEUS"===b)c.twoD&&(c.yType=C.split(y)[0]);else if("PAGE"===b){A.page=C.trim(),A.pageValue=parseFloat(C.replace(/^.*=/,"")),A.pageSymbol=A.page.replace(/[=].*/,"");var O=p.symbol.indexOf(A.pageSymbol),R="";p.units&&p.units[O]&&(R=p.units[O]),c.indirectFrequency&&"PPM"!==R&&(A.pageValue/=c.indirectFrequency)}else"RETENTIONTIME"===b?A.pageValue=parseFloat(C):n(b)?A[t(b)]=C:"SAMPLEDESCRIPTION"===b&&(A.sampleDescription=C);b.match(o.keepRecordsRegExp)&&(c.info[b]?(!Array.isArray(c.info[b])&&(c.info[b]=[c.info[b]]),c.info[b].push(C.trim())):c.info[b]=C.trim())}if(c.profiling&&c.profiling.push({action:"Finished parsing",time:Date.now()-d}),0<Object.keys(p).length){for(var z=[],N=Object.keys(p),L=0;L<N.length;L++)for(var M=N[L],X=p[M],U=0;U<X.length;U++)z[U]||(z[U]={}),z[U][M]=X[U];c.ntuples=z}if(c.twoD&&l&&(u(c,o),c.profiling&&c.profiling.push({action:"Finished countour plot calculation",time:Date.now()-d}),!o.keepSpectra&&delete c.spectra),o.chromatogram&&(o.xy=!0),o.xy&&l&&0<D.length)for(var j=0;j<D.length;j++)if(A=D[j],0<A.data.length)for(var B=0;B<A.data.length;B++){for(var Y=A.data[B],q={x:Array(Y.length/2),y:Array(Y.length/2)},W=0;W<Y.length;W+=2)q.x[W/2]=Y[W],q.y[W/2]=Y[W+1];A.data[B]=q}return o.chromatogram&&(1<c.spectra.length?r(c):a(c),c.profiling&&c.profiling.push({action:"Finished chromatogram calculation",time:Date.now()-d})),c.profiling&&c.profiling.push({action:"Total time",time:Date.now()-d}),c}}function n(e,t){return o||r(),new Promise(function(i){var n=`${Date.now()}${Math.random()}`;s[n]=i,o.postMessage(JSON.stringify({stamp:n,input:e,options:t}))})}function r(){var e=URL.createObjectURL(new Blob([`var getConverter =${i.toString()};var convert = getConverter(); onmessage = function (event) { var data = JSON.parse(event.data); postMessage(JSON.stringify({stamp: data.stamp, output: convert(data.input, data.options)})); };`],{type:"application/javascript"}));o=new Worker(e),URL.revokeObjectURL(e),o.addEventListener("message",function(e){var t=JSON.parse(e.data),i=t.stamp;s[i]&&s[i](t.output)})}var a=i(),s={},o;t.exports={convert:function(e,t,i){return"boolean"==typeof t&&(i=t,t={}),i?n(e,t):a(e,t)},createTree:function(e,t={}){var n=t.flatten;if("string"!=typeof e)throw new TypeError("the JCAMP should be a string");for(var r=e.split(/[\r\n]+/),a=[],s=[],o=[],l=void 0,d=0,u=e.includes("## "),p=0;p<r.length;p++){var i=r[p],c=u?i.replace(/ /g,""):i;if("##NTUPLES"===c.substring(0,9)&&d++,"##TITLE"===c.substring(0,7)){for(var m=[c.substring(8).trim()],h=p+1;h<r.length&&!r[h].startsWith("##");h++)m.push(r[h].trim());s.push({title:m.join("\n"),jcamp:`${i}\n`,children:[]}),l=s[s.length-1],a.push(l)}else if("##END"===c.substring(0,5)&&0==d){l.jcamp+=`${i}\n`;var g=s.pop();0===s.length?(l=void 0,o.push(g)):(l=s[s.length-1],l.children.push(g))}else if(l&&l.jcamp){l.jcamp+=`${i}\n`;var f=c.match(/^##(.*?)=(.+)/);if(f){var y=f[1].replace(/[ _-]/g,"").toUpperCase();"DATATYPE"===y&&(l.dataType=f[2].trim())}}"##END"===c.substring(0,5)&&0<d&&d--}return n!==void 0&&n?(a.forEach((e)=>{e.children=void 0}),a):o}}},{}],6:[function(e,t){"use strict";function i(e,t){t=t||{};var a=new Date,s;if(e.ser||e["2rr"])s=r(e,t);else if(e["1r"]||e["1i"]||e.fid)s=n(e,t);else throw new RangeError("The current files are invalid");s.twoD&&!t.noContours&&(u(s),s.profiling&&s.profiling.push({action:"Finished countour plot calculation",time:new Date-a}),!t.keepSpectra&&delete s.spectra);var o=s.spectra;if(t.xy&&0<o.length)for(var l=0,i;l<o.length;l++)if(i=o[l],0<i.data.length)for(var d=0;d<i.data.length;d++){for(var p=i.data[d],c={x:Array(p.length/2),y:Array(p.length/2)},m=0;m<p.length;m+=2)c.x[m/2]=p[m],c.y[m/2]=p[m+1];i.data[d]=c}return s}function n(e,t){for(var n=s(e.procs||"",t),r=s(e.acqus||"",t),l=Object.keys(r.info),d=0,i;d<l.length;d++)i=l[d],void 0===n.info[i]&&(n.info[i]=r.info[i]);return e["1r"]||e["1i"]?(e["1r"]&&a(e["1r"],n,"1r",!0),e["1i"]&&a(e["1i"],n,"1i",!1)):e.fid&&o(e.fid,n),n}function r(e,t){var n,r,l;if(e["2rr"]){for(var d=s(e.procs,t),u=s(e.acqus,t),p=Object.keys(u.info),c=0,i;c<p.length;c++)i=p[c],void 0===d.info[i]&&(d.info[i]=u.info[i]);u=s(e.proc2s,t),d.info.nbSubSpectra=u.info.$SI=parseInt(u.info.$SI),n=u.info.$SF=parseFloat(u.info.$SF),r=u.info.$SWP=parseFloat(u.info.$SWP),l=u.info.$OFFSET=parseFloat(u.info.$OFFSET)}else e.ser&&(d=s(e.acqus,t),u=s(e.acqu2s,t),d.info.nbSubSpectra=u.info.$SI=parseInt(u.info.$TD),d.info.$SI=parseInt(d.info.$TD),r=u.info.$SW,d.info.$SWP=d.info.$SWH,d.info.$SF=parseFloat(u.info.$SFO1),d.info.$OFFSET=0,n=u.info.$SFO1=parseFloat(u.info.$SFO1),n=1,l=0,d.info.$AXNUC=d.info.$NUC1,u.info.$AXNUC=u.info.$NUC1);d.info.firstY=l,d.info.lastY=l-r/n,d.info.$BF2=n,d.info.$SFO1=n;var m=d.info.nbSubSpectra,h=d.info.firstY,g=(d.info.lastY-d.info.firstY)/(m-1);e["2rr"]?a(e["2rr"],d,"2rr",!0):e.ser&&o(e.ser,d,"ser",!0);for(var f=0;f<m;f++)h+=g,d.spectra[f].pageValue=h;return d.info["2D_Y_NUCLEUS"]=u.info.$AXNUC,d.info["2D_X_NUCLEUS"]=d.info.$AXNUC,d.info["2D_Y_FRECUENCY"]=n,d.info["2D_Y_OFFSET"]=l,d.info["2D_X_FRECUENCY"]=d.info.$SF,d.info["2D_X_OFFSET"]=d.info.$OFFSET,d.twoD=!0,d}function a(e,t,n,r){e=c(e);var a=t.info.$SI=parseInt(t.info.$SI),s=parseFloat(t.info.$SWP),o=parseFloat(t.info.$SF),l=o,d=t.shiftOffsetVal||parseFloat(t.info.$OFFSET);t.info.observeFrequency=o,t.info.$BF1=l,t.info.$SFO1=o,t.info.brukerReference=l;var u=parseInt(t.info.$BYTORDP);u=u?0:1;var p=t.info.nbSubSpectra?t.info.nbSubSpectra:1;u?e.setLittleEndian():e.setBigEndian();for(var m=0;m<p;m++){var i={dataType:"NMR Spectrum",dataTable:"(X++(R..R))",nbPoints:a,firstX:d,lastX:d-s/o,xUnit:"PPM",yUnit:"Arbitrary",data:[Array(2*a)],isXYdata:!0,observeFrequency:o,title:t.info.TITLE,deltaX:-(s/o)/(a-1)},h=d,g=i.deltaX;if(r)for(var f=0;f<a;++f)i.data[0][2*f]=h,i.data[0][2*f+1]=e.readInt32(),(null===i.data[0][2*f+1]||isNaN(i.data[0][2*f+1]))&&(i.data[0][2*f+1]=0),h+=g;else for(f=a-1;0<=f;--f)i.data[0][2*f]=h,i.data[0][2*f+1]=e.readInt32(),(null===i.data[0][2*f+1]||isNaN(i.data[0][2*f+1]))&&(i.data[0][2*f+1]=0),h+=g;t.spectra.push(i)}}function s(e,t){var i=/.*/;return t.keepRecordsRegExp&&(i=t.keepRecordsRegExp),m.convert(e,{keepRecordsRegExp:i})}function o(e,t){e=c(e);var n=t.info.$TD=parseInt(t.info.$TD),r=t.info.$SW=parseFloat(t.info.$SW),a=t.info.$SFO1=parseFloat(t.info.$SFO1),s=parseFloat(t.info.$BF1);t.info.$BF1=s;var o=r,l=o/(n-1),d=parseInt(t.info.$BYTORDP);d=d?0:1,d?e.setLittleEndian():e.setBigEndian();var u=t.info.nbSubSpectra?t.info.nbSubSpectra:1;t.spectra=Array(u);for(var p=0,m;p<u/2;p++){m={dataType:"NMR FID",dataTable:"(X++(R..R))",nbPoints:n,firstX:0,lastX:o,nucleus:t.info.$NUC1?t.info.$NUC1:void 0,xUnit:"Sec",yUnit:"Arbitrary",data:[Array(2*n)],isXYdata:!0,observeFrequency:a,title:t.info.TITLE,deltaX:l},t.spectra[2*p]=m,m={dataType:"NMR FID",dataTable:"(X++(I..I))",nbPoints:n,firstX:0,lastX:o,nucleus:t.info.$NUC1?t.info.$NUC1:void 0,xUnit:"Sec",yUnit:"Arbitrary",data:[Array(2*n)],isXYdata:!0,observeFrequency:a,title:t.info.TITLE,deltaX:l},t.spectra[2*p+1]=m;for(var h=0,g=0,i;e.available(8)&&g<n;g++,h=g*l)i=e.readInt32(),(null===i||isNaN(i))&&(i=0),t.spectra[2*p].data[0][2*g+1]=i,t.spectra[2*p].data[0][2*g]=h,i=e.readInt32(),(null===i||isNaN(i))&&(i=0),t.spectra[2*p+1].data[0][2*g+1]=i,t.spectra[2*p+1].data[0][2*g]=h;for(;g<n;g++,h=g*l)t.spectra[2*p].data[0][2*g+1]=0,t.spectra[2*p].data[0][2*g]=h,t.spectra[2*p+1].data[0][2*g+1]=0,t.spectra[2*p+1].data[0][2*g]=h}}function l(e){for(var t=0,n=e[0].data[0][0],r=n,a=e.length,s=e[0].data[0].length/2,o=Array(a),l=0;l<a;l++){o[l]=Array(s);for(var i=0;i<s;i++)o[l][i]=e[l].data[0][2*i+1],o[l][i]<n&&(n=e[l].data[0][2*i+1]),o[l][i]>r&&(r=e[l].data[0][2*i+1]),0!==l&&0!==i&&(t+=_(o[l][i]-o[l][i-1])+_(o[l][i]-o[l-1][i]))}return{z:o,minX:e[0].data[0][0],maxX:e[0].data[0][e[0].data[0].length-2],minY:e[0].pageValue,maxY:e[a-1].pageValue,minZ:n,maxZ:r,noise:t/(2*((a-1)*(s-1)))}}function u(e){var t=l(e.spectra);e.contourLines=p(t),delete t.z,e.minMax=t}function p(e){for(var t=e.noise,n=e.z,r=[],a=7,s=new Float32Array(4),o=[],l=n.length,u=n[0].length,p=e.minX,c=e.maxX,m=(c-p)/(u-1),h=e.minY,g=e.maxY,f=(g-h)/(l-1),y=e.minZ,b=e.maxZ,x=0,_,k,C,w,v,S;x<2*a;x++){S={},r.push(S);var j=x%2;v=0==j?(b-5*t)*d(x/2-a)+5*t:-(b-5*t)*d(x/2-a)-5*t;var E=[];if(S.zValue=v,S.lines=E,!(v<=y||v>=b))for(var D=0;D<l-1;D++)for(var A=0;A<u-1;A++){s[0]=n[D][A],s[1]=n[D][A+1],s[2]=n[D+1][A],s[3]=n[D+1][A+1];for(var T=0;4>T;T++)o[T]=s[T]>v;o[0]!==o[1]&&o[0]!==o[2]&&(_=A+(v-s[0])/(s[1]-s[0]),k=D,C=A,w=D+(v-s[0])/(s[2]-s[0]),E.push(_*m+p,k*f+h,C*m+p,w*f+h)),o[3]!==o[1]&&o[3]!==o[2]&&(_=A+1,k=D+1-(v-s[3])/(s[1]-s[3]),C=A+1-(v-s[3])/(s[2]-s[3]),w=D+1,E.push(_*m+p,k*f+h,C*m+p,w*f+h)),o[1]!==o[2]&&(_=A+1-(v-s[1])/(s[2]-s[1]),k=D+(v-s[1])/(s[2]-s[1]),o[1]!==o[0]&&(C=A+1-(v-s[1])/(s[0]-s[1]),w=D,E.push(_*m+p,k*f+h,C*m+p,w*f+h)),o[2]!==o[0]&&(C=A,w=D+1-(v-s[2])/(s[0]-s[2]),E.push(_*m+p,k*f+h,C*m+p,w*f+h)),o[1]!==o[3]&&(C=A+1,w=D+(v-s[1])/(s[3]-s[1]),E.push(_*m+p,k*f+h,C*m+p,w*f+h)),o[2]!==o[3]&&(C=A+(v-s[2])/(s[3]-s[2]),w=D+1,E.push(_*m+p,k*f+h,C*m+p,w*f+h)))}}return{minX:e.minX,maxX:e.maxX,minY:e.minY,maxY:e.maxY,segments:r}}function c(e){return(e instanceof Array||e instanceof Uint8Array)&&(e=new ArrayBuffer(e)),e instanceof ArrayBuffer?new g(e):e}var m=e("jcampconverter"),h=e("iobuffer"),g=h.IOBuffer,f=e("jszip"),y=1,b=2;t.exports={convertZip:function(e,t){t=t||{};var n=new f;return n.loadAsync(e,t).then((e)=>{for(var n={ser:y,fid:y,acqus:b,acqu2s:b,procs:b,proc2s:b,"1r":y,"1i":y,"2rr":y},r=e.filter(function(e){return e.endsWith("ser")||e.endsWith("fid")||e.endsWith("1r")||e.endsWith("2rr")}),a=Array(r.length),s=0;s<r.length;++s){var o=[],l=r[s].name;l=l.substr(0,l.lastIndexOf("/")+1),o.push(l);var d=e.folder(l),u=d.filter(function(e){return!!n[e]});0<=l.indexOf("pdata")&&(o.push("acqus"),o.push(e.file(l.replace(/pdata\/[0-9]+\//,"acqus")).async("string")));for(var p=0;p<u.length;++p){var c=u[p].name.lastIndexOf("/"),l=u[p].name.substr(c+1);o.push(l),n[l]===y?o.push(u[p].async("arraybuffer")):o.push(u[p].async("string"))}a[s]=Promise.all(o).then((e)=>{for(var n={},r=1,a;r<e.length;r+=2)a=e[r],n[a]=e[r+1];return{filename:e[0],value:i(n,t)}})}return Promise.all(a)})},convertFolder:i}},{iobuffer:20,jcampconverter:5,jszip:34}],7:[function(e,t,i){(function(t){"use strict";function n(e){if(e>G)throw new RangeError("The value \""+e+"\" is invalid for option \"size\"");var i=new Uint8Array(e);return Object.setPrototypeOf(i,t.prototype),i}function t(e,t,i){if("number"==typeof e){if("string"==typeof t)throw new TypeError("The \"string\" argument must be of type string. Received type number");return o(e)}return r(e,t,i)}function r(e,i,n){if("string"==typeof e)return l(e,i);if(ArrayBuffer.isView(e))return d(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(q(e,ArrayBuffer)||e&&q(e.buffer,ArrayBuffer))return u(e,i,n);if("number"==typeof e)throw new TypeError("The \"value\" argument must not be of type number. Received type number");var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return t.from(r,i,n);var a=p(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),i,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be of type number");else if(0>e)throw new RangeError("The value \""+e+"\" is invalid for option \"size\"")}function s(e,t,i){return a(e),0>=e?n(e):void 0===t?n(e):"string"==typeof i?n(e).fill(t,i):n(e).fill(t)}function o(e){return a(e),n(0>e?0:0|m(e))}function l(e,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var r=0|h(e,i),a=n(r),s=a.write(e,i);return s!==r&&(a=a.slice(0,s)),a}function d(e){for(var t=0>e.length?0:0|m(e.length),r=n(t),a=0;a<t;a+=1)r[a]=255&e[a];return r}function u(e,i,n){if(0>i||e.byteLength<i)throw new RangeError("\"offset\" is outside of buffer bounds");if(e.byteLength<i+(n||0))throw new RangeError("\"length\" is outside of buffer bounds");var r;return r=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n),Object.setPrototypeOf(r,t.prototype),r}function p(e){if(t.isBuffer(e)){var i=0|m(e.length),r=n(i);return 0===r.length?r:(e.copy(r,0,0,i),r)}return void 0===e.length?"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0:"number"!=typeof e.length||W(e.length)?n(0):d(e)}function m(e){if(e>=G)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+G.toString(16)+" bytes");return 0|e}function h(e,i){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError("The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. Received type "+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var a=!1;;)switch(i){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(a)return r?-1:M(e).length;i=(""+i).toLowerCase(),a=!0;}}function g(e,t,i){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),0>=i)return"";if(i>>>=0,t>>>=0,i<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,i);case"utf8":case"utf-8":return D(this,t,i);case"ascii":return T(this,t,i);case"latin1":case"binary":return I(this,t,i);case"base64":return E(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0;}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,i,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,W(n)&&(n=a?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(0>n)if(a)n=0;else return-1;if("string"==typeof i&&(i=t.from(i,r)),t.isBuffer(i))return 0===i.length?-1:x(e,i,n,r,a);if("number"==typeof i)return i&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,i,n):Uint8Array.prototype.lastIndexOf.call(e,i,n):x(e,[i],n,r,a);throw new TypeError("val must be string, number or Buffer")}function x(e,t,n,r,a){function s(e,t){return 1==o?e[t]:e.readUInt16BE(t*o)}var o=1,l=e.length,d=t.length;if(void 0!==r&&(r=(r+"").toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>e.length||2>t.length)return-1;o=2,l/=2,d/=2,n/=2}var u;if(a){var i=-1;for(u=n;u<l;u++)if(s(e,u)!==s(t,-1==i?0:u-i))-1!=i&&(u-=u-i),i=-1;else if(-1==i&&(i=u),u-i+1===d)return i*o}else for(n+d>l&&(n=l-d),u=n;0<=u;u--){for(var p=!0,c=0;c<d;c++)if(s(e,u+c)!==s(t,c)){p=!1;break}if(p)return u}return-1}function _(e,t,n,r){n=+n||0;var a=e.length-n;r?(r=+r,r>a&&(r=a)):r=a;var s=t.length;r>s/2&&(r=s/2);for(var o=0,i;o<r;++o){if(i=parseInt(t.substr(2*o,2),16),W(i))return o;e[n+o]=i}return o}function k(e,t,i,n){return Y(M(t,e.length-i),e,i,n)}function C(e,t,i,n){return Y(X(t),e,i,n)}function v(e,t,i,n){return C(e,t,i,n)}function S(e,t,i,n){return Y(B(t),e,i,n)}function j(e,t,i,n){return Y(U(t,e.length-i),e,i,n)}function E(e,t,i){return 0===t&&i===e.length?V.fromByteArray(e):V.fromByteArray(e.slice(t,i))}function D(e,t,n){n=w(e.length,n);for(var r=[],a=t;a<n;){var i=e[a],s=null,o=239<i?4:223<i?3:191<i?2:1;if(a+o<=n){var l,d,u,p;1==o?128>i&&(s=i):2==o?(l=e[a+1],128==(192&l)&&(p=(31&i)<<6|63&l,127<p&&(s=p))):3==o?(l=e[a+1],d=e[a+2],128==(192&l)&&128==(192&d)&&(p=(15&i)<<12|(63&l)<<6|63&d,2047<p&&(55296>p||57343<p)&&(s=p))):4==o?(l=e[a+1],d=e[a+2],u=e[a+3],128==(192&l)&&128==(192&d)&&128==(192&u)&&(p=(15&i)<<18|(63&l)<<12|(63&d)<<6|63&u,65535<p&&1114112>p&&(s=p))):void 0}null===s?(s=65533,o=1):65535<s&&(s-=65536,r.push(55296|1023&s>>>10),s=56320|1023&s),r.push(s),a+=o}return A(r)}function A(e){var t=e.length;if(t<=J)return c.apply(String,e);for(var n="",r=0;r<t;)n+=c.apply(String,e.slice(r,r+=J));return n}function T(e,t,n){var r="";n=w(e.length,n);for(var a=t;a<n;++a)r+=c(127&e[a]);return r}function I(e,t,n){var r="";n=w(e.length,n);for(var a=t;a<n;++a)r+=c(e[a]);return r}function P(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var a="",s=t;s<n;++s)a+=Q[e[s]];return a}function H(e,t,n){for(var r=e.slice(t,n),a="",s=0;s<r.length;s+=2)a+=c(r[s]+256*r[s+1]);return a}function F(e,t,i){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function O(e,i,n,r,a,s){if(!t.isBuffer(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(i>a||i<s)throw new RangeError("\"value\" argument is out of bounds");if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,i,n){if(i+n>e.length)throw new RangeError("Index out of range");if(0>i)throw new RangeError("Index out of range")}function z(e,t,i,n,r){return t=+t,i>>>=0,r||R(e,t,i,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(e,t,i,n,23,4),i+4}function N(e,t,i,n,r){return t=+t,i>>>=0,r||R(e,t,i,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(e,t,i,n,52,8),i+8}function L(e){if(e=e.split("=")[0],e=e.trim().replace(K,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function M(e,t){t=t||Infinity;for(var n=e.length,r=null,a=[],s=0,i;s<n;++s){if(i=e.charCodeAt(s),55295<i&&57344>i){if(!r){if(56319<i){-1<(t-=3)&&a.push(239,191,189);continue}else if(s+1===n){-1<(t-=3)&&a.push(239,191,189);continue}r=i;continue}if(56320>i){-1<(t-=3)&&a.push(239,191,189),r=i;continue}i=(r-55296<<10|i-56320)+65536}else r&&-1<(t-=3)&&a.push(239,191,189);if(r=null,128>i){if(0>(t-=1))break;a.push(i)}else if(2048>i){if(0>(t-=2))break;a.push(192|i>>6,128|63&i)}else if(65536>i){if(0>(t-=3))break;a.push(224|i>>12,128|63&i>>6,128|63&i)}else if(1114112>i){if(0>(t-=4))break;a.push(240|i>>18,128|63&i>>12,128|63&i>>6,128|63&i)}else throw new Error("Invalid code point")}return a}function X(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function U(e,t){for(var n=[],r=0,i,a,s;r<e.length&&!(0>(t-=2));++r)i=e.charCodeAt(r),a=i>>8,s=i%256,n.push(s),n.push(a);return n}function B(e){return V.toByteArray(L(e))}function Y(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function W(e){return e!==e}var V=e("base64-js"),Z=e("ieee754"),$="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=t,i.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},i.INSPECT_MAX_BYTES=50;var G=2147483647;i.kMaxLength=G,t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(t){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){return t.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){return t.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,i){return r(e,t,i)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,i){return s(e,t,i)},t.allocUnsafe=function(e){return o(e)},t.allocUnsafeSlow=function(e){return o(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,n){if(q(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),q(n,Uint8Array)&&(n=t.from(n,n.offset,n.byteLength)),!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array");if(e===n)return 0;for(var r=e.length,a=n.length,s=0,i=w(r,a);s<i;++s)if(e[s]!==n[s]){r=e[s],a=n[s];break}return r<a?-1:a<r?1:0},t.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},t.concat=function(e,n){if(!Array.isArray(e))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===e.length)return t.alloc(0);var r;if(n===void 0)for(n=0,r=0;r<e.length;++r)n+=e[r].length;var i=t.allocUnsafe(n),a=0;for(r=0;r<e.length;++r){var s=e[r];if(q(s,Uint8Array)&&(s=t.from(s)),!t.isBuffer(s))throw new TypeError("\"list\" argument must be an Array of Buffers");s.copy(i,a),a+=s.length}return i},t.byteLength=h,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?D(this,0,e):g.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},$&&(t.prototype[$]=t.prototype.inspect),t.prototype.compare=function(e,n,r,a,s){if(q(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError("The \"target\" argument must be one of type Buffer or Uint8Array. Received type "+typeof e);if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===a&&(a=0),void 0===s&&(s=this.length),0>n||r>e.length||0>a||s>this.length)throw new RangeError("out of range index");if(a>=s&&n>=r)return 0;if(a>=s)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,a>>>=0,s>>>=0,this===e)return 0;for(var o=s-a,l=r-n,d=w(o,l),u=this.slice(a,s),p=e.slice(n,r),c=0;c<d;++c)if(u[c]!==p[c]){o=u[c],l=p[c];break}return o<l?-1:l<o?1:0},t.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},t.prototype.indexOf=function(e,t,i){return b(this,e,t,i,!0)},t.prototype.lastIndexOf=function(e,t,i){return b(this,e,t,i,!1)},t.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(i)?(i>>>=0,void 0===n&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var r=this.length-t;if((void 0===i||i>r)&&(i=r),0<e.length&&(0>i||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return _(this,e,t,i);case"utf8":case"utf-8":return k(this,e,t,i);case"ascii":return C(this,e,t,i);case"latin1":case"binary":return v(this,e,t,i);case"base64":return S(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0;}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;t.prototype.slice=function(e,i){var n=this.length;e=~~e,i=void 0===i?n:~~i,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>i?(i+=n,0>i&&(i=0)):i>n&&(i=n),i<e&&(i=e);var r=this.subarray(e,i);return Object.setPrototypeOf(r,t.prototype),r},t.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=this[e],a=1,s=0;++s<t&&(a*=256);)r+=this[e+s]*a;return r},t.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||F(e,t,this.length);for(var n=this[e+--t],r=1;0<t&&(r*=256);)n+=this[e+--t]*r;return n},t.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=this[e],a=1,s=0;++s<t&&(a*=256);)r+=this[e+s]*a;return a*=128,r>=a&&(r-=f(2,8*t)),r},t.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=t,i=1,a=this[e+--r];0<r&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=f(2,8*t)),a},t.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},t.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),Z.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),Z.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),Z.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),Z.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var a=f(2,8*n)-1;O(this,e,t,n,a,0)}var s=1,o=0;for(this[t]=255&e;++o<n&&(s*=256);)this[t+o]=255&e/s;return t+n},t.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var a=f(2,8*n)-1;O(this,e,t,n,a,0)}var s=n-1,i=1;for(this[t+s]=255&e;0<=--s&&(i*=256);)this[t+s]=255&e/i;return t+n},t.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=f(2,8*n-1);O(this,e,t,n,a-1,-a)}var s=0,i=1,o=0;for(this[t]=255&e;++s<n&&(i*=256);)0>e&&0==o&&0!==this[t+s-1]&&(o=1),this[t+s]=255&(e/i>>0)-o;return t+n},t.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=f(2,8*n-1);O(this,e,t,n,a-1,-a)}var s=n-1,i=1,o=0;for(this[t+s]=255&e;0<=--s&&(i*=256);)0>e&&0==o&&0!==this[t+s+1]&&(o=1),this[t+s]=255&(e/i>>0)-o;return t+n},t.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||O(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,i){return z(this,e,t,!0,i)},t.prototype.writeFloatBE=function(e,t,i){return z(this,e,t,!1,i)},t.prototype.writeDoubleLE=function(e,t,i){return N(this,e,t,!0,i)},t.prototype.writeDoubleBE=function(e,t,i){return N(this,e,t,!1,i)},t.prototype.copy=function(e,n,r,a){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),a||0===a||(a=this.length),n>=e.length&&(n=e.length),n||(n=0),0<a&&a<r&&(a=r),a===r)return 0;if(0===e.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-n<a-r&&(a=e.length-n+r);var s=a-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,a);else if(this===e&&r<n&&n<a)for(var o=s-1;0<=o;--o)e[o+n]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,a),n);return s},t.prototype.fill=function(e,n,r,a){if("string"==typeof e){if("string"==typeof n?(a=n,n=0,r=this.length):"string"==typeof r&&(a=r,r=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!t.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===e.length){var s=e.charCodeAt(0);("utf8"===a&&128>s||"latin1"===a)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=+e);if(0>n||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n>>>=0,r=r===void 0?this.length:r>>>0,e||(e=0);var o;if("number"==typeof e)for(o=n;o<r;++o)this[o]=e;else{var i=t.isBuffer(e)?e:t.from(e,a),l=i.length;if(0===l)throw new TypeError("The value \""+e+"\" is invalid for argument \"value\"");for(o=0;o<r-n;++o)this[o+n]=i[o%l]}return this};var K=/[^+/0-9A-Za-z-_]/g,Q=function(){for(var e="0123456789abcdef",t=Array(256),n=0,i;16>n;++n){i=16*n;for(var r=0;16>r;++r)t[i+r]=e[n]+e[r]}return t}()}).call(this,e("buffer").Buffer)},{"base64-js":2,buffer:7,ieee754:17}],8:[function(e,t,i){(function(e){"use strict";function t(e){return Object.prototype.toString.call(e)}i.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},i.isBoolean=function(e){return"boolean"==typeof e},i.isNull=function(e){return null===e},i.isNullOrUndefined=function(e){return null==e},i.isNumber=function(e){return"number"==typeof e},i.isString=function(e){return"string"==typeof e},i.isSymbol=function(e){return"symbol"==typeof e},i.isUndefined=function(e){return void 0===e},i.isRegExp=function(e){return"[object RegExp]"===t(e)},i.isObject=function(e){return"object"==typeof e&&null!==e},i.isDate=function(e){return"[object Date]"===t(e)},i.isError=function(i){return"[object Error]"===t(i)||i instanceof Error},i.isFunction=function(e){return"function"==typeof e},i.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e},i.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":22}],9:[function(e,t){"use strict";function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=b(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function n(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function r(e,t,n){if(t)e.call(n);else for(var r=e.length,a=f(e,r),s=0;s<r;++s)a[s].call(n)}function a(e,t,n,r){if(t)e.call(n,r);else for(var a=e.length,s=f(e,a),o=0;o<a;++o)s[o].call(n,r)}function s(e,t,n,r,a){if(t)e.call(n,r,a);else for(var s=e.length,o=f(e,s),l=0;l<s;++l)o[l].call(n,r,a)}function l(e,t,n,r,a,s){if(t)e.call(n,r,a,s);else for(var o=e.length,l=f(e,o),d=0;d<o;++d)l[d].call(n,r,a,s)}function d(e,t,n,r){if(t)e.apply(n,r);else for(var a=e.length,s=f(e,a),o=0;o<a;++o)s[o].apply(n,r)}function u(e,t,i,r){var a,s,o;if("function"!=typeof i)throw new TypeError("\"listener\" argument must be a function");if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),s=e._events),o=s[t]):(s=e._events=b(null),e._eventsCount=0),!o)o=s[t]=i,++e._eventsCount;else if("function"==typeof o?o=s[t]=r?[i,o]:[o,i]:r?o.unshift(i):o.push(i),!o.warned&&(a=n(e),a&&0<a&&o.length>a)){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" \""+(t+"\" listeners added. Use emitter.setMaxListeners() to increase limit."));l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",l.name,l.message)}return e}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e);}}function c(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},r=_.call(p,n);return r.listener=i,n.wrapFn=r,r}function m(e,t,i){var n=e._events;if(!n)return[];var r=n[t];return r?"function"==typeof r?i?[r.listener||r]:[r]:i?y(r):f(r,r.length):[]}function h(e){var t=this._events;if(t){var i=t[e];if("function"==typeof i)return 1;if(i)return i.length}return 0}function g(e,t){for(var r=t,i=r+1,a=e.length;i<a;r+=1,i+=1)e[r]=e[i];e.pop()}function f(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}var b=Object.create||function(e){var t=function(){};return t.prototype=e,new t},x=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return i},_=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0;var k=10,C;try{var w={};Object.defineProperty&&Object.defineProperty(w,"x",{value:0}),C=0===w.x}catch(e){C=!1}C?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return k},set:function(e){if("number"!=typeof e||0>e||e!==e)throw new TypeError("\"defaultMaxListeners\" must be a positive number");k=e}}):i.defaultMaxListeners=k,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||isNaN(e))throw new TypeError("\"n\" argument must be a positive number");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return n(this)},i.prototype.emit=function(e){var t="error"===e,n,o,u,p,c,i;if(i=this._events,i)t=t&&null==i.error;else if(!t)return!1;if(t){if(1<arguments.length&&(n=arguments[1]),n instanceof Error)throw n;else{var m=new Error("Unhandled \"error\" event. ("+n+")");throw m.context=n,m}return!1}if(o=i[e],!o)return!1;var h="function"==typeof o;switch(u=arguments.length,u){case 1:r(o,h,this);break;case 2:a(o,h,this,arguments[1]);break;case 3:s(o,h,this,arguments[1],arguments[2]);break;case 4:l(o,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(p=Array(u-1),c=1;c<u;c++)p[c-1]=arguments[c];d(o,h,this,p);}return!0},i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError("\"listener\" argument must be a function");return this.on(e,c(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError("\"listener\" argument must be a function");return this.prependListener(e,c(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,a,s,i;if("function"!=typeof t)throw new TypeError("\"listener\" argument must be a function");if(r=this._events,!r)return this;if(n=r[e],!n)return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=b(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,s=n.length-1;0<=s;s--)if(n[s]===t||n[s].listener===t){i=n[s].listener,a=s;break}if(0>a)return this;0===a?n.shift():g(n,a),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,i||t)}return this},i.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=b(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=b(null):delete n[e]),this;if(0===arguments.length){var i=x(n),a;for(r=0;r<i.length;++r)a=i[r],"removeListener"===a||this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=b(null),this._eventsCount=0,this}if(t=n[e],"function"==typeof t)this.removeListener(e,t);else if(t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return m(this,e,!0)},i.prototype.rawListeners=function(e){return m(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],10:[function(e,t){"use strict";var i=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},o=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t=i.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&i.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!r)return!1;for(var a in e);return"undefined"==typeof a||i.call(e,a)},l=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},d=function(e,t){if("__proto__"===t){if(!i.call(e,t))return;if(a)return a(e,t).value}return e[t]};t.exports=function e(){var t=arguments[0],n=1,i=arguments.length,r=!1,a,u,p,c,m,h;for("boolean"==typeof t&&(r=t,t=arguments[1]||{},n=2),(null==t||"object"!=typeof t&&"function"!=typeof t)&&(t={});n<i;++n)if(a=arguments[n],null!=a)for(u in a)p=d(t,u),c=d(a,u),t!==c&&(r&&c&&(o(c)||(m=s(c)))?(m?(m=!1,h=p&&s(p)?p:[]):h=p&&o(p)?p:{},l(t,{name:u,newValue:e(r,h,c)})):"undefined"!=typeof c&&l(t,{name:u,newValue:c}));return t}},{}],11:[function(e,t){"use strict";function i(e,t){var i=n(e);if(t===i)return!1;var r=e.trim();return!r.charAt(0).match(/\//)}function n(e){var t=/^\s*/.exec(e);return null===t?0:t[0].length}var r=e("./utils/splitStringIntoLines.js"),a=e("./utils/createInitialSequence"),s=e("./utils/months");t.exports=function(e){function t(){d(),S.push(A)}function o(){return A.parsedSequence.features[A.parsedSequence.features.length-1]}function l(e){A.messages.indexOf(-1===e)&&A.messages.push(e)}function d(){if(A.parsedSequence&&A.parsedSequence.features)for(var e=0;e<A.parsedSequence.features.length;e++)A.parsedSequence.features[e]=v(A.parsedSequence.features[e])}function u(e,t){if(t!==j.ORIGIN_TAG){var i=e.replace(/[\s]*[0-9]*/g,"");A.parsedSequence.sequence+=i}}function p(e){A=a(),e=c(j.LOCUS_TAG,e);var t=e.match(/^([^\s]+)\s+(\d+)\s+bp\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)$/),i=t[1],n=+t[2],r=t[3],o="circular"===t[4],l=t[5],d=A.parsedSequence;d.circular=o,d.moleculeType=r,d.genbankDivision=l;var u=t[6].match(/^(\d{2})-(.{3})-(\d{4})$/),p=new Date;p.setFullYear(+u[3]),p.setUTCMonth(s.indexOf(u[2].toUpperCase())),p.setDate(+u[1]),p.setUTCHours(12),p.setMinutes(0),p.setSeconds(0),p.setMilliseconds(0),d.date=p.getTime(),d.name=i,d.size=n}function c(e,t){return t=t.replace(/^\s*/,""),0===t.indexOf(e)&&(t=t.replace(e,"")),t.trim()}function m(e,t){var i=A.parsedSequence.references,n=i[i.length-1];t?_(t,e,t.toLowerCase(),n):_(j.REFERENCE_TAG,e,"description",n)}function h(e,t,r){var a;if(t===j.FEATURES_TAG)return void(M=!0);if(M&&(P=n(e),M=!1),i(e,P))X?(y(e.trim()),X=!0):(T&&(T[T.length-1]+=e.trim().replace(/"/g,"")),X=!1);else if(f(e))o()&&(b(e),X=!1);else{a=r.match(/complement/g)?-1:1,g();var s=o();s.type=t,s.strand=a,y(r),X=!0}}function g(){A.parsedSequence.features.push({locations:[],notes:{}})}function f(e){var t=!1;return e.trim().charAt(0).match(/\//)?t=!0:e.match(/^[\s]*\/[\w]+=[\S]+/)&&(t=!0),t}function y(e){e=e.trim();var t=[];e.replace(/(\d+)/g,function(e,i){t.push(i)});var i=o();i.start=+t[0],i.end=+t[1]}function b(e){var t,i;t=e.trim(),t=t.replace(/^\/|"$/g,""),i=t.split(/="|=/);var n=i[1];n&&(n=n.replace(/\\/g," "),e.match(/="/g)?n=n.replace(/".*/g,""):n.match(/^\d+$/g)&&(n=+n));var r=i[0],a=o().notes;a[r]?a[r].push(n):a[r]=[n],T=a[r]}function x(e){var t;return e=e.replace(/^[\s]*/,""),t=0>e.indexOf("=")?e.split(/[\s]+/):e.split(/=/),t[0]}function _(e,t,i,n){n=n||A.parsedSequence;var r=c(e,t);n[i]=n[i]?`${n[i]} `:"",n[i]+=r}function k(e){var t;return 0>e.indexOf("=")?(e=e.replace(/^[\s]*[\S]+[\s]+|[\s]+$/,""),e=e.trim(),e):(t=e.split(/=/),t[1])}function C(e){var t=!1;return e.substr(0,10).match(/^[\S]+/)&&(t=!0),t}function w(e){var t=!1;return e.substr(0,10).match(/^[\s]+[\S]+/)&&(t=!0),t}function v(e){e.name=e.notes.label?e.notes.label[0]:e.notes.gene?e.notes.gene[0]:e.notes.ApEinfo_label?e.notes.ApEinfo_label[0]:e.notes.name?e.notes.name[0]:e.notes.organism?e.notes.organism[0]:e.notes.locus_tag?e.notes.locus_tag[0]:e.notes.note?e.notes.note[0].substr(0,100):"";var t=e.name;return 0===e.name||e.name||(e.name="Untitled Feature"),e.name="string"==typeof e.name?e.name:e.name+"",e.name=e.name.substr(0,100),e.name!==t&&l("Warning: Shortening name of sequence (max 100 chars)"),e}var S=[],j={LOCUS_TAG:"LOCUS",DEFINITION_TAG:"DEFINITION",ACCESSION_TAG:"ACCESSION",VERSION_TAG:"VERSION",KEYWORDS_TAG:"KEYWORDS",SOURCE_TAG:"SOURCE",ORGANISM_TAG:"ORGANISM",REFERENCE_TAG:"REFERENCE",AUTHORS_TAG:"AUTHORS",CONSORTIUM_TAG:"CONSRTM",TITLE_TAG:"TITLE",JOURNAL_TAG:"JOURNAL",PUBMED_TAG:"PUBMED",REMARK_TAG:"REMARK",FEATURES_TAG:"FEATURES",BASE_COUNT_TAG:"BASE COUNT",ORIGIN_TAG:"ORIGIN",END_SEQUENCE_TAG:"//"},E=r(e),D=void 0,A,T,I,P;null===E&&l("Import Error: Sequence file is empty");var H=!1;for(var F of E){if(null===F)break;var O=x(F),R=k(F),z=w(F),N=C(F);if(O===j.END_SEQUENCE_TAG||N?(I=O,D=null):z&&(D=O),""!==F.trim()&&";"!==O){if(!H&&I!==j.LOCUS_TAG)break;switch(I){case j.LOCUS_TAG:H=!0,p(F);break;case j.FEATURES_TAG:if(""===R){l(`Warning: The feature '${O}'' has no location specified. This line has been ignored: line${F}`);break}h(F,O,R);break;case j.ORIGIN_TAG:u(F,O);break;case j.DEFINITION_TAG:case j.ACCESSION_TAG:case j.VERSION_TAG:case j.KEYWORDS_TAG:_(I,F,I.toLowerCase());break;case j.SOURCE_TAG:D===j.ORGANISM_TAG?_(D,F,"organism"):_(O,F,"source");break;case j.REFERENCE_TAG:if(O===j.REFERENCE_TAG){var L=A.parsedSequence.references||[];A.parsedSequence.references=L,L.push({})}m(F,D);break;case j.END_SEQUENCE_TAG:t();break;default:l(`Warning: This line has been ignored: ${F}`);}}}return A.success&&S[S.length-1]!==A&&t(),S;var M,X}},{"./utils/createInitialSequence":12,"./utils/months":13,"./utils/splitStringIntoLines.js":14}],12:[function(e,t){"use strict";t.exports=function(){return{messages:[],success:!0,parsedSequence:{features:[],name:"Untitled sequence",sequence:""}}}},{}],13:[function(e,t){"use strict";t.exports=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]},{}],14:[function(e,t){"use strict";t.exports=function(e){var t=[];return""===e?t:(t=e.split(/\r?\n/),1===t.length&&(t=e.split("\\n")),t)}},{}],15:[function(e,t){"use strict";t.exports=e("./lib/heap")},{"./lib/heap":16}],16:[function(e,t,n){"use strict";(function(){var e,r,s,a,o,l,d,u,c,m,h,g,f,y,b;s=p,m=w,r=function(e,t){return e<t?-1:e>t?1:0},c=function(e,t,i,n,a){var o;if(null==i&&(i=0),null==a&&(a=r),0>i)throw new Error("lo must be non-negative");for(null==n&&(n=e.length);i<n;)o=s((i+n)/2),0>a(t,e[o])?n=o:i=o+1;return[].splice.apply(e,[i,i-i].concat(t)),t},l=function(e,t,i){return null==i&&(i=r),e.push(t),y(e,0,e.length-1,i)},o=function(e,t){var i,n;return null==t&&(t=r),i=e.pop(),e.length?(n=e[0],e[0]=i,b(e,0,t)):n=i,n},u=function(e,t,i){var n;return null==i&&(i=r),n=e[0],e[0]=t,b(e,0,i),n},d=function(e,t,i){var n;return null==i&&(i=r),e.length&&0>i(e[0],t)&&(n=[e[0],t],t=n[0],e[0]=n[1],b(e,0,i)),t},a=function(e,t){var n,i,a,o,l,d;for(null==t&&(t=r),o=function(){d=[];for(var t=0,i=s(e.length/2);0<=i?t<i:t>i;0<=i?t++:t--)d.push(t);return d}.apply(this).reverse(),l=[],(i=0,a=o.length);i<a;i++)n=o[i],l.push(b(e,n,t));return l},f=function(e,t,i){var n;if(null==i&&(i=r),n=e.indexOf(t),-1!==n)return y(e,0,n,i),b(e,n,i)},h=function(e,t,i){var n,s,o,l,u;if(null==i&&(i=r),s=e.slice(0,t),!s.length)return s;for(a(s,i),u=e.slice(t),(o=0,l=u.length);o<l;o++)n=u[o],d(s,n,i);return s.sort(i).reverse()},g=function(e,t,n){var s,l,i,d,u,p,h,g,f,y;if(null==n&&(n=r),10*t<=e.length){if(d=e.slice(0,t).sort(n),!d.length)return d;for(i=d[d.length-1],g=e.slice(t),(u=0,h=g.length);u<h;u++)s=g[u],0>n(s,i)&&(c(d,s,0,null,n),d.pop(),i=d[d.length-1]);return d}for(a(e,n),y=[],(l=p=0,f=m(t,e.length));0<=f?p<f:p>f;l=0<=f?++p:--p)y.push(o(e,n));return y},y=function(e,t,i,n){var a,s,o;for(null==n&&(n=r),a=e[i];i>t;){if(o=i-1>>1,s=e[o],0>n(a,s)){e[i]=s,i=o;continue}break}return e[i]=a},b=function(e,t,i){var n,a,s,o,l;for(null==i&&(i=r),a=e.length,l=t,s=e[t],n=2*t+1;n<a;)o=n+1,o<a&&!(0>i(e[n],e[o]))&&(n=o),e[t]=e[n],t=n,n=2*t+1;return e[t]=s,y(e,l,t,i)},e=function(){function e(e){this.cmp=null==e?r:e,this.nodes=[]}return e.push=l,e.pop=o,e.replace=u,e.pushpop=d,e.heapify=a,e.updateItem=f,e.nlargest=h,e.nsmallest=g,e.prototype.push=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pop=function(){return o(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return d(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return a(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return f(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),function(e,r){return"function"==typeof i&&i.amd?i([],r):"object"==typeof n?t.exports=r():e.Heap=r()}(this,function(){return e})}).call(void 0)},{}],17:[function(e,t,i){"use strict";i.read=function(t,n,r,a,o){var l=8*o-a-1,u=(1<<l)-1,p=u>>1,c=-7,h=r?o-1:0,i=r?-1:1,d=t[n+h],s,e;for(h+=i,s=d&(1<<-c)-1,d>>=-c,c+=l;0<c;s=256*s+t[n+h],h+=i,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=a;0<c;e=256*e+t[n+h],h+=i,c-=8);if(0===s)s=1-p;else{if(s===u)return e?NaN:(d?-1:1)*Infinity;e+=f(2,a),s-=p}return(d?-1:1)*e*f(2,s-a)},i.write=function(t,n,r,a,o,l){var h=8*l-o-1,g=(1<<h)-1,y=g>>1,b=23===o?5.960464477539063e-8-6.617444900424222e-24:0,x=a?0:l-1,i=a?1:-1,d=0>n||0===n&&0>1/n?1:0,s,k,m;for(n=_(n),isNaN(n)||n===Infinity?(k=isNaN(n)?1:0,s=g):(s=p(u(n)/Math.LN2),1>n*(m=f(2,-s))&&(s--,m*=2),n+=1<=s+y?b/m:b*f(2,1-y),2<=n*m&&(s++,m/=2),s+y>=g?(k=0,s=g):1<=s+y?(k=(n*m-1)*f(2,o),s+=y):(k=n*f(2,y-1)*f(2,o),s=0));8<=o;t[r+x]=255&k,x+=i,k/=256,o-=8);for(s=s<<o|k,h+=o;0<h;t[r+x]=255&s,x+=i,s/=256,h-=8);t[r+x-i]|=128*d}},{}],18:[function(e,t){(function(e){"use strict";function i(){u=!0;for(var e=d.length,t,i;e;){for(i=d,d=[],t=-1;++t<e;)i[t]();e=d.length}u=!1}var n=e.MutationObserver||e.WebKitMutationObserver,r;if(n){var a=0,s=new n(i),o=e.document.createTextNode("");s.observe(o,{characterData:!0}),r=function(){o.data=a=++a%2}}else if(!e.setImmediate&&"undefined"!=typeof e.MessageChannel){var l=new e.MessageChannel;l.port1.onmessage=i,r=function(){l.port2.postMessage(0)}}else r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){i(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(i,0)};var d=[],u;t.exports=function(e){1!==d.push(e)||u||r()}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],19:[function(e,t){"use strict";t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},{}],20:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e("utf8");class n{constructor(e=8192,t={}){var i=!1;"number"==typeof e?e=new ArrayBuffer(e):(i=!0,this.lastWrittenByte=e.byteLength);var r=t.offset?t.offset>>>0:0,a=e.byteLength-r,s=r;(ArrayBuffer.isView(e)||e instanceof n)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+r),e=e.buffer),this.lastWrittenByte=i?a:0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){var e=this._marks.pop();if(void 0===e)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){var t=this.offset+e,i=2*t,n=new Uint8Array(i);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){for(var t=new Uint8Array(e),n=0;n<e;n++)t[n]=this.readByte();return t}readInt16(){var e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){var e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){var e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){var e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){var e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){var e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return c(this.readInt8())}readChars(e=1){for(var t="",n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){var t=this.readChars(e);return r.decode(t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(var t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(var t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){var t=r.encode(e);return this.writeChars(t)}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}i.IOBuffer=n},{utf8:197}],21:[function(e,t){"use strict";var i=Object.prototype.toString;t.exports=function(e){return i.call(e).endsWith("Array]")}},{}],22:[function(e,t){"use strict";function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function n(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}t.exports=function(e){return null!=e&&(i(e)||n(e)||!!e._isBuffer)}},{}],23:[function(e,t){"use strict";var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],24:[function(e,t){"use strict";function i(){function e(e){for(var t=[],n=0;n<e.length;n++)t.push(parseFloat(e[n]));return t}function t(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"")}function n(e){return-1!==b.indexOf(e)}function r(e){for(var n=e.spectra,r=n.length,a={times:Array(r),series:{ms:{dimension:2,data:Array(r)}}},s=[],o=0,i;o<b.length;o++)i=t(b[o]),n[0][i]&&(s.push(i),a.series[i]={dimension:1,data:Array(r)});for(var l=0,d;l<r;l++){d=n[l],a.times[l]=d.pageValue;for(var u=0;u<s.length;u++)a.series[s[u]].data[l]=parseFloat(d[s[u]]);d.data&&(a.series.ms.data[l]=[d.data[0].x,d.data[0].y])}e.chromatogram=a}function a(e){var t=e.spectra[0].data[0];e.chromatogram={times:t.x.slice(),series:{intensity:{dimension:1,data:t.y.slice()}}}}function i(e,t){if(t.xFactor||(t.xFactor=1),t.yFactor||(t.yFactor=1),t.observeFrequency&&t.xUnit&&"HZ"===t.xUnit.toUpperCase()&&(t.xUnit="PPM",t.xFactor/=t.observeFrequency,t.firstX/=t.observeFrequency,t.lastX/=t.observeFrequency,t.deltaX/=t.observeFrequency),t.shiftOffsetVal){var i=t.firstX-t.shiftOffsetVal;t.firstX-=i,t.lastX-=i}}function s(e){e=e.sort(o);var t=e.length;return e[p(t/2)]}function o(e,t){return e-t}function l(e){for(var t=e[0].data[0][0],n=t,r=e.length,a=e[0].data[0].length/2,o=Array(r),l=0;l<r;l++){o[l]=Array(a);for(var i=e[l].data[0],d=0,u;d<a;d++)u=i[2*d+1],o[l][d]=u,u<t&&(t=u),u>n&&(n=u)}return{z:o,minX:e[0].data[0][0],maxX:e[0].data[0][e[0].data[0].length-2],minY:e[0].pageValue,maxY:e[r-1].pageValue,minZ:t,maxZ:n,noise:s(o[0].map(Math.abs))}}function u(e,t){var i=l(e.spectra);t.noContour||(e.contourLines=c(i,t),delete i.z),e.minMax=i}function c(e,t){for(var i=e.noise,n=e.z,r=n.length,a=n[0].length,s=e.minX,o=e.maxX,l=(o-s)/(a-1),u=e.minY,p=e.maxY,c=(p-u)/(r-1),m=e.minZ,h=e.maxZ,g=2*t.nbContourLevels,f=Array(g),y=0,b,x,_,k,C,w,v,S,j,E,D,A,T,I;y<g;y++){I={},f[y]=I;var P=y%2,H=(h-t.noiseMultiplier*i)*d((y>>1)-t.nbContourLevels);T=0==P?H+t.noiseMultiplier*i:0-H-t.noiseMultiplier*i;var F=[];if(I.zValue=T,I.lines=F,!(T<=m||T>=h))for(var O=0;O<r-1;O++)for(var R=n[O],z=n[O+1],N=0;N<a-1;N++)b=R[N],x=R[N+1],_=z[N],k=z[N+1],C=b>T,w=x>T,v=_>T,S=k>T,C!==w&&C!==v&&(j=N+(T-b)/(x-b),E=O,D=N,A=O+(T-b)/(_-b),F.push(j*l+s),F.push(E*c+u),F.push(D*l+s),F.push(A*c+u)),S!==w&&S!==v&&(j=N+1,E=O+1-(T-k)/(x-k),D=N+1-(T-k)/(_-k),A=O+1,F.push(j*l+s),F.push(E*c+u),F.push(D*l+s),F.push(A*c+u)),w!==v&&(j=(N+1-(T-x)/(_-x))*l+s,E=(O+(T-x)/(_-x))*c+u,w!==C&&(D=N+1-(T-x)/(b-x),A=O,F.push(j),F.push(E),F.push(D*l+s),F.push(A*c+u)),v!==C&&(D=N,A=O+1-(T-_)/(b-_),F.push(j),F.push(E),F.push(D*l+s),F.push(A*c+u)),w!==S&&(D=N+1,A=O+(T-x)/(k-x),F.push(j),F.push(E),F.push(D*l+s),F.push(A*c+u)),v!==S&&(D=N+(T-_)/(k-_),A=O+1,F.push(j),F.push(E),F.push(D*l+s),F.push(A*c+u)))}return{minX:e.minX,maxX:e.maxX,minY:e.minY,maxY:e.maxY,segments:f}}function m(e,t){var n=e.yFactor,r=e.deltaX;e.isXYdata=!0;var a=[];e.data=[a];for(var s=e.firstX,o=e.firstY,l=!1,d=0,i;d<t.length;d++)if(i=t.charCodeAt(d),13===i||10===i)l=!0;else if(l)break;for(var u=!0,p=!1,c=!1,m=0,h=!1,g=!1,y=0,b=!1,x=!1,_=!1,k=0;d<=t.length;d++)if(i=d===t.length?13:t.charCodeAt(d),g)(13===i||10===i)&&(u=!0,g=!1);else if(57>=i&&48<=i)x=!0,0<k?y+=(i-48)/f(10,k++):(y*=10,y+=i-48);else if(44===i||46===i)x=!0,k++;else{if(x){if(u)u=!1,c&&(_=!0);else if(_)_=!1;else{p&&(m=b?0-y:y,c=!0,p=!1);for(var C=h?y-1:1,w=0;w<C;w++)c?o+=m:o=b?0-y:y,a.push(s),a.push(o*n),s+=r}b=!1,y=0,k=0,x=!1,h=!1}if(74>i&&63<i)x=!0,c=!1,y=i-64;else if(96<i&&106>i)x=!0,c=!1,y=i-96,b=!0;else if(115===i)x=!0,h=!0,y=9;else if(82<i&&91>i)x=!0,h=!0,y=i-82;else if(73<i&&83>i)x=!0,p=!0,y=i-73;else if(105<i&&115>i)x=!0,p=!0,y=i-105,b=!0;else if(36===i&&36===t.charCodeAt(d+1))x=!0,g=!0;else if(37===i)x=!0,p=!0,y=0,b=!1;else if(45===i){var v=t.charCodeAt(d+1);(48<=v&&57>=v||44===v||46===v)&&(x=!0,!u&&(c=!1),b=!0)}else(13===i||10===i)&&(u=!0,g=!1)}}function h(e,t){var n=/(\(+|\)+|<+|>+|\s+)/g;e.isXYAdata=!0;var r=[],a;e.data=[r];for(var s=t.split(/,? *,?[;\r\n]+ */),o=1;o<s.length;o++)a=s[o].trim().replace(n,"").split(","),r.push(parseFloat(a[0])),r.push(parseFloat(a[1]))}function g(e,t,n){var r=/\$\$.*/,a=/[,\t ]+/;e.isPeaktable=!0;var s=[],o;e.data=[s];for(var l=t.split(/,? *,?[;\r\n]+ */),d=1;d<l.length;d++)if(o=l[d].trim().replace(r,"").split(a),0==o.length%2)for(var i=0;i<o.length;i+=2)s.push(parseFloat(o[i])*e.xFactor),s.push(parseFloat(o[i+1])*e.yFactor);else n.logs.push(`Format error: ${o}`)}var y=/[, \t]+/,b=["TIC",".RIC","SCANNUMBER"];class x{}var _={keepRecordsRegExp:/^$/,xy:!1,withoutXY:!1,chromatogram:!1,keepSpectra:!1,noContour:!1,nbContourLevels:7,noiseMultiplier:5,profiling:!1};return function(s,o){o=Object.assign({},_,o);var l=!o.withoutXY,d=Date.now(),p={},c={},f,b,C,w,v,S,E;c.profiling=!!o.profiling&&[],c.logs=[];var D=[];c.spectra=D,c.info={};var A=new x;if("string"!=typeof s)throw new TypeError("the JCAMP should be a string");c.profiling&&c.profiling.push({action:"Before split to LDRS",time:Date.now()-d}),w=s.split(/[\r\n]+##/),c.profiling&&c.profiling.push({action:"Split to LDRS",time:Date.now()-d}),w[0]&&(w[0]=w[0].replace(/^[\r\n ]*##/,""));for(var T=0;T<w.length;T++){if(f=w[T],v=f.indexOf("="),0<v?(b=f.substring(0,v),C=f.substring(v+1).trim()):(b=f,C=""),b=b.replace(/[_ -]/g,"").toUpperCase(),"DATATABLE"===b&&(S=C.indexOf("\n"),-1===S&&(S=C.indexOf("\r")),0<S)){var I=-1,P=-1;if(E=C.substring(0,S).split(/[ ,;\t]+/),0<E[0].indexOf("++")){var H=E[0].replace(/.*\(([a-zA-Z0-9]+)\+\+.*/,"$1"),F=E[0].replace(/.*\.\.([a-zA-Z0-9]+).*/,"$1");I=p.symbol.indexOf(H),P=p.symbol.indexOf(F)}-1===I&&(I=0),-1===P&&(P=0),p.first&&(p.first.length>I&&(A.firstX=p.first[I]),p.first.length>P&&(A.firstY=p.first[P])),p.last&&(p.last.length>I&&(A.lastX=p.last[I]),p.last.length>P&&(A.lastY=p.last[P])),p.vardim&&p.vardim.length>I&&(A.nbPoints=p.vardim[I]),p.factor&&(p.factor.length>I&&(A.xFactor=p.factor[I]),p.factor.length>P&&(A.yFactor=p.factor[P])),p.units&&(p.units.length>I&&(A.xUnit=p.units[I]),p.units.length>P&&(A.yUnit=p.units[P])),A.datatable=E[0],E[1]&&-1<E[1].indexOf("PEAKS")?b="PEAKTABLE":E[1]&&(E[1].indexOf("XYDATA")||0<E[0].indexOf("++"))&&(b="XYDATA",A.deltaX=(A.lastX-A.firstX)/(A.nbPoints-1))}if("XYDATA"===b){l&&(i(c,A),C.match(/.*\+\+.*/)?(!A.deltaX&&(A.deltaX=(A.lastX-A.firstX)/(A.nbPoints-1)),m(A,C,c)):g(A,C,c),D.push(A),A=new x);continue}else if("PEAKTABLE"===b){l&&(i(c,A),g(A,C,c),D.push(A),A=new x);continue}if("PEAKASSIGNMENTS"===b){l&&(C.match(/.*(XYA).*/)&&h(A,C),D.push(A),A=new x);continue}if("TITLE"===b)A.title=C;else if("DATATYPE"===b)A.dataType=C,-1<C.indexOf("nD")&&(c.twoD=!0);else if("NTUPLES"===b)-1<C.indexOf("nD")&&(c.twoD=!0);else if("XUNITS"===b)A.xUnit=C;else if("YUNITS"===b)A.yUnit=C;else if("FIRSTX"===b)A.firstX=parseFloat(C);else if("LASTX"===b)A.lastX=parseFloat(C);else if("FIRSTY"===b)A.firstY=parseFloat(C);else if("LASTY"===b)A.lastY=parseFloat(C);else if("NPOINTS"===b)A.nbPoints=parseFloat(C);else if("XFACTOR"===b)A.xFactor=parseFloat(C);else if("YFACTOR"===b)A.yFactor=parseFloat(C);else if("MAXX"===b)A.maxX=parseFloat(C);else if("MINX"===b)A.minX=parseFloat(C);else if("MAXY"===b)A.maxY=parseFloat(C);else if("MINY"===b)A.minY=parseFloat(C);else if("DELTAX"===b)A.deltaX=parseFloat(C);else if(".OBSERVEFREQUENCY"===b||"$SFO1"===b)A.observeFrequency||(A.observeFrequency=parseFloat(C));else if(".OBSERVENUCLEUS"===b)A.xType||(c.xType=C.replace(/[^a-zA-Z0-9]/g,""));else if("$SFO2"===b)c.indirectFrequency||(c.indirectFrequency=parseFloat(C));else if("$OFFSET"===b)c.shiftOffsetNum=0,A.shiftOffsetVal||(A.shiftOffsetVal=parseFloat(C));else if("$REFERENCEPOINT"===b);else if("VARNAME"===b)p.varname=C.split(y);else if("SYMBOL"===b)p.symbol=C.split(y);else if("VARTYPE"===b)p.vartype=C.split(y);else if("VARFORM"===b)p.varform=C.split(y);else if("VARDIM"===b)p.vardim=e(C.split(y));else if("UNITS"===b)p.units=C.split(y);else if("FACTOR"===b)p.factor=e(C.split(y));else if("FIRST"===b)p.first=e(C.split(y));else if("LAST"===b)p.last=e(C.split(y));else if("MIN"===b)p.min=e(C.split(y));else if("MAX"===b)p.max=e(C.split(y));else if(".NUCLEUS"===b)c.twoD&&(c.yType=C.split(y)[0]);else if("PAGE"===b){A.page=C.trim(),A.pageValue=parseFloat(C.replace(/^.*=/,"")),A.pageSymbol=A.page.replace(/[=].*/,"");var O=p.symbol.indexOf(A.pageSymbol),R="";p.units&&p.units[O]&&(R=p.units[O]),c.indirectFrequency&&"PPM"!==R&&(A.pageValue/=c.indirectFrequency)}else"RETENTIONTIME"===b?A.pageValue=parseFloat(C):n(b)?A[t(b)]=C:"SAMPLEDESCRIPTION"===b&&(A.sampleDescription=C);b.match(o.keepRecordsRegExp)&&(c.info[b]=C.trim())}if(c.profiling&&c.profiling.push({action:"Finished parsing",time:Date.now()-d}),0<Object.keys(p).length){for(var z=[],N=Object.keys(p),L=0;L<N.length;L++)for(var M=N[L],X=p[M],U=0;U<X.length;U++)z[U]||(z[U]={}),z[U][M]=X[U];c.ntuples=z}if(c.twoD&&l&&(u(c,o),c.profiling&&c.profiling.push({action:"Finished countour plot calculation",time:Date.now()-d}),!o.keepSpectra&&delete c.spectra),o.chromatogram&&(o.xy=!0),o.xy&&l&&0<D.length)for(var j=0;j<D.length;j++)if(A=D[j],0<A.data.length)for(var B=0;B<A.data.length;B++){for(var Y=A.data[B],q={x:Array(Y.length/2),y:Array(Y.length/2)},W=0;W<Y.length;W+=2)q.x[W/2]=Y[W],q.y[W/2]=Y[W+1];A.data[B]=q}return o.chromatogram&&(1<c.spectra.length?r(c):a(c),c.profiling&&c.profiling.push({action:"Finished chromatogram calculation",time:Date.now()-d})),c.profiling&&c.profiling.push({action:"Total time",time:Date.now()-d}),c}}function n(e,t){return o||r(),new Promise(function(i){var n=`${Date.now()}${Math.random()}`;s[n]=i,o.postMessage(JSON.stringify({stamp:n,input:e,options:t}))})}function r(){var e=URL.createObjectURL(new Blob([`var getConverter =${i.toString()};var convert = getConverter(); onmessage = function (event) { var data = JSON.parse(event.data); postMessage(JSON.stringify({stamp: data.stamp, output: convert(data.input, data.options)})); };`],{type:"application/javascript"}));o=new Worker(e),URL.revokeObjectURL(e),o.addEventListener("message",function(e){var t=JSON.parse(e.data),i=t.stamp;s[i]&&s[i](t.output)})}var a=i(),s={},o;t.exports={convert:function(e,t,i){return"boolean"==typeof t&&(i=t,t={}),i?n(e,t):a(e,t)},createTree:function(e,t={}){var n=t.flatten;if("string"!=typeof e)throw new TypeError("the JCAMP should be a string");for(var r=e.split(/[\r\n]+/),a=[],s=[],o=[],l=void 0,d=0,u=0,i;u<r.length;u++){if(i=r[u],"##NTUPLES"===i.substring(0,9)&&d++,"##TITLE"===i.substring(0,7)){for(var p=[i.substring(8).trim()],c=u+1;c<r.length&&!r[c].startsWith("##");c++)p.push(r[c].trim());s.push({title:p.join("\n"),jcamp:`${i}\n`,children:[]}),l=s[s.length-1],a.push(l)}else if("##END"===i.substring(0,5)&&0==d){l.jcamp+=`${i}\n`;var m=s.pop();0===s.length?(l=void 0,o.push(m)):(l=s[s.length-1],l.children.push(m))}else if(l&&l.jcamp){l.jcamp+=`${i}\n`;var h=i.match(/^##(.*?)=(.+)/);if(h){var g=h[1].replace(/[ _-]/g,"").toUpperCase();"DATATYPE"===g&&(l.dataType=h[2].trim())}}"##END"===i.substring(0,5)&&0<d&&d--}return n!==void 0&&n?(a.forEach((e)=>{e.children=void 0}),a):o}}},{}],25:[function(e,t,i){"use strict";var n=e("./utils"),r=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(e){for(var t=[],r=0,i=e.length,s=i,o="string"!==n.getTypeOf(e),l,d,u,p,c,m,h;r<e.length;)s=i-r,o?(l=e[r++],d=r<i?e[r++]:0,u=r<i?e[r++]:0):(l=e.charCodeAt(r++),d=r<i?e.charCodeAt(r++):0,u=r<i?e.charCodeAt(r++):0),p=l>>2,c=(3&l)<<4|d>>4,m=1<s?(15&d)<<2|u>>6:64,h=2<s?63&u:64,t.push(a.charAt(p)+a.charAt(c)+a.charAt(m)+a.charAt(h));return t.join("")},i.decode=function(e){var t=0,i=0,n="data:",s,o,l,d,u,p,c;if(e.substr(0,n.length)===n)throw new Error("Invalid base64 input, it looks like a data url.");e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var m=3*e.length/4;if(e.charAt(e.length-1)===a.charAt(64)&&m--,e.charAt(e.length-2)===a.charAt(64)&&m--,0!=m%1)throw new Error("Invalid base64 input, bad content length.");var h;for(h=r.uint8array?new Uint8Array(0|m):Array(0|m);t<e.length;)d=a.indexOf(e.charAt(t++)),u=a.indexOf(e.charAt(t++)),p=a.indexOf(e.charAt(t++)),c=a.indexOf(e.charAt(t++)),s=d<<2|u>>4,o=(15&u)<<4|p>>2,l=(3&p)<<6|c,h[i++]=s,64!==p&&(h[i++]=o),64!==c&&(h[i++]=l);return h}},{"./support":54,"./utils":56}],26:[function(e,t){"use strict";function i(e,t,i,n,r){this.compressedSize=e,this.uncompressedSize=t,this.crc32=i,this.compression=n,this.compressedContent=r}var n=e("./external"),r=e("./stream/DataWorker"),a=e("./stream/DataLengthProbe"),s=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");i.prototype={getContentWorker:function(){var e=new r(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new r(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},i.createWorkerFrom=function(e,t,i){return e.pipe(new s).pipe(new a("uncompressedSize")).pipe(t.compressWorker(i)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=i},{"./external":30,"./stream/Crc32Probe":49,"./stream/DataLengthProbe":50,"./stream/DataWorker":51}],27:[function(e,t,i){"use strict";var n=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":31,"./stream/GenericWorker":52}],28:[function(e,t){"use strict";function i(e,t,n,r){e^=-1;for(var s=r;s<r+n;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}function n(e,t,n,r){e^=-1;for(var s=r;s<r+n;s++)e=e>>>8^a[255&(e^t.charCodeAt(s))];return-1^e}var r=e("./utils"),a=function(){for(var e=[],t=0,i;256>t;t++){i=t;for(var n=0;8>n;n++)i=1&i?3988292384^i>>>1:i>>>1;e[t]=i}return e}();t.exports=function(e,t){if("undefined"==typeof e||!e.length)return 0;var a="string"!==r.getTypeOf(e);return a?i(0|t,e,e.length,0):n(0|t,e,e.length,0)}},{"./utils":56}],29:[function(e,t,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],30:[function(e,t){"use strict";var i=null;i="undefined"==typeof Promise?e("lie"):Promise,t.exports={Promise:i}},{lie:60}],31:[function(e,t,i){"use strict";function n(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,a=e("pako"),s=e("./utils"),o=e("./stream/GenericWorker"),l=r?"uint8array":"array";i.magic="\b\0",s.inherits(n,o),n.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(l,e.data),!1)},n.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},n.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},n.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},i.compressWorker=function(e){return new n("Deflate",e)},i.uncompressWorker=function(){return new n("Inflate",{})}},{"./stream/GenericWorker":52,"./utils":56,pako:155}],32:[function(e,t){"use strict";function i(e,t,i,n){r.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=i,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var n=e("../utils"),r=e("../stream/GenericWorker"),a=e("../utf8"),s=e("../crc32"),o=e("../signature"),l=function(e,t){var n="",r;for(r=0;r<t;r++)n+=c(255&e),e>>>=8;return n},d=function(e,t){var i=e;return e||(i=t?16893:33204),(65535&i)<<16},u=function(e){return 63&(e||0)},p=function(e,t,i,r,p,c){var m=e.file,h=e.compression,g=c!==a.utf8encode,f=n.transformTo("string",c(m.name)),y=n.transformTo("string",a.utf8encode(m.name)),b=m.comment,x=n.transformTo("string",c(b)),_=n.transformTo("string",a.utf8encode(b)),k=y.length!==m.name.length,C=_.length!==b.length,w="",v="",S="",j=m.dir,E=m.date,D={crc32:0,compressedSize:0,uncompressedSize:0},A,T;(!t||i)&&(D.crc32=e.crc32,D.compressedSize=e.compressedSize,D.uncompressedSize=e.uncompressedSize);var I=0;t&&(I|=8),!g&&(k||C)&&(I|=2048);var P=0,H=0;j&&(P|=16),"UNIX"===p?(H=798,P|=d(m.unixPermissions,j)):(H=20,P|=u(m.dosPermissions,j)),A=E.getUTCHours(),A<<=6,A|=E.getUTCMinutes(),A<<=5,A|=E.getUTCSeconds()/2,T=E.getUTCFullYear()-1980,T<<=4,T|=E.getUTCMonth()+1,T<<=5,T|=E.getUTCDate(),k&&(v=l(1,1)+l(s(f),4)+y,w+="up"+l(v.length,2)+v),C&&(S=l(1,1)+l(s(x),4)+_,w+="uc"+l(S.length,2)+S);var F="";F+="\n\0",F+=l(I,2),F+=h.magic,F+=l(A,2),F+=l(T,2),F+=l(D.crc32,4),F+=l(D.compressedSize,4),F+=l(D.uncompressedSize,4),F+=l(f.length,2),F+=l(w.length,2);var O=o.LOCAL_FILE_HEADER+F+f+w,R=o.CENTRAL_FILE_HEADER+l(H,2)+F+l(x.length,2)+"\0\0\0\0"+l(P,4)+l(r,4)+f+w+x;return{fileRecord:O,dirRecord:R}},m=function(e,t,i,r,a){var s="",d=n.transformTo("string",a(r));return s=o.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(e,2)+l(e,2)+l(t,4)+l(i,4)+l(d.length,2)+d,s},h=function(e){var t="";return t=o.DATA_DESCRIPTOR+l(e.crc32,4)+l(e.compressedSize,4)+l(e.uncompressedSize,4),t};n.inherits(i,r),i.prototype.push=function(e){var t=e.meta.percent||0,i=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,r.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:i?(t+100*(i-n-1))/i:100}}))},i.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var i=p(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},i.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,i=p(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),t)this.push({data:h(e),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},i.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var i=this.bytesWritten-e,n=m(this.dirRecords.length,i,e,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},i.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},i.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(i){t.error(i)}),this},i.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},i.prototype.error=function(t){var e=this._sources;if(!r.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},i.prototype.lock=function(){r.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=i},{"../crc32":28,"../signature":47,"../stream/GenericWorker":52,"../utf8":55,"../utils":56}],33:[function(e,t,i){"use strict";var n=e("../compressions"),r=e("./ZipFileWorker"),a=function(e,t){var i=e||t,r=n[i];if(!r)throw new Error(i+" is not a valid compression method !");return r};i.generateWorker=function(e,t,i){var n=new r(t.streamFiles,i,t.platform,t.encodeFileName),s=0;try{e.forEach(function(e,i){s++;var r=a(i.options.compression,t.compression),o=i.options.compressionOptions||t.compressionOptions||{},l=i.dir,d=i.date;i._compressWorker(r,o).withStreamInfo("file",{name:e,dir:l,date:d,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(n)}),n.entriesCount=s}catch(t){n.error(t)}return n}},{"../compressions":27,"./ZipFileWorker":32}],34:[function(e,t){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}n.prototype=e("./object"),n.prototype.loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.2.0",n.loadAsync=function(e,t){return new n().loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":29,"./external":30,"./load":35,"./object":39,"./support":54}],35:[function(e,t){"use strict";function n(e){return new r.Promise(function(t,i){var n=e.decompressed.getContentWorker().pipe(new o);n.on("error",function(t){i(t)}).on("end",function(){n.streamInfo.crc32===e.decompressed.crc32?t():i(new Error("Corrupted zip : CRC32 mismatch"))}).resume()})}var i=e("./utils"),r=e("./external"),a=e("./utf8"),i=e("./utils"),s=e("./zipEntries"),o=e("./stream/Crc32Probe"),l=e("./nodejsUtils");t.exports=function(e,t){var o=this;return t=i.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(e)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var i=new s(t);return i.load(e),i}).then(function(e){var a=[r.Promise.resolve(e)],s=e.files;if(t.checkCRC32)for(var o=0;o<s.length;o++)a.push(n(s[o]));return r.Promise.all(a)}).then(function(e){for(var n=e.shift(),r=n.files,a=0,i;a<r.length;a++)i=r[a],o.file(i.fileNameStr,i.decompressed,{binary:!0,optimizedBinaryString:!0,date:i.date,dir:i.dir,comment:i.fileCommentStr.length?i.fileCommentStr:null,unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions,createFolders:t.createFolders});return n.zipComment.length&&(o.comment=n.zipComment),o})}},{"./external":30,"./nodejsUtils":38,"./stream/Crc32Probe":49,"./utf8":55,"./utils":56,"./zipEntries":57}],36:[function(e,t){"use strict";function i(e,t){r.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}var n=e("../utils"),r=e("../stream/GenericWorker");n.inherits(i,r),i.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(i){t.isPaused?this.generatedError=i:t.error(i)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},i.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=i},{"../stream/GenericWorker":52,"../utils":56}],37:[function(e,t){"use strict";function i(e,t,i){n.call(this,t),this._helper=e;var r=this;e.on("data",function(e,t){r.push(e)||r._helper.pause(),i&&i(t)}).on("error",function(t){r.emit("error",t)}).on("end",function(){r.push(null)})}var n=e("readable-stream").Readable,r=e("../utils");r.inherits(i,n),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":56,"readable-stream":40}],38:[function(e,t){(function(e){"use strict";t.exports={isNode:"undefined"!=typeof e,newBufferFrom:function(t,i){if(e.from&&e.from!==Uint8Array.from)return e.from(t,i);if("number"==typeof t)throw new Error("The \"data\" argument must not be a number");return new e(t,i)},allocBuffer:function(t){if(e.alloc)return e.alloc(t);var i=new e(t);return i.fill(0),i},isBuffer:function(t){return e.isBuffer(t)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(this,e("buffer").Buffer)},{buffer:7}],39:[function(e,t){"use strict";function i(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var n=e("./utf8"),r=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),l=e("./defaults"),d=e("./compressedObject"),u=e("./zipObject"),o=e("./generate"),p=e("./nodejsUtils"),c=e("./nodejs/NodejsStreamInputAdapter"),m=function(e,t,i){var n=r.getTypeOf(t),s=r.extend(i||{},l),o;s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=g(e)),s.createFolders&&(o=h(e))&&f.call(this,o,!0);var m="string"===n&&!1===s.binary&&!1===s.base64;i&&"undefined"!=typeof i.binary||(s.binary=!m);var y=t instanceof d&&0===t.uncompressedSize;(y||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",n="string");var b=null;b=t instanceof d||t instanceof a?t:p.isNode&&p.isStream(t)?new c(e,t):r.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var x=new u(e,b,s);this.files[e]=x},h=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},f=function(e,t){return t="undefined"==typeof t?l.createFolders:t,e=g(e),this.files[e]||m.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};t.exports={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,i,n;for(t in this.files)this.files.hasOwnProperty(t)&&(n=this.files[t],i=t.slice(this.root.length,t.length),i&&t.slice(0,this.root.length)===this.root&&e(i,n))},filter:function(e){var t=[];return this.forEach(function(i,n){e(i,n)&&t.push(n)}),t},file:function(e,t,n){if(1===arguments.length){if(i(e)){var r=e;return this.filter(function(e,t){return!t.dir&&r.test(e)})}var a=this.files[this.root+e];return a&&!a.dir?a:null}return e=this.root+e,m.call(this,e,t,n),this},folder:function(e){if(!e)return this;if(i(e))return this.filter(function(t,i){return i.dir&&e.test(t)});var t=this.root+e,n=f.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter(function(t,i){return i.name.slice(0,e.length)===e}),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t={},i;try{if(t=r.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode}),t.type=t.type.toLowerCase(),t.compression=t.compression.toUpperCase(),"binarystring"===t.type&&(t.type="string"),!t.type)throw new Error("No output type specified.");r.checkSupport(t.type),("darwin"===t.platform||"freebsd"===t.platform||"linux"===t.platform||"sunos"===t.platform)&&(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var l=t.comment||this.comment||"";i=o.generateWorker(this,t,l)}catch(t){i=new a("error"),i.error(t)}return new s(i,t.type||"string",t.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return e=e||{},e.type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}}},{"./compressedObject":26,"./defaults":29,"./generate":33,"./nodejs/NodejsStreamInputAdapter":36,"./nodejsUtils":38,"./stream/GenericWorker":52,"./stream/StreamHelper":53,"./utf8":55,"./utils":56,"./zipObject":59}],40:[function(e,t){"use strict";t.exports=e("stream")},{stream:194}],41:[function(e,t){"use strict";function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]&=255}var n=e("./DataReader"),r=e("../utils");r.inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),a=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===n&&this.data[s+2]===r&&this.data[s+3]===a)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1),n=e.charCodeAt(2),r=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&i===a[1]&&n===a[2]&&r===a[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":56,"./DataReader":42}],42:[function(e,t){"use strict";function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}var n=e("../utils");i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||0>e)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t=0,n;for(this.checkOffset(e),n=this.index+e-1;n>=this.index;n--)t=(t<<8)+this.byteAt(n);return this.index+=e,t},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC((127&e>>25)+1980,(15&e>>21)-1,31&e>>16,31&e>>11,63&e>>5,(31&e)<<1))}},t.exports=i},{"../utils":56}],43:[function(e,t){"use strict";function i(e){n.call(this,e)}var n=e("./Uint8ArrayReader"),r=e("../utils");r.inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":56,"./Uint8ArrayReader":45}],44:[function(e,t){"use strict";function i(e){n.call(this,e)}var n=e("./DataReader"),r=e("../utils");r.inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){var t=this.readData(4);return e===t},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":56,"./DataReader":42}],45:[function(e,t){"use strict";function i(e){n.call(this,e)}var n=e("./ArrayReader"),r=e("../utils");r.inherits(i,n),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":56,"./ArrayReader":41}],46:[function(e,t){"use strict";var i=e("../utils"),n=e("../support"),r=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),o=e("./Uint8ArrayReader");t.exports=function(e){var t=i.getTypeOf(e);return i.checkSupport(t),"string"!==t||n.uint8array?"nodebuffer"===t?new s(e):n.uint8array?new o(i.transformTo("uint8array",e)):new r(i.transformTo("array",e)):new a(e)}},{"../support":54,"../utils":56,"./ArrayReader":41,"./NodeBufferReader":43,"./StringReader":44,"./Uint8ArrayReader":45}],47:[function(e,t,i){"use strict";i.LOCAL_FILE_HEADER="PK\x03\x04",i.CENTRAL_FILE_HEADER="PK\x01\x02",i.CENTRAL_DIRECTORY_END="PK\x05\x06",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",i.DATA_DESCRIPTOR="PK\x07\b"},{}],48:[function(e,t){"use strict";function i(e){n.call(this,"ConvertWorker to "+e),this.destType=e}var n=e("./GenericWorker"),r=e("../utils");r.inherits(i,n),i.prototype.processChunk=function(e){this.push({data:r.transformTo(this.destType,e.data),meta:e.meta})},t.exports=i},{"../utils":56,"./GenericWorker":52}],49:[function(e,t){"use strict";function i(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}var n=e("./GenericWorker"),r=e("../crc32"),a=e("../utils");a.inherits(i,n),i.prototype.processChunk=function(e){this.streamInfo.crc32=r(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=i},{"../crc32":28,"../utils":56,"./GenericWorker":52}],50:[function(e,t){"use strict";function i(e){r.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}var n=e("../utils"),r=e("./GenericWorker");n.inherits(i,r),i.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}r.prototype.processChunk.call(this,e)},t.exports=i},{"../utils":56,"./GenericWorker":52}],51:[function(e,t){"use strict";function i(e){r.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(i){t.error(i)})}var n=e("../utils"),r=e("./GenericWorker");n.inherits(i,r),i.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1;this.isPaused||this.isFinished||(this._tick(),!this.isFinished&&(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=w(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t);}return this.index=t,this.push({data:e,meta:{percent:this.max?100*(this.index/this.max):0}})},t.exports=i},{"../utils":56,"./GenericWorker":52}],52:[function(e,t){"use strict";function i(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(i){t.error(i)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=i},{}],53:[function(e,t){(function(n){"use strict";function i(e,t,i){return"blob"===e?o.newBlob(o.transformTo("arraybuffer",t),i):"base64"===e?u.encode(t):o.transformTo(e,t)}function r(e,t){var r=0,a=null,s=0,o;for(o=0;o<t.length;o++)s+=t[o].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(a=new Uint8Array(s),o=0;o<t.length;o++)a.set(t[o],r),r+=t[o].length;return a;case"nodebuffer":return n.concat(t);default:throw new Error("concat : unsupported type '"+e+"'");}}function a(e,t){return new c.Promise(function(n,a){var s=[],o=e._internalType,l=e._outputType,d=e._mimeType;e.on("data",function(e,i){s.push(e),t&&t(i)}).on("error",function(e){s=[],a(e)}).on("end",function(){try{var e=i(l,r(o,s),d);n(e)}catch(t){a(t)}s=[]}).resume()})}function s(e,t,i){var n=t;"blob"===t||"arraybuffer"===t?n="uint8array":"base64"===t?n="string":void 0;try{this._internalType=n,this._outputType=t,this._mimeType=i,o.checkSupport(n),this._worker=e.pipe(new l(n)),e.lock()}catch(t){this._worker=new d("error"),this._worker.error(t)}}var o=e("../utils"),l=e("./ConvertWorker"),d=e("./GenericWorker"),u=e("../base64"),p=e("../support"),c=e("../external"),m=null;if(p.nodestream)try{m=e("../nodejs/NodejsStreamOutputAdapter")}catch(t){}s.prototype={accumulate:function(e){return a(this,e)},on:function(e,t){var i=this;return"data"===e?this._worker.on(e,function(e){t.call(i,e.data,e.meta)}):this._worker.on(e,function(){o.delay(t,arguments,i)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(o.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=s}).call(this,e("buffer").Buffer)},{"../base64":25,"../external":30,"../nodejs/NodejsStreamOutputAdapter":37,"../support":54,"../utils":56,"./ConvertWorker":48,"./GenericWorker":52,buffer:7}],54:[function(e,t,i){(function(t){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof t,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var r=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,a=new r;a.append(n),i.blob=0===a.getBlob("application/zip").size}catch(t){i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch(t){i.nodestream=!1}}).call(this,e("buffer").Buffer)},{buffer:7,"readable-stream":40}],55:[function(e,t,n){"use strict";function r(){d.call(this,"utf-8 decode"),this.leftOver=null}function a(){d.call(this,"utf-8 encode")}for(var s=e("./utils"),o=e("./support"),l=e("./nodejsUtils"),d=e("./stream/GenericWorker"),u=Array(256),p=0;256>p;p++)u[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;u[254]=u[254]=1;var i=function(e){var t=e.length,n=0,r,a,s,l,d;for(l=0;l<t;l++)a=e.charCodeAt(l),55296==(64512&a)&&l+1<t&&(s=e.charCodeAt(l+1),56320==(64512&s)&&(a=65536+(a-55296<<10)+(s-56320),l++)),n+=128>a?1:2048>a?2:65536>a?3:4;for(r=o.uint8array?new Uint8Array(n):Array(n),d=0,l=0;d<n;l++)a=e.charCodeAt(l),55296==(64512&a)&&l+1<t&&(s=e.charCodeAt(l+1),56320==(64512&s)&&(a=65536+(a-55296<<10)+(s-56320),l++)),128>a?r[d++]=a:2048>a?(r[d++]=192|a>>>6,r[d++]=128|63&a):65536>a?(r[d++]=224|a>>>12,r[d++]=128|63&a>>>6,r[d++]=128|63&a):(r[d++]=240|a>>>18,r[d++]=128|63&a>>>12,r[d++]=128|63&a>>>6,r[d++]=128|63&a);return r},c=function(e,t){var i;for(t=t||e.length,t>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return 0>i?t:0===i?t:i+u[e[i]]>t?i:t},m=function(e){var t=e.length,n=Array(2*t),r,i,a,o;for(i=0,r=0;r<t;){if(a=e[r++],128>a){n[i++]=a;continue}if(o=u[a],4<o){n[i++]=65533,r+=o-1;continue}for(a&=2===o?31:3===o?15:7;1<o&&r<t;)a=a<<6|63&e[r++],o--;if(1<o){n[i++]=65533;continue}65536>a?n[i++]=a:(a-=65536,n[i++]=55296|1023&a>>10,n[i++]=56320|1023&a)}return n.length!==i&&(n.subarray?n=n.subarray(0,i):n.length=i),s.applyFromCharCode(n)};n.utf8encode=function(e){return o.nodebuffer?l.newBufferFrom(e,"utf-8"):i(e)},n.utf8decode=function(e){return o.nodebuffer?s.transformTo("nodebuffer",e).toString("utf-8"):(e=s.transformTo(o.uint8array?"uint8array":"array",e),m(e))},s.inherits(r,d),r.prototype.processChunk=function(e){var t=s.transformTo(o.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var i=t;t=new Uint8Array(i.length+this.leftOver.length),t.set(this.leftOver,0),t.set(i,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var r=c(t),a=t;r!==t.length&&(o.uint8array?(a=t.subarray(0,r),this.leftOver=t.subarray(r,t.length)):(a=t.slice(0,r),this.leftOver=t.slice(r,t.length))),this.push({data:n.utf8decode(a),meta:e.meta})},r.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=r,s.inherits(a,d),a.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=a},{"./nodejsUtils":38,"./stream/GenericWorker":52,"./support":54,"./utils":56}],56:[function(e,t,i){"use strict";function n(e){var t=null;return t=l.uint8array?new Uint8Array(e.length):Array(e.length),a(e,t)}function r(e){return e}function a(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}function s(e){var t=65536,n=i.getTypeOf(e),r=!0;if("uint8array"===n?r=g.applyCanBeUsed.uint8array:"nodebuffer"===n&&(r=g.applyCanBeUsed.nodebuffer),r)for(;1<t;)try{return g.stringifyByChunk(e,n,t)}catch(i){t=p(t/2)}return g.stringifyByChar(e)}function o(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}var l=e("./support"),d=e("./base64"),u=e("./nodejsUtils"),m=e("set-immediate-shim"),h=e("./external");i.newBlob=function(e,t){i.checkSupport("blob");try{return new Blob([e],{type:t})}catch(i){try{var n=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,r=new n;return r.append(e),r.getBlob(t)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(e,t,i){var n=[],r=0,a=e.length;if(a<=i)return c.apply(null,e);for(;r<a;)"array"===t||"nodebuffer"===t?n.push(c.apply(null,e.slice(r,w(r+i,a)))):n.push(c.apply(null,e.subarray(r,w(r+i,a)))),r+=i;return n.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=c(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&1===c.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&1===c.apply(null,u.allocBuffer(1)).length}catch(t){return!1}}()}};i.applyFromCharCode=s;var f={};f.string={string:r,array:function(e){return a(e,Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return a(e,new Uint8Array(e.length))},nodebuffer:function(e){return a(e,u.allocBuffer(e.length))}},f.array={string:s,array:r,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u.newBufferFrom(e)}},f.arraybuffer={string:function(e){return s(new Uint8Array(e))},array:function(e){return o(new Uint8Array(e),Array(e.byteLength))},arraybuffer:r,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:s,array:function(e){return o(e,Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:r,nodebuffer:function(e){return u.newBufferFrom(e)}},f.nodebuffer={string:s,array:function(e){return o(e,Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return o(e,new Uint8Array(e.length))},nodebuffer:r},i.transformTo=function(e,t){if(t||(t=""),!e)return t;i.checkSupport(e);var n=i.getTypeOf(t),r=f[n][e](t);return r},i.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":l.nodebuffer&&u.isBuffer(e)?"nodebuffer":l.uint8array&&e instanceof Uint8Array?"uint8array":l.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(e){var t=l[e.toLowerCase()];if(!t)throw new Error(e+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(e){var t="",n,r;for(r=0;r<(e||"").length;r++)n=e.charCodeAt(r),t+="\\x"+(16>n?"0":"")+n.toString(16).toUpperCase();return t},i.delay=function(e,t,i){m(function(){e.apply(i||null,t||[])})},i.inherits=function(e,t){var i=function(){};i.prototype=t.prototype,e.prototype=new i},i.extend=function(){var e={},t,i;for(t=0;t<arguments.length;t++)for(i in arguments[t])arguments[t].hasOwnProperty(i)&&"undefined"==typeof e[i]&&(e[i]=arguments[t][i]);return e},i.prepareContent=function(e,t,r,a,s){var o=h.Promise.resolve(t).then(function(e){var t=l.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)));return t&&"undefined"!=typeof FileReader?new h.Promise(function(t,i){var n=new FileReader;n.onload=function(i){t(i.target.result)},n.onerror=function(t){i(t.target.error)},n.readAsArrayBuffer(e)}):e});return o.then(function(t){var o=i.getTypeOf(t);return o?("arraybuffer"===o?t=i.transformTo("uint8array",t):"string"===o&&(s?t=d.decode(t):r&&!0!==a&&(t=n(t))),t):h.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":25,"./external":30,"./nodejsUtils":38,"./support":54,"set-immediate-shim":187}],57:[function(e,t){"use strict";function i(e){this.files=[],this.loadOptions=e}var n=e("./reader/readerFor"),r=e("./utils"),a=e("./signature"),s=e("./zipEntry"),o=e("./utf8"),l=e("./support");i.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(t)+", expected "+r.pretty(e)+")")}},isSignature:function(e,t){var i=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4);return this.reader.setIndex(i),n===t},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=l.uint8array?"uint8array":"array",i=r.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e=this.zip64EndOfCentralSize-44,t,i,n;0<e;)t=this.reader.readInt(2),i=this.reader.readInt(4),n=this.reader.readData(i),this.zip64ExtensibleData[t]={id:t,length:i,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)e=new s({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length)if(0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length);else;},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(0>e){var t=!this.isSignature(0,a.LOCAL_FILE_HEADER);if(t)throw new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");else throw new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(e);var i=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),0>e)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),0>this.relativeOffsetEndOfZip64CentralDir))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var s=i-n;if(0<s)this.isSignature(i,a.CENTRAL_FILE_HEADER)||(this.reader.zero=s);else if(0>s)throw new Error("Corrupted zip: missing "+_(s)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=i},{"./reader/readerFor":46,"./signature":47,"./support":54,"./utf8":55,"./utils":56,"./zipEntry":58}],58:[function(e,t){"use strict";function i(e,t){this.options=e,this.loadOptions=t}var n=e("./reader/readerFor"),r=e("./utils"),a=e("./compressedObject"),s=e("./crc32"),o=e("./utf8"),l=e("./compressions"),d=e("./support"),u=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null};i.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,i;if(e.skip(22),this.fileNameLength=e.readInt(2),i=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(i),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(t=u(this.compressionMethod),null===t)throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),e==0&&(this.dosPermissions=63&this.externalFileAttributes),e==3&&(this.unixPermissions=65535&this.externalFileAttributes>>16),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t=e.index+this.extraFieldsLength,i,n,r;for(this.extraFields||(this.extraFields={});e.index<t;)i=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[i]={id:i,length:n,value:r}},handleUTF8:function(){var e=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var i=r.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var a=r.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1===t.readInt(1)?s(this.fileName)===t.readInt(4)?o.utf8decode(t.readData(e.length-5)):null:null}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1===t.readInt(1)?s(this.fileComment)===t.readInt(4)?o.utf8decode(t.readData(e.length-5)):null:null}return null}},t.exports=i},{"./compressedObject":26,"./compressions":27,"./crc32":28,"./reader/readerFor":46,"./support":54,"./utf8":55,"./utils":56}],59:[function(e,t){"use strict";var n=e("./stream/StreamHelper"),r=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),o=e("./stream/GenericWorker"),l=function(e,t,i){this.name=e,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=t,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}};l.prototype={internalStream:function(e){var t=null,i="string";try{if(!e)throw new Error("No output type specified.");i=e.toLowerCase();var r="string"===i||"text"===i;("binarystring"===i||"text"===i)&&(i="string"),t=this._decompressWorker();var s=!this._dataBinary;s&&!r&&(t=t.pipe(new a.Utf8EncodeWorker)),!s&&r&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(i){t=new o("error"),t.error(i)}return new n(t,i,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(i,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof o?this._data:new r(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<d.length;p++)l.prototype[d[p]]=u;t.exports=l},{"./compressedObject":26,"./stream/DataWorker":51,"./stream/GenericWorker":52,"./stream/StreamHelper":53,"./utf8":55}],60:[function(e,t){"use strict";function n(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,e!==n&&o(this,e)}function r(e,t,i){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function a(t,e,i){d(function(){var n;try{n=e(i)}catch(i){return u.reject(t,i)}n===t?u.reject(t,new TypeError("Cannot resolve promise with itself")):u.resolve(t,n)})}function s(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function o(e,t){function i(t){r||(r=!0,u.reject(e,t))}function n(t){r||(r=!0,u.resolve(e,t))}var r=!1,a=l(function(){t(n,i)});"error"===a.status&&i(a.value)}function l(e,t){var i={};try{i.value=e(t),i.status="success"}catch(t){i.status="error",i.value=t}return i}var d=e("immediate"),u={},p=["REJECTED"],c=["FULFILLED"],m=["PENDING"];t.exports=i,i.prototype["finally"]=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(i){return t.resolve(e()).then(function(){return i})},function(i){return t.resolve(e()).then(function(){throw i})})},i.prototype["catch"]=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===c||"function"!=typeof t&&this.state===p)return this;var i=new this.constructor(n);if(this.state!==m){var s=this.state===c?e:t;a(i,s,this.outcome)}else this.queue.push(new r(i,e,t));return i},r.prototype.callFulfilled=function(e){u.resolve(this.promise,e)},r.prototype.otherCallFulfilled=function(e){a(this.promise,this.onFulfilled,e)},r.prototype.callRejected=function(e){u.reject(this.promise,e)},r.prototype.otherCallRejected=function(e){a(this.promise,this.onRejected,e)},u.resolve=function(e,t){var n=l(s,t);if("error"===n.status)return u.reject(e,n.value);var r=n.value;if(r)o(e,r);else{e.state=c,e.outcome=t;for(var a=-1,i=e.queue.length;++a<i;)e.queue[a].callFulfilled(t)}return e},u.reject=function(e,t){e.state=p,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callRejected(t);return e},i.resolve=function(e){return e instanceof this?e:u.resolve(new this(n),e)},i.reject=function(e){var t=new this(n);return u.reject(t,e)},i.all=function(e){function t(e,t){r.resolve(e).then(function(e){o[t]=e,++l!==a||s||(s=!0,u.resolve(p,o))},function(e){s||(s=!0,u.reject(p,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var a=e.length,s=!1;if(!a)return this.resolve([]);for(var o=Array(a),l=0,d=-1,p=new this(n);++d<a;)t(e[d],d);return p},i.race=function(e){function t(e){r.resolve(e).then(function(e){s||(s=!0,u.resolve(i,e))},function(e){s||(s=!0,u.reject(i,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var a=e.length,s=!1;if(!a)return this.resolve([]);for(var o=-1,i=new this(n);++o<a;)t(e[o]);return i}},{immediate:18}],61:[function(e,t){(function(e){"use strict";function i(e){if("string"==typeof e)return e;if(a(e))return E?E.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function r(e){return!!e&&"object"==typeof e}function a(e){return"symbol"==typeof e||r(e)&&v.call(e)==m}function s(e){if(!e)return 0===e?e:0;if(e=l(e),e===u||e===-u){var t=0>e?-1:1;return t*p}return e===e?e:0}function o(e){var t=s(e),i=t%1;return t===t?i?t-i:t:0}function l(e){if("number"==typeof e)return e;if(a(e))return c;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(h,"");var i=f.test(e);return i||y.test(e)?b(e.slice(2),i?2:8):g.test(e)?c:+e}function d(e){return null==e?"":i(e)}var u=1/0,p=1.7976931348623157e308,c=0/0,m="[object Symbol]",h=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,y=/^0o[0-7]+$/i,b=parseInt,x="object"==typeof e&&e&&e.Object===Object&&e,_="object"==typeof self&&self&&self.Object===Object&&self,k=x||_||Function("return this")(),C=Object.prototype,v=C.toString,S=k.Symbol,j=S?S.prototype:void 0,E=j?j.toString:void 0,D=function(e){var t=Math[e];return function(e,i){if(e=l(e),i=w(o(i),292),i){var n=(d(e)+"e").split("e"),r=t(n[0]+"e"+(+n[1]+i));return n=(d(r)+"e").split("e"),+(n[0]+"e"+(+n[1]-i))}return t(e)}}("round");t.exports=D}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],62:[function(e,t){(function(){function e(t){for(var a=0,s=t.length-1,e=void 0,o=void 0,l=void 0,u=r(a,s);;){if(s<=a)return t[u];if(s==a+1)return t[a]>t[s]&&n(t,a,s),t[u];for(e=r(a,s),t[e]>t[s]&&n(t,e,s),t[a]>t[s]&&n(t,a,s),t[e]>t[a]&&n(t,e,a),n(t,e,a+1),o=a+1,l=s;;){do o++;while(t[a]>t[o]);do l--;while(t[l]>t[a]);if(l<o)break;n(t,o,l)}n(t,a,l),l<=u&&(a=o),l>=u&&(s=l-1)}}var n=function(e,t,i){var n;return n=[e[i],e[t]],e[t]=n[0],e[i]=n[1],n},r=function(e,t){return~~((e+t)/2)};"undefined"!=typeof t&&t.exports?t.exports=e:window.median=e})()},{}],63:[function(e,t){"use strict";var n=function(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}(e("is-any-array"));t.exports=function(e){if(!n(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");for(var t=e[0],r=1;r<e.length;r++)e[r]>t&&(t=e[r]);return t}},{"is-any-array":21}],64:[function(e,t){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}var n=i(e("median-quickselect")),r=i(e("is-any-array"));t.exports=function(e){if(!r(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");return n(e.slice())}},{"is-any-array":21,"median-quickselect":62}],65:[function(e,t){"use strict";var n=function(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}(e("is-any-array"));t.exports=function(e){if(!n(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");for(var t=e[0],r=1;r<e.length;r++)e[r]<t&&(t=e[r]);return t}},{"is-any-array":21}],66:[function(e,t){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}var n=i(e("ml-array-max")),r=i(e("ml-array-min")),a=i(e("is-any-array"));t.exports=function(e,t={}){if(!a(e))throw new TypeError("input must be an array");else if(0===e.length)throw new TypeError("input must not be empty");var s;if(t.output!==void 0){if(!a(t.output))throw new TypeError("output option must be an array if specified");s=t.output}else s=Array(e.length);var o=r(e),l=n(e);if(o===l)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var d=t.min,u=d===void 0?t.autoMinMax?o:0:d,p=t.max,c=p===void 0?t.autoMinMax?l:1:p;if(u>=c)throw new RangeError("min option must be smaller than max option");for(var m=0;m<e.length;m++)s[m]=(e[m]-o)*((c-u)/(l-o))+u;return s}},{"is-any-array":21,"ml-array-max":63,"ml-array-min":65}],67:[function(e,t){"use strict";function i(e){for(var t=Array(e[0].length),n=0;n<t.length;++n)t[n]=Array(e.length);for(n=0;n<e.length;++n)for(var i=0;i<e[0].length;++i)t[i][n]=e[n][i];return t}function n(e,t={}){var a=t.min,s=t.max,o=t.inPlace?e:Array(e.length),l=r.minMax(e);if("number"==typeof s){if("number"==typeof a)for(var d=(s-a)/(l.max-l.min),u=0;u<o.length;u++)o[u]=(e[u]-l.min)*d+a;else if(0!==l.max)for(var i=s/l.max,p=0;p<o.length;p++)o[p]=e[p]*i;else t.min=l.min,o=n(e,t);}else if("number"==typeof a)if(0!==l.min)for(var c=a/l.min,m=0;m<o.length;m++)o[m]=e[m]*c;else t.max=l.max,o=n(e,t);return o}var r=e("ml-stat").array;t.exports={coordArrayToPoints:function(e,t){if(0!=e.length%t)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var n=e.length/t,r=Array(n),a=0,s=0,i;s<e.length;s+=t){i=Array(t);for(var o=0;o<t;++o)i[o]=e[s+o];r[a]=i,a++}return r},coordArrayToCoordMatrix:function(e,t){if(0!=e.length%t)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var n=Array(t),r=e.length/t,a=0;a<n.length;a++)n[a]=Array(r);for(a=0;a<e.length;a+=t)for(var i=0,s;i<t;++i)s=p(a/t),n[i][s]=e[a+i];return n},coordMatrixToCoordArray:function(e){for(var t=Array(e.length*e[0].length),n=0,r=0;r<e[0].length;++r)for(var i=0;i<e.length;++i)t[n]=e[i][r],++n;return t},coordMatrixToPoints:i,pointsToCoordArray:function(e){for(var t=Array(e.length*e[0].length),n=0,r=0;r<e.length;++r)for(var i=0;i<e[0].length;++i)t[n]=e[r][i],++n;return t},pointsToCoordMatrix:i,applyDotProduct:function(e,t){var n,r;e.length<=t.length?(r=e,n=t):(r=t,n=e);for(var a=n.length-r.length+1,s=Array(a),o=0,i;o<a;++o){i=0;for(var l=0;l<r.length;++l)i+=r[l]*n[o+l];s[o]=i}return s},scale:n}},{"ml-stat":127}],68:[function(e,t,i){"use strict";function n(e,t,n,r,s){function o(e,t,i,n){return(n-t)/(i-e)}var d=e.length,u=(r-n)/(s-1),p=u/2,c=Array(s),m=e[1]-e[0],h=e[d-1]-e[d-2],g=n-p,f=n+p,y=l,b=0,x=e[0]-m,_=0,k=0,C=0,w=0,v=0,S=0,E=0,i=0;main:for(;;){for(y<=g&&g<=x&&(j=a(0,g-y,C,b),v=k+j);0<=x-f;){var j=a(0,f-y,C,b);if(S=k+j,c[i++]=(S-v)/u,i===s)break main;g=f,f+=u,v=S}k+=a(y,x,C,w),y=x,b=_,E<d?(x=e[E],_=t[E],E++):E===d&&(x+=h,_=0),C=o(y,b,x,_),w=-C*y+b}return c}function r(e,t,n,r,a){var o=e.length,l=(r-n)/(a-1),d=e[e.length-1]-e[e.length-2],u=n-l/2,p=Array(a),c=u,m=u+l,h=-s,g=0,f=e[0],y=t[0],b=0,x=!0,_=0,k=0,C=1,i=0;main:for(;;){if(h>=f)throw new Error("x must be an increasing serie");for(;0<h-m;){if(x&&(k++,x=!1),p[i]=0>=k?0:_/k,i++,i===a)break main;c=m,m+=l,_=0,k=0}h>c&&(_+=g,k++),(h==-s||1<b)&&k--,h=f,g=y,C<o?(f=e[C],y=t[C],C++):(f+=d,y=0,b++)}return p}function a(e,t,i,n){return 0.5*i*t*t+n*t-(0.5*i*e*e+n*e)}i.getEquallySpacedData=function(e,t,i={}){var a=e.length;1<e.length&&e[0]>e[1]&&(e=e.slice().reverse(),t=t.slice().reverse());var s=i.from,o=s===void 0?e[0]:s,l=i.to,d=l===void 0?e[a-1]:l,u=i.variant,p=u===void 0?"smooth":u,c=i.numberOfPoints,m=c===void 0?100:c;if(a!==t.length)throw new RangeError("the x and y vector doesn't have the same size.");if("number"!=typeof o||isNaN(o))throw new RangeError("'from' option must be a number");if("number"!=typeof d||isNaN(d))throw new RangeError("'to' option must be a number");var h=o>d;if(h){var g=[d,o];o=g[0],d=g[1]}if("number"!=typeof m||isNaN(m))throw new RangeError("'numberOfPoints' option must be a number");if(1>m)throw new RangeError("the number of points must be at least 1");var f="slot"===p?r(e,t,o,d,m):n(e,t,o,d,m);return h?f.reverse():f},i.integral=a},{}],69:[function(e,t,i){"use strict";t.exports=i=e("./ArrayUtils"),i.getEquallySpacedData=e("./getEquallySpaced").getEquallySpacedData,i.SNV=e("./snv").SNV},{"./ArrayUtils":67,"./getEquallySpaced":68,"./snv":70}],70:[function(e,t,i){"use strict";i.SNV=function(e){for(var t=n.mean(e),r=n.standardDeviation(e),a=e.slice(),s=0;s<e.length;s++)a[s]=(a[s]-t)/r;return a};var n=e("ml-stat").array},{"ml-stat":127}],71:[function(e,t){"use strict";var r=e("ml-matrix"),a=e("./algebra");t.exports={optimize:function(e,n,s,t,l,d,u,m,g,c){var f=0;if("object"!=typeof n[0])for(var y=0;y<n.length;y++)n[y]=[n[y]];var i=-50,b=n.length,x=t.length,v=r.zeros(b,1),S=r.zeros(x,1),j=0.01/i,E=0.01/i,D=r.zeros(x,b),y,A;if(s.length!=t.length){console.log("lm.m error: the length of t must equal the length of y_dat"),length_t=s.length,length_y_dat=t.length;var j=0;return}l=l||o((x-b+1)/a.multiply(a.transpose(t),t)),d=d||1e-3,u=u||a.multiply(_(n),-100),m=m||a.multiply(_(n),100),g=g||1,c=c||[3,10*b,1e-3,1e-3,1e-3,0.01,0.01,11,9,1];var k=c[0],T=c[1],I=c[2],P=c[3],H=c[4],F=c[5],O=c[6],R=c[7],z=c[8],N=c[9];if(0,!d.length||1==d.length){for(var L=Array(b),y=0;y<b;y++)L[y]=[d];d=L}var M=[];for(y=0;y<d.length;y++)0!=d[y][0]&&M.push(y);var X=M.length,U=!1,B=null;if(!l.length||l.length<x){var Y=a.multiply(r.ones(x,1),l[0]);B=a.dotMultiply(Y,Y)}else B=a.dotMultiply(l,l);var q=this.lm_matx(e,s,v,S,1,D,n,t,B,d,g),W=q.JtWJ,V=q.JtWdy,j=q.Chi_sq,Z=q.y_hat,D=q.J;C(_(V))<I&&(console.log(" *** Your Initial Guess is Extremely Close to Optimal ***"),console.log(" *** epsilon_1 = ",I),U=!0),1===N?lambda=O:(lambda=O*C(a.diag(W)),nu=2),E=j;for(var $=null;!U&&f<=T;){++f,$=1===N?a.solve(a.add(W,a.multiply(a.diag(a.diag(W)),lambda)),V):a.solve(a.add(W,a.multiply(r.eye(b),lambda)),V);var h=Array(M.length);for(A=0;A<M.length;A++)h[A]=$[M[A]];var G=a.add(n,h);for(A=0;A<G.length;A++)G[A][0]=w(C(u[A][0],G[A][0]),m[A][0]);var J=a.subtract(t,e(s,G,g)),K=a.multiply(a.transpose(J),a.dotMultiply(J,B));if(2==N){var Q=a.multiply(a.transpose(V),$),ee=a.multiply(Q,a.inv(a.add(a.multiply(a.subtract(K-j),1/2)),a.multiply(Q,2)));$=a.multiply(ee,$);for(var A=0;A<M.length;A++)h[A]=$[M[A]];G=a.add(n,h),G=a.min(a.max(u,G),m),J=a.subtract(t,e(s,G,g)),K=a.multiply(a.transpose(J),mat.dotMultiply(J,B))}var te=(j-K)/a.multiply(a.multiply(a.transpose($),2),a.add(a.multiply(lambda,$),V));te>F?(dX2=j-E,E=j,v=n,S=Z,n=G,q=this.lm_matx(e,s,v,S,dX2,D,n,t,B,d,g),W=q.JtWJ,V=q.JtWdy,j=q.Chi_sq,Z=q.y_hat,D=q.J,1===N?lambda=C(lambda/z,1e-7):2===N?lambda=C(lambda/(1+ee),1e-7):3===N?(lambda=a.multiply(C(1/3,3^1-(2*te-1)),lambda),nu=2):void 0):(j=E,0==f%(2*b)&&(q=this.lm_matx(e,s,v,S,-1,D,n,t,B,d,g),W=q.JtWJ,V=q.JtWdy,dX2=q.Chi_sq,Z=q.y_hat,D=q.J),1===N?lambda=w(lambda*R,1e7):2===N?lambda+=_((K-j)/2/ee):3===N?(lambda*=nu,nu=2*nu):void 0)}return B=a.multiply(a.multiply(a.transpose(J),J),r.ones(x,1)),B.apply(function(e,t){B[e][t]=(x-X+1)/B[e][t]}),q=this.lm_matx(e,s,v,S,-1,D,n,t,B,d,g),W=q.JtWJ,V=q.JtWdy,j=q.Chi_sq,Z=q.y_hat,D=q.J,{p:n,X2:j}},lm_FD_J:function(e,i,t,s,o,l){var d=s.length,u=t.length;o=o||a.multiply(r.ones(u,1),1e-3);for(var n=t.clone(),p=new r(d,u),c=Array(u),m=0;m<u;m++){if(c[m]=o[m]*(1+_(t[m][0])),t[m]=[n[m][0]+c[m]],0!=c[m])if(y1=e(i,t,l),0>o[m][0])for(var h=a.dotDivide(a.subtract(y1,s),c[m]),g=0;g<d;g++)p[g][m]=h[g][0];else{t[m][0]=n[m][0]-c[m];for(var h=a.dotDivide(a.subtract(y1,e(i,t,l)),2*c[m]),g=0;g<d;g++)p[g][m]=h[g][0]}t[m]=n[m]}return p},lm_Broyden_J:function(e,t,i,n,r){var s=a.subtract(n,e),o=a.transpose(s);return o.div(a.multiply(o,s)),i=a.add(i,a.multiply(a.subtract(r,a.add(t,a.multiply(i,s))),o)),i},lm_matx:function(e,i,t,n,s,o,l,d,u,p,m,c){var h=d.length,g=l.length;p=p||1e-3;var f=e(i,l,m);o=0==c%(2*g)||0<s?this.lm_FD_J(e,i,l,f,p,m):this.lm_Broyden_J(t,n,o,l,f);var y=a.subtract(d,f),b=a.multiply(a.transpose(y),a.dotMultiply(y,u)),x=a.transpose(o),_=a.multiply(x,a.dotMultiply(o,a.multiply(u,r.ones(1,g)))),k=a.multiply(x,a.dotMultiply(u,y));return{JtWJ:_,JtWdy:k,Chi_sq:b,y_hat:f,J:o}}}},{"./algebra":72,"ml-matrix":110}],72:[function(e,t){"use strict";var n=e("ml-matrix");t.exports={transpose:function(e){if("number"==typeof e)return e;var t=e.clone();return t.transpose()},add:function(e,t){if("number"==typeof e&&"number"==typeof t)return e+t;if("number"==typeof e)return this.add(t,e);var i=e.clone();return i.add(t)},subtract:function(e,t){if("number"==typeof e&&"number"==typeof t)return e-t;if("number"==typeof e)return this.subtract(t,e);var i=e.clone();return i.sub(t)},multiply:function(e,t){if("number"==typeof e&&"number"==typeof t)return e*t;if("number"==typeof e)return this.multiply(t,e);var i=e.clone();return"number"==typeof t?i.mul(t):i=i.mmul(t),1==i.rows&&1==i.columns?i[0][0]:i},dotMultiply:function(e,t){var i=e.clone();return i.mul(t)},dotDivide:function(e,t){var i=e.clone();return i.div(t)},diag:function(e){var t=null,i=e.rows,a=e.columns,s,o;if("undefined"==typeof a&&"object"==typeof e)if(e[0]&&e[0].length)for(i=e.length,a=e[0].length,o=w(i,a),t=n.zeros(a,a),s=0;s<a;s++)t[s][s]=e[s][s];else for(a=e.length,t=n.zeros(a,a),s=0;s<a;s++)t[s][s]=e[s];if(1==i)for(t=n.zeros(a,a),s=0;s<a;s++)t[s][s]=e[0][s];else if(0<i&&0<a)for(o=w(i,a),t=Array(o),s=0;s<o;s++)t[s]=e[s][s];return t},min:function(e,t){if("number"==typeof e&&"number"==typeof t)return w(e,t);for(var r=e.rows,a=e.columns,s=new n(r,a),o=0;o<r;o++)for(var i=0;i<a;i++)s[o][i]=e[o][i]<t[o][i]?e[o][i]:t[o][i];return s},max:function(e,t){if("number"==typeof e&&"number"==typeof t)return C(e,t);for(var r=e.rows,a=e.columns,s=new n(r,a),o=0;o<r;o++)for(var i=0;i<a;i++)s[o][i]=e[o][i]>t[o][i]?e[o][i]:t[o][i];return s},solve:function(e,t){return e.solve(t)},inv:function(e){return"number"==typeof e?1/e:e.inverse()},sqrt:function(e){if("number"==typeof e)return o(e);for(var t=e.rows,r=e.columns,a=new n(t,r),s=0;s<t;s++)for(var i=0;i<r;i++)a[s][i]=o(e[s][i]);return a},exp:function(e){if("number"==typeof e)return o(e);for(var t=e.rows,r=e.columns,a=new n(t,r),s=0;s<t;s++)for(var i=0;i<r;i++)a[s][i]=d(e[s][i]);return a},dotPow:function(e,t){if("number"==typeof e)return f(e,t);for(var r=e.rows,a=e.columns,s=new n(r,a),o=0;o<r;o++)for(var i=0;i<a;i++)s[o][i]=f(e[o][i],t);return s},abs:function(e){if("number"==typeof e)return _(e);for(var t=e.rows,r=e.columns,a=new n(t,r),s=0;s<t;s++)for(var i=0;i<r;i++)a[s][i]=_(e[s][i]);return a},matrix:function(e,t){return new n(e,t)},ones:function(e,t){return n.ones(e,t)},zeros:function(e,t){return n.zeros(e,t)},random:function(e,t){return n.rand(e,t)},eye:function(e,t){return n.eye(e,t)}}},{"ml-matrix":110}],73:[function(e,t){"use strict";t.exports=e("./LM"),t.exports.Matrix=e("ml-matrix"),t.exports.Matrix.algebra=e("./algebra")},{"./LM":71,"./algebra":72,"ml-matrix":110}],74:[function(e,t){"use strict";function i(e){this.value=e,this.parent=null,this.rank=0}t.exports=class{constructor(){this.nodes=new Map}add(e){var t=this.nodes.get(e);return t||(t=new i(e),this.nodes.set(e,t)),t}union(e,t){var i=this.find(e),n=this.find(t);i===n||(i.rank<n.rank?i.parent=n:i.rank>n.rank?n.parent=i:(n.parent=i,i.rank++))}find(e){for(var t=e;null!==t.parent;)t=t.parent;for(var i=e;null!==i.parent;){var n=i;i=i.parent,n.parent=t}return t}connected(e,t){return this.find(e)===this.find(t)}}},{}],75:[function(e,t){"use strict";function i(e,t){for(var n=0,r=0;r<e.length;r++)n+=(e[r]-t[r])*(e[r]-t[r]);return n}function n(e,t){return o(i(e,t))}t.exports=n,n.squared=i},{}],76:[function(e,t){"use strict";t.exports=function(e,t){for(var n=e.length,r=Array.from({length:n}).map(()=>Array.from({length:n})),a=0;a<n;a++)for(var i=0;i<=a;i++)r[a][i]=t(e[a],e[i]);for(var s=0;s<n;s++)for(var o=s+1;o<n;o++)r[s][o]=r[o][s];return r}},{}],77:[function(e,t){"use strict";var i=e("./fftlib");t.exports={DEBUG:!1,ifft2DArray:function(e,t,n){var r=Array(t*n),a=t/2,s=2*(n-1);i.init(a);for(var o={re:Array(a),im:Array(a)},l=0;l<n;l++){for(var d=a-1;0<=d;d--)o.re[d]=e[2*d*n+l],o.im[d]=e[(2*d+1)*n+l];i.bt(o.re,o.im);for(var d=a-1;0<=d;d--)r[2*d*n+l]=o.re[d],r[(2*d+1)*n+l]=o.im[d]}var u=Array(a*s);i.init(s);for(var p={re:Array(s),im:Array(s)},d=0;d<t;d+=2){p.re[0]=r[d*n],p.im[0]=r[(d+1)*n];for(var l=1;l<n;l++)p.re[l]=r[d*n+l],p.im[l]=r[(d+1)*n+l],p.re[s-l]=r[d*n+l],p.im[s-l]=-r[(d+1)*n+l];i.bt(p.re,p.im);for(var c=d/2*s,l=s-1;0<=l;l--)u[c+l]=p.re[l]/(s*a)}return u},fft2DArray:function(e,t,n){var r=Object.assign({},{inplace:!0}),a=n/2+1,s=2*t,o=Array(s*a);i.init(n);for(var l={re:Array(n),im:Array(n)},d={re:Array(n),im:Array(n)},u={re:Array(n),im:Array(n)},p=0,c,m,h,g,f;p<t/2;p++){c=2*p*n,l.re=e.slice(c,c+n),c=(2*p+1)*n,l.im=e.slice(c,c+n),i.fft1d(l.re,l.im),this.reconstructTwoRealFFT(l,d,u),m=4*p*a,h=(4*p+1)*a,g=(4*p+2)*a,f=(4*p+3)*a;for(var y=a-1;0<=y;y--)o[m+y]=d.re[y],o[h+y]=d.im[y],o[g+y]=u.re[y],o[f+y]=u.im[y]}d=null,u=null;var b=Array(s*a);i.init(t);for(var x={re:Array(t),im:Array(t)},_=a-1;0<=_;_--){for(var p=t-1;0<=p;p--)x.re[p]=o[2*p*a+_],x.im[p]=o[(2*p+1)*a+_],isNaN(x.re[p])&&(x.re[p]=0),isNaN(x.im[p])&&(x.im[p]=0);i.fft1d(x.re,x.im);for(var p=t-1;0<=p;p--)b[2*p*a+_]=x.re[p],b[(2*p+1)*a+_]=x.im[p]}return b},reconstructTwoRealFFT:function(e,t,n){var r=e.re.length;t.re[0]=e.re[0],t.im[0]=0,n.re[0]=e.im[0],n.im[0]=0;for(var a=r/2,i,s,o,l,d;0<a;a--)d=r-a,i=0.5*(e.re[a]-e.re[d]),s=0.5*(e.re[a]+e.re[d]),o=0.5*(e.im[a]-e.im[d]),l=0.5*(e.im[a]+e.im[d]),t.re[a]=s,t.im[a]=o,t.re[d]=s,t.im[d]=-o,n.re[a]=l,n.im[a]=-i,n.re[d]=l,n.im[d]=i},convolute2DI:function(e,t,i,n){for(var r=0,a,s;r<i/2;r++)for(var o=0;o<n;o++)a=e[2*r*n+o]*t[2*r*n+o]-e[(2*r+1)*n+o]*t[(2*r+1)*n+o],s=e[2*r*n+o]*t[(2*r+1)*n+o]+e[(2*r+1)*n+o]*t[2*r*n+o],e[2*r*n+o]=a,e[(2*r+1)*n+o]=s},convolute:function(e,t,n,r){for(var a=Array(r*n),s=0;s<n*r;s++)a[s]=e[s];a=this.fft2DArray(a,n,r);for(var i=t.length,o=t[0].length,l=Array(r*n),s=0;s<r*n;s++)l[s]=0;for(var d=p((i-1)/2),u=p((o-1)/2),c=0,m,h;c<i;c++){m=(c-d+n)%n;for(var g=0;g<o;g++)h=(g-u+r)%r,l[m*r+h]=t[c][g]}l=this.fft2DArray(l,n,r);var f=2*n,y=r/2+1;return this.convolute2DI(a,l,f,y),this.ifft2DArray(a,f,y)},toRadix2:function(e,t,n){var r=n,a=t,s=0,o=0,l,i,d,u;if(0===n||0!=(n&n-1)){for(r=0;0!=n>>++r;);r=1<<r,o=r-n}if(0===t||0!=(t&t-1)){for(a=0;0!=t>>++a;);a=1<<a,s=(a-t)*r}if(a==t&&r==n)return{data:e,rows:t,cols:n};var c=Array(a*r),m=p((a-t)/2)-t,h=p((r-n)/2)-n;for(l=0;l<a;l++)for(d=l*r,u=(l-m)%t*n,i=0;i<r;i++)c[d+i]=e[u+(i-h)%n];return{data:c,rows:a,cols:r}},crop:function(e,t,n,r,a,s){if(t==r&&n==a)return e;var o=Object.assign({},s),l=Array(a*r),d=p((t-r)/2),u=p((n-a)/2),c,m,h,i;for(h=0;h<r;h++)for(c=h*a,m=(h+d)*n,i=0;i<a;i++)l[c+i]=e[m+(i+u)];return l}}},{"./fftlib":78}],78:[function(e,t,n){"use strict";(function(){var e="undefined"==typeof n?{}:n;var t={release:"0.3.0",date:"2013-03"};e.toString=function(){return"version "+t.release+", released "+t.date};for(var u=0,s=null,l=null,d={init:function(e){if(0!==e&&0==(e&e-1))u=e,d._initArray(),d._makeBitReversalTable(),d._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(e,t){d.fft(e,t,1)},ifft1d:function(e,t){var r=1/u;d.fft(e,t,-1);for(var n=0;n<u;n++)e[n]*=r,t[n]*=r},bt1d:function(e,t){d.fft(e,t,-1)},fft2d:function(e,t){for(var n=[],r=[],a=0,i=0;i<u;i++){a=i*u;for(var s=0;s<u;s++)n[s]=e[s+a],r[s]=t[s+a];d.fft1d(n,r);for(var o=0;o<u;o++)e[o+a]=n[o],t[o+a]=r[o]}for(var l=0;l<u;l++){for(var p=0;p<u;p++)a=l+p*u,n[p]=e[a],r[p]=t[a];d.fft1d(n,r);for(var c=0;c<u;c++)a=l+c*u,e[a]=n[c],t[a]=r[c]}},ifft2d:function(e,t){for(var n=[],r=[],a=0,i=0;i<u;i++){a=i*u;for(var s=0;s<u;s++)n[s]=e[s+a],r[s]=t[s+a];d.ifft1d(n,r);for(var o=0;o<u;o++)e[o+a]=n[o],t[o+a]=r[o]}for(var l=0;l<u;l++){for(var p=0;p<u;p++)a=l+p*u,n[p]=e[a],r[p]=t[a];d.ifft1d(n,r);for(var c=0;c<u;c++)a=l+c*u,e[a]=n[c],t[a]=r[c]}},fft:function(e,t,n){for(var r=u>>2,a=0,o,d,p,c,m,h,g,f,y;a<u;a++)c=s[a],a<c&&(m=e[a],e[a]=e[c],e[c]=m,m=t[a],t[a]=t[c],t[c]=m);for(var b=1;b<u;b<<=1){d=0,o=u/(b<<1);for(var x=0;x<b;x++){h=l[d+r],g=n*l[d];for(var _=x;_<u;_+=b<<1)p=_+b,f=h*e[p]+g*t[p],y=h*t[p]-g*e[p],e[p]=e[_]-f,e[_]+=f,t[p]=t[_]-y,t[_]+=y;d+=o}}},_initArray:function(){s="undefined"==typeof Uint32Array?[]:new Uint32Array(u),l="undefined"==typeof Float64Array?[]:new Float64Array(1.25*u)},_paddingZero:function(){},_makeBitReversalTable:function(){var e=0,t=0,i=0;for(s[0]=0;++e<u;){for(i=u>>1;i<=t;)t-=i,i>>=1;t+=i,s[e]=t}},_makeCosSinTable:function(){var e=u>>1,n=u>>2,d=u>>3,p=r(a/u),t=2*p*p,m=o(t*(2-t)),h=l[n]=1,c=l[0]=0;p=2*t;for(var s=1;s<d;s++)h-=t,t+=p*h,c+=m,m-=p*c,l[s]=c,l[n-s]=h;0!=d&&(l[d]=0.7071067811865476);for(var i=0;i<n;i++)l[e-i]=l[i];for(var g=0;g<e+n;g++)l[g+e]=-l[g]}},p=["init","fft1d","ifft1d","fft2d","ifft2d"],c=0;c<p.length;c++)e[p[c]]=d[p[c]];return e.bt=d.bt1d,e.fft=d.fft1d,e.ifft=d.ifft1d,e}).call(void 0)},{}],79:[function(e,t,i){"use strict";i.FFTUtils=e("./FFTUtils"),i.FFT=e("./fftlib")},{"./FFTUtils":77,"./fftlib":78}],80:[function(e,t){"use strict";function n(e){for(var t=0,n=0,r=e.length,a=0;a<r;++a)t+=e[a];t/=r;for(var i=Array(r),s=0;s<r;++s)i[s]=_(e[s]-t);return i.sort((e,t)=>e-t),n=1==r%2?i[(r-1)/2]/0.6745:0.5*(i[r/2]+i[r/2-1])/0.6745,n}function r(e,t,i){for(var n=Math.log10,r=void 0,a=void 0,s=void 0,o=void 0,l=void 0,d=0;d<e.length;d++)l=e[d].index,i[l-1]>=i[l-2]&&i[l-1]>=i[l]?l--:i[l+1]>=i[l]&&i[l+1]>=i[l+2]?l++:i[l-2]>=i[l-3]&&i[l-2]>=i[l-1]?l-=2:i[l+2]>=i[l+1]&&i[l+2]>=i[l+3]&&(l+=2),0<i[l-1]&&0<i[l+1]&&i[l]>=i[l-1]&&i[l]>=i[l+1]&&(i[l]!==i[l-1]||i[l]!==i[l+1])&&(r=20*n(i[l-1]),a=20*n(i[l]),s=20*n(i[l+1]),o=0.5*(r-s)/(r-2*a+s),e[d].x=t[l]+(t[l]-t[l-1])*o,e[d].y=i[l]-0.25*(i[l-1]-i[l+1])*o)}var a=e("ml-savitzky-golay-generalized"),o={sgOptions:{windowSize:9,polynomial:3},minMaxRatio:2.5e-4,broadRatio:0,maxCriteria:!0,smoothY:!0,realTopDetection:!1,heightFactor:0,boundaries:!1,derivativeThreshold:-1};t.exports=function(e,t,l){l=Object.assign({},o,l);var d=l.sgOptions,u=t.slice(),p=0,c=s;if(!("noiseLevel"in l)){for(var m=void 0,h=0;h<e.length-1;++h)m=_(e[h+1]-e[h]),m<c&&(c=m),m>p&&(p=m);l.noiseLevel=0.05>(p-c)/p?n(u):0}var i={m:1,b:l.noiseLevel};l.maxCriteria||(i.m=-1,i.b*=-1);for(var g=0;g<u.length;g++)u[g]=i.m*u[g]-i.b;for(var f=0;f<u.length;f++)0>u[f]&&(u[f]=0);var y=u,b=void 0,x=void 0;0.05>(p-c)/p?(l.smoothY&&(y=a(u,e[1]-e[0],{windowSize:d.windowSize,polynomial:d.polynomial,derivative:0})),b=a(u,e[1]-e[0],{windowSize:d.windowSize,polynomial:d.polynomial,derivative:1}),x=a(u,e[1]-e[0],{windowSize:d.windowSize,polynomial:d.polynomial,derivative:2})):(l.smoothY&&(y=a(u,e,{windowSize:d.windowSize,polynomial:d.polynomial,derivative:0})),b=a(u,e,{windowSize:d.windowSize,polynomial:d.polynomial,derivative:1}),x=a(u,e,{windowSize:d.windowSize,polynomial:d.polynomial,derivative:2}));for(var C=e,w=e[1]-e[0],v=0,S=0,E=0;E<y.length;E++)_(x[E])>v&&(v=_(x[E])),_(y[E])>S&&(S=_(y[E]));for(var D=null,A=null,T=Array(y.length-2),I=Array(y.length),P=Array(y.length),H=Array(y.length-2),F=0,O=0,R=0,z=0,N=1;N<y.length-1;++N)_(b[N])>l.derivativeThreshold&&((b[N]<b[N-1]&&b[N]<=b[N+1]||b[N]<=b[N-1]&&b[N]<b[N+1])&&(A={x:C[N],index:N},0<w&&null!=D&&(I[O++]=D,P[R++]=A)),(b[N]>=b[N-1]&&b[N]>b[N+1]||b[N]>b[N-1]&&b[N]>=b[N+1])&&(D={x:C[N],index:N},0>w&&null!==A&&(I[O++]=D,P[R++]=A))),x[N]<x[N-1]&&x[N]<x[N+1]&&(T[F++]=N,H[z++]=_(x[N])<=l.broadRatio*v);T.length=F,I.length=O,P.length=R,H.length=z;for(var L=Array(T.length),M=0,X=-1,U=void 0,B=void 0,Y=void 0,q=void 0,W=void 0,V=0;V<T.length;++V){B=C[T[V]],U=-1;var j=X+1;for(q=s,Y=0,W=!0;-1===U&&j<I.length&&W;)Y=_(B-(I[j].x+P[j].x)/2),Y<q?q=Y:W=!1,Y<_(I[j].x-P[j].x)/2&&(U=j,X=j),++j;if(-1!==U&&_(y[T[V]])>l.minMaxRatio*S&&(L[M++]={index:T[V],x:B,y:(y[T[V]]+i.b)/i.m,width:_(P[U].x-I[U].x),soft:H[V]},l.boundaries&&(L[M-1].left=I[U],L[M-1].right=P[U]),l.heightFactor)){var k=y[I[U].index],Z=y[P[U].index];L[M-1].height=l.heightFactor*(L[M-1].y-(k+Z)/2)}}L.length=M,l.realTopDetection&&r(L,C,y);for(var $=0;$<L.length;$++)L[$].base=l.noiseLevel;return L.sort(function(e,t){return e.x-t.x}),L}},{"ml-savitzky-golay-generalized":123}],81:[function(e,t){"use strict";t.exports.gsd=e("./gsd"),t.exports.post={optimizePeaks:e("./post/optimizePeaks"),joinBroadPeaks:e("./post/joinBroadPeaks"),broadenPeaks:e("./post/broadenPeaks")}},{"./gsd":80,"./post/broadenPeaks":82,"./post/joinBroadPeaks":83,"./post/optimizePeaks":84}],82:[function(e,t){"use strict";t.exports=function(e,t={}){var n=t.factor,r=n===void 0?2:n,a=t.overlap;for(var s of e)s.from=s.x-s.width/2*r,s.to=s.x+s.width/2*r;if(!(a!==void 0&&a))for(var o=0;o<e.length-1;o++){var i=e[o],l=e[o+1];i.to>l.from&&(i.to=l.from=(i.to+l.from)/2)}for(var d of e)d.width=d.to-d.from;return e}},{}],83:[function(e,t){"use strict";var i=e("ml-optimize-lorentzian");t.exports=function(e,t={}){for(var n=t.width,r=[],a=0,o=0,l=1,d=e.length-1;0<=d;d--)e[d].soft&&r.push(e.splice(d,1)[0]);r.push({x:s});for(var u=[[r[0].x,r[0].y]],p=[0],c=1;c<r.length;c++)if(_(r[c-1].x-r[c].x)<n)u.push([r[c].x,r[c].y]),r[c].y>a&&(a=r[c].y,o=c),p.push(c),l++;else{if(2<l){var m=i.optimizeSingleLorentzian(u,{x:r[o].x,y:a,width:_(u[0][0]-u[u.length-1][0])});e.push({x:m[0][0],y:m[1][0],width:m[2][0],soft:!1})}else p.forEach((t)=>{e.push(r[t])});u=[[r[c].x,r[c].y]],p=[c],a=r[c].y,o=c,l=1}return e.sort(function(e,t){return e.x-t.x}),e}},{"ml-optimize-lorentzian":122}],84:[function(e,t){"use strict";function r(e,t,i,n,r){var a=Math.sign,s=i.length,o=[],l=[],d=a(i[1]-i[0]);-1===d&&(r[0]=i.length-1);for(var u=_(t-e)/2,p=(e+t)/2,c=!1,m=r[0];!c&&m<s&&0<=m;)_(i[m]-p)<=u?(o.push(i[m]),l.push(n[m]),m+=d):1===a(p-i[m])?m+=d:c=!0;return r[0]=m,[o,l]}function a(e,t){var n=[],r=[],a=void 0,i=void 0,s=[e[0].x,t*e[0].width],o=void 0,l=void 0;for(a=0;a<e.length;a++)_(e[a].x-s[0])<t*e[a].width+s[1]?(n.push(e[a]),o=s[0]+s[1],e[a].x+t*e[a].width>o&&(o=e[a].x+t*e[a].width),l=s[0]-s[1],e[a].x-t*e[a].width<l&&(l=e[a].x-t*e[a].width),s=[(o+l)/2,_(o-l)/2]):(r.push({limits:s,group:n}),n=[e[a]],s=[e[a].x,t*e[a].width]);for(r.push({limits:s,group:n}),a=r.length-2;0<=a;a--)if(_(r[a].limits[0]-r[a+1].limits[0])<(r[a].limits[1]+r[a+1].limits[1])/2){for(i=0;i<r[a+1].group.length;i++)r[a].group.push(r[a+1].group[i]);o=r[a].limits[0]+r[a].limits[1],r[a+1].limits[0]+r[a+1].limits[1]>o&&(o=r[a+1].limits[0]+r[a+1].limits[1]),l=r[a].limits[0]-r[a].limits[1],r[a+1].limits[0]-r[a+1].limits[1]<l&&(l=r[a+1].limits[0]-r[a+1].limits[1]),r[a].limits=[(o+l)/2,_(o-l)/2],r.splice(a+1,1)}return r}var i=e("ml-optimize-lorentzian");t.exports=function(e,t,s,o,n){var l=void 0,d=void 0,u=[0],p=a(e,o),c=[],m=1;"gaussian"===n&&(m=1.17741);var h,g,f;for(l=0;l<p.length;l++){var y=p[l].group;if(1<y.length){if(h=r(p[l].limits[0]-p[l].limits[1],p[l].limits[0]+p[l].limits[1],t,s,u),5<h[0].length){g=y[0].width/1e3,f=[3,100,g,g,g,10*g,10*g,11,9,1];var b=[];for("gaussian"===n?b=i.optimizeGaussianSum(h,y,f):"lorentzian"===n&&(b=i.optimizeLorentzianSum(h,y,f)),d=0;d<b.length;d++)c.push({x:b[d][0][0],y:b[d][1][0],width:b[d][2][0]*m})}}else if(y=y[0],h=r(y.x-o*y.width,y.x+o*y.width,t,s,u),5<h[0].length){g=y.width/1e3,f=[3,100,g,g,g,10*g,10*g,11,9,1];var x=[];"gaussian"===n?x=i.optimizeSingleGaussian([h[0],h[1]],y,f):"lorentzian"===n&&(x=i.optimizeSingleLorentzian([h[0],h[1]],y,f)),c.push({x:x[0][0],y:x[1][0],width:x[2][0]*m})}}return c}},{"ml-optimize-lorentzian":122}],85:[function(e,t){"use strict";function n(e,t){return 0|e*t}function r(e,t){return w(e-2,0|e*t)}function i(e,t,i){return l(C(e+1,0|4*e/(3*t+i)))}function a(e,t,i){return l(C(e+1,0|4*e/(t+3*i)))}var s=e("new-array"),o=e("./primeFinder"),l=o.nextPrime,d=o.largestPrime,u=0,p=1,c=2;class m{constructor(e={}){if(e instanceof m)return this.table=e.table.slice(),this.values=e.values.slice(),this.state=e.state.slice(),this.minLoadFactor=e.minLoadFactor,this.maxLoadFactor=e.maxLoadFactor,this.distinct=e.distinct,this.freeEntries=e.freeEntries,this.lowWaterMark=e.lowWaterMark,void(this.highWaterMark=e.maxLoadFactor);var t=e.initialCapacity===void 0?150:e.initialCapacity;if(0>t)throw new RangeError(`initial capacity must not be less than zero: ${t}`);var i=e.minLoadFactor===void 0?1/6:e.minLoadFactor,n=e.maxLoadFactor===void 0?2/3:e.maxLoadFactor;if(0>i||1<=i)throw new RangeError(`invalid minLoadFactor: ${i}`);if(0>=n||1<=n)throw new RangeError(`invalid maxLoadFactor: ${n}`);if(i>=n)throw new RangeError(`minLoadFactor (${i}) must be smaller than maxLoadFactor (${n})`);var a=t;a=0|a/n,a=l(a),0===a&&(a=1),this.table=s(a,0),this.values=s(a,0),this.state=s(a,0),this.minLoadFactor=i,this.maxLoadFactor=a===d?1:n,this.distinct=0,this.freeEntries=a,this.lowWaterMark=0,this.highWaterMark=r(a,this.maxLoadFactor)}clone(){return new m(this)}get size(){return this.distinct}get(e){var t=this.indexOfKey(e);return 0>t?0:this.values[t]}set(e,t){var n=this.indexOfInsertion(e);if(0>n)return n=-n-1,this.values[n]=t,!1;if(this.distinct>this.highWaterMark){var r=i(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);return this.rehash(r),this.set(e,t)}if(this.table[n]=e,this.values[n]=t,this.state[n]===u&&this.freeEntries--,this.state[n]=p,this.distinct++,1>this.freeEntries){var a=i(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);this.rehash(a)}return!0}remove(e,t){var n=this.indexOfKey(e);return!(0>n)&&(this.state[n]=c,this.distinct--,t||this.maybeShrinkCapacity(),!0)}delete(e,t){var n=this.indexOfKey(e);return!(0>n)&&(this.state[n]=u,this.distinct--,t||this.maybeShrinkCapacity(),!0)}maybeShrinkCapacity(){if(this.distinct<this.lowWaterMark){var e=a(this.distinct,this.minLoadFactor,this.maxLoadFactor);this.rehash(e)}}containsKey(e){return 0<=this.indexOfKey(e)}indexOfKey(e){var t=this.table,n=this.state,r=this.table.length,a=2147483647&e,s=a%r,i=a%(r-2);for(0==i&&(i=1);n[s]!==u&&(n[s]===c||t[s]!==e);)s-=i,0>s&&(s+=r);return n[s]===u?-1:s}containsValue(e){return 0<=this.indexOfValue(e)}indexOfValue(e){for(var t=this.values,n=this.state,r=0;r<n.length;r++)if(n[r]===p&&t[r]===e)return r;return-1}indexOfInsertion(e){var t=this.table,n=this.state,r=t.length,a=2147483647&e,s=a%r,o=a%(r-2);for(0==o&&(o=1);n[s]===p&&t[s]!==e;)s-=o,0>s&&(s+=r);if(n[s]===c){for(var l=s;n[s]!==u&&(n[s]===c||t[s]!==e);)s-=o,0>s&&(s+=r);n[s]===u&&(s=l)}return n[s]===p?-s-1:s}ensureCapacity(e){if(this.table.length<e){var t=l(e);this.rehash(t)}}rehash(e){var t=this.table.length;if(e<=this.distinct)throw new Error("Unexpected");var a=this.table,o=this.values,l=this.state,d=s(e,0),u=s(e,0),c=s(e,0);this.lowWaterMark=n(e,this.minLoadFactor),this.highWaterMark=r(e,this.maxLoadFactor),this.table=d,this.values=u,this.state=c,this.freeEntries=e-this.distinct;for(var m=0;m<t;m++)if(l[m]===p){var i=a[m],h=this.indexOfInsertion(i);d[h]=i,u[h]=o[m],c[h]=p}}forEachKey(e){for(var t=0;t<this.state.length;t++)if(this.state[t]===p&&!e(this.table[t]))return!1;return!0}forEachValue(e){for(var t=0;t<this.state.length;t++)if(this.state[t]===p&&!e(this.values[t]))return!1;return!0}forEachPair(e){for(var t=0;t<this.state.length;t++)if(this.state[t]===p&&!e(this.table[t],this.values[t]))return!1;return!0}}t.exports=m},{"./primeFinder":86,"new-array":143}],86:[function(e,t,i){"use strict";var n=e("binary-search"),r=e("num-sort").asc,a=2147483647,s=[a,5,11,23,47,97,197,397,797,1597,3203,6421,12853,25717,51437,102877,205759,411527,823117,1646237,3292489,6584983,13169977,26339969,52679969,105359939,210719881,421439783,842879579,1685759167,433,877,1759,3527,7057,14143,28289,56591,113189,226379,452759,905551,1811107,3622219,7244441,14488931,28977863,57955739,115911563,231823147,463646329,927292699,1854585413,953,1907,3821,7643,15287,30577,61169,122347,244703,489407,978821,1957651,3915341,7830701,15661423,31322867,62645741,125291483,250582987,501165979,1002331963,2004663929,1039,2081,4177,8363,16729,33461,66923,133853,267713,535481,1070981,2141977,4283963,8567929,17135863,34271747,68543509,137087021,274174111,548348231,1096696463,31,67,137,277,557,1117,2237,4481,8963,17929,35863,71741,143483,286973,573953,1147921,2295859,4591721,9183457,18366923,36733847,73467739,146935499,293871013,587742049,1175484103,599,1201,2411,4831,9677,19373,38747,77509,155027,310081,620171,1240361,2480729,4961459,9922933,19845871,39691759,79383533,158767069,317534141,635068283,1270136683,311,631,1277,2557,5119,10243,20507,41017,82037,164089,328213,656429,1312867,2625761,5251529,10503061,21006137,42012281,84024581,168049163,336098327,672196673,1344393353,3,7,17,37,79,163,331,673,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,43,89,179,359,719,1439,2879,5779,11579,23159,46327,92657,185323,370661,741337,1482707,2965421,5930887,11861791,23723597,47447201,94894427,189788857,379577741,759155483,1518310967,379,761,1523,3049,6101,12203,24407,48817,97649,195311,390647,781301,1562611,3125257,6250537,12501169,25002389,50004791,100009607,200019221,400038451,800076929,1600153859,13,29,59,127,257,521,1049,2099,4201,8419,16843,33703,67409,134837,269683,539389,1078787,2157587,4315183,8630387,17260781,34521589,69043189,138086407,276172823,552345671,1104691373,19,41,83,167,337,677,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,53,107,223,449,907,1823,3659,7321,14653,29311,58631,117269,234539,469099,938207,1876417,3752839,7505681,15011389,30022781,60045577,120091177,240182359,480364727,960729461,1921458943];s.sort(r),i.nextPrime=function(e){var t=n(s,e,r);return 0>t&&(t=~t),s[t]},i.largestPrime=a},{"binary-search":3,"num-sort":153}],87:[function(e,t){"use strict";function i(){this.children=[],this.distance=-1,this.index=[]}var r=e("heap");i.prototype.cut=function(e){if(0>e)throw new RangeError("Threshold too small");var t=new i;t.children=this.children,t.distance=this.distance,t.index=this.index;for(var n=[t],r=[];0<n.length;){var a=n.shift();e>=a.distance?r.push(a):n=n.concat(a.children)}return r},i.prototype.group=function(e){if(!n(e)||1>e)throw new RangeError("Number of groups must be a positive integer");var t=new r(function(e,t){return t.distance-e.distance});for(t.push(this);t.size()<e;){var a=t.pop();if(0===a.children.length)break;a.children.forEach((e)=>t.push(e))}var s=new i;return s.children=t.toArray(),s.distance=this.distance,s},i.prototype.traverse=function(e){function t(e,n){if(n(e),e.children)for(var r=e.children.length-1;0<=r;r--)t(e.children[r],n)}t(this,e)},t.exports=i},{heap:15}],88:[function(e,t){"use strict";function i(e){n.call(this),this.index=e,this.distance=0,this.children=[]}var n=e("./Cluster"),r=e("util");r.inherits(i,n),t.exports=i},{"./Cluster":87,util:200}],89:[function(e,t){"use strict";function i(e,t,n){for(var r=1e101,a=0;a<e.length;a++)for(var i=0,s;i<t.length;i++)s=n[e[a]][t[i]],r=w(s,r);return r}function n(e,t,n){for(var r=-1,a=0;a<e.length;a++)for(var i=0,s;i<t.length;i++)s=n[e[a]][t[i]],r=C(s,r);return r}function r(e,t,n){for(var r=0,a=0;a<e.length;a++)for(var i=0;i<t.length;i++)r+=n[e[a]][t[i]];return r/(e.length*t.length)}function a(e,t,n){for(var r=Array(e.length*t.length),a=0;a<e.length;a++)for(var i=0;i<t.length;i++)r[a*t.length+i]=n[e[a]][t[i]];return l(r)}function s(e,t,i){return a(e,t,i)*e.length*t.length/(e.length+t.length)}function o(e,t){return e-t}function l(e,t){t===void 0&&(t=!1),t||(e=[].concat(e).sort(o));var i=e.length,n=p(i/2);return 0==i%2?0.5*(e[n-1]+e[n]):e[n]}var d=e("ml-distance-euclidean"),u=e("./ClusterLeaf"),c=e("./Cluster"),m=e("ml-distance-matrix"),h={disFunc:d,kind:"single",isDistanceMatrix:!1};t.exports=function(t,o){o=Object.assign({},h,o);var l=t.length,p=t;if(o.isDistanceMatrix||(p=m(t,o.disFunc)),"string"==typeof o.kind)switch(o.kind){case"single":o.kind=i;break;case"complete":o.kind=n;break;case"average":o.kind=r;break;case"centroid":o.kind=a;break;case"ward":o.kind=s;break;default:throw new RangeError("Unknown kind of similarity");}else if("function"!=typeof o.kind)throw new TypeError("Undefined kind of similarity");for(var g=Array(l),y=0;y<p.length;y++)g[y]=new u(y);for(var b=1e6,x={},d=0;1<g.length;){x={},b=1e6;for(var _=0;_<g.length;_++)for(var C=_+1;C<g.length;C++){var k,v;if(g[_]instanceof u)k=[g[_].index];else{k=Array(g[_].index.length);for(var S=0;S<k.length;S++)k[S]=g[_].index[S].index}if(g[C]instanceof u)v=[g[C].index];else{v=Array(g[C].index.length);for(var e=0;e<v.length;e++)v[e]=g[C].index[e].index}d=o.kind(k,v,p).toFixed(4),d in x?x[d].push([g[_],g[C]]):x[d]=[[g[_],g[C]]],b=w(d,b)}for(var f=x[b.toFixed(4)],j=Array(f.length),E=0,D;0<f.length;){D=f.shift();for(var A=0,T;A<f.length;A++)if(T=f[A].filter(function(e){return-1!==D.indexOf(e)}),0<T.length){var I=f[A].filter(function(e){return-1===D.indexOf(e)});D=D.concat(I),f.splice(A--,1)}j[E++]=D}j.length=E;for(var P=0,H;P<j.length;P++){H=new c,H.children=j[P].concat(),H.distance=b,H.index=Array(l);for(var F=0,O=0;O<j[P].length;O++)j[P][O]instanceof u?H.index[F++]=j[P][O]:(F+=j[P][O].index.length,H.index=j[P][O].index.concat(H.index)),g.splice(g.indexOf(j[P][O]),1);H.index.length=F,g.push(H)}}return g[0]}},{"./Cluster":87,"./ClusterLeaf":88,"ml-distance-euclidean":75,"ml-distance-matrix":76}],90:[function(e,t){"use strict";function i(e,t,n){for(var r=1e101,a=0;a<e.length;a++)for(var i=a,s;i<t.length;i++)s=n(e[a],t[i]),r=w(s,r);return r}function n(e,t,n){for(var r=-1,a=0;a<e.length;a++)for(var i=a,s;i<t.length;i++)s=n(e[a],t[i]),r=C(s,r);return r}function r(e,t,n){for(var r=0,a=0;a<e.length;a++)for(var i=0;i<t.length;i++)r+=n(e[a],t[i]);return r/(e.length*t.length)}function a(e,t,n){for(var r=0,a=0,s=0,o=0,l=0;l<e.length;l++)r+=e[l][0],a+=e[l][1];for(var i=0;i<t.length;i++)s+=t[i][0],o+=t[i][1];return r/=e.length,a/=e.length,s/=t.length,o/=t.length,n([r,a],[s,o])}function s(e,t,n){for(var r=0,a=0,s=0,o=0,l=0;l<e.length;l++)r+=e[l][0],a+=e[l][1];for(var i=0;i<t.length;i++)s+=t[i][0],o+=t[i][1];return r/=e.length,a/=e.length,s/=t.length,o/=t.length,n([r,a],[s,o])*e.length*t.length/(e.length+t.length)}function o(t,n,r){for(var a={d:0,p:0},s=Array(t[0].length),o=0;o<t[0].length;o++)s[o]=n[t[0][o]];for(var e=Array(t[1].length),l=0;l<t[1].length;l++)e[l]=n[t[1][l]];for(var d=0,i,u;d<s.length;d++){i=0;for(var p=0;p<s.length;p++)d!==p&&(i+=r(s[d],s[p]));i/=s.length-1,u=0;for(var c=0;c<e.length;c++)u+=r(s[d],e[c]);u/=e.length,i-u>a.d&&(a.d=i-u,a.p=d)}return a}function u(e,t,n){for(var r=0,a=0,s=0;s<e.length;s++)for(var i=s;i<e.length;i++)r+=n(t[e[s].index],t[e[i].index]),a++;return r/a}var l=e("ml-distance-euclidean"),d=e("./ClusterLeaf"),p=e("./Cluster"),c={dist:l,kind:"single"};t.exports=function(t,h){if(h=Object.assign({},c,h),"string"==typeof h.kind)switch(h.kind){case"single":h.kind=i;break;case"complete":h.kind=n;break;case"average":h.kind=r;break;case"centroid":h.kind=a;break;case"ward":h.kind=s;break;default:throw new RangeError("Unknown kind of similarity");}else if("function"!=typeof h.kind)throw new TypeError("Undefined kind of similarity");var g=new p;g.children=Array(t.length),g.index=Array(t.length);for(var y=0;y<t.length;y++)g.children[y]=new d(y),g.index[y]=new d(y);g.distance=u(g.index,t,h.dist);for(var b=[g],x,m,_,k,w;0<b.length;){m=0,_=0;for(var v=0;v<b.length;v++){x=0;for(var S=0;S<b[v].length;S++)for(var j=S+1;j<b[v].length;j++)x=C(h.dist(t[b[v].index[S].index],t[b[v].index[j].index]),x);x>m&&(m=x,_=v)}if(m=0,2===b[_].index.length)b[_].children=[b[_].index[0],b[_].index[1]],b[_].distance=h.dist(t[b[_].index[0].index],t[b[_].index[1].index]);else if(3===b[_].index.length){b[_].children=[b[_].index[0],b[_].index[1],b[_].index[2]];var l=[h.dist(t[b[_].index[0].index],t[b[_].index[1].index]),h.dist(t[b[_].index[1].index],t[b[_].index[2].index])];b[_].distance=(l[0]+l[1])/2}else{for(var E=new p,D=new p,A=[Array(b[_].index.length),[]],T=0;T<A[0].length;T++)A[0][T]=T;for(var I=0;I<A[0].length;I++){k=0;for(var P=0;P<A[0].length;P++)I!==P&&(k+=h.dist(t[b[_].index[A[0][P]].index],t[b[_].index[A[0][I]].index]));k/=A[0].length-1,k>m&&(m=k,w=I)}for(A[1]=[w],A[0].splice(w,1),k=o(A,t,h.dist);0<k.d;)A[1].push(A[0][k.p]),A[0].splice(k.p,1),k=o(A,t,h.dist);var H=Array(A[0].length);E.index=Array(A[0].length);for(var F=0;F<H.length;F++)H[F]=t[b[_].index[A[0][F]].index],E.index[F]=b[_].index[A[0][F]],E.children[F]=b[_].index[A[0][F]];var e=Array(A[1].length);D.index=Array(A[1].length);for(var O=0;O<e.length;O++)e[O]=t[b[_].index[A[1][O]].index],D.index[O]=b[_].index[A[1][O]],D.children[O]=b[_].index[A[1][O]];E.distance=u(E.index,t,h.dist),D.distance=u(D.index,t,h.dist),b.push(E),b.push(D),b[_].children=[E,D]}b.splice(_,1)}return g}},{"./Cluster":87,"./ClusterLeaf":88,"ml-distance-euclidean":75}],91:[function(e,t,i){"use strict";i.agnes=e("./agnes"),i.diana=e("./diana")},{"./agnes":89,"./diana":90}],92:[function(e,t){"use strict";var i=e("./fftlib");t.exports={DEBUG:!1,ifft2DArray:function(e,t,n){var r=Array(t*n),a=t/2,s=2*(n-1);i.init(a);for(var o={re:Array(a),im:Array(a)},l=0;l<n;l++){for(var d=a-1;0<=d;d--)o.re[d]=e[2*d*n+l],o.im[d]=e[(2*d+1)*n+l];i.bt(o.re,o.im);for(var d=a-1;0<=d;d--)r[2*d*n+l]=o.re[d],r[(2*d+1)*n+l]=o.im[d]}var u=Array(a*s);i.init(s);for(var p={re:Array(s),im:Array(s)},d=0;d<t;d+=2){p.re[0]=r[d*n],p.im[0]=r[(d+1)*n];for(var l=1;l<n;l++)p.re[l]=r[d*n+l],p.im[l]=r[(d+1)*n+l],p.re[s-l]=r[d*n+l],p.im[s-l]=-r[(d+1)*n+l];i.bt(p.re,p.im);for(var c=d/2*s,l=s-1;0<=l;l--)u[c+l]=p.re[l]/(s*a)}return u},fft2DArray:function(e,t,n){var r=Object.assign({},{inplace:!0}),a=n/2+1,s=2*t,o=Array(s*a);i.init(n);for(var l={re:Array(n),im:Array(n)},d={re:Array(n),im:Array(n)},u={re:Array(n),im:Array(n)},p=0,c,m,h,g,f;p<t/2;p++){c=2*p*n,l.re=e.slice(c,c+n),c=(2*p+1)*n,l.im=e.slice(c,c+n),i.fft1d(l.re,l.im),this.reconstructTwoRealFFT(l,d,u),m=4*p*a,h=(4*p+1)*a,g=(4*p+2)*a,f=(4*p+3)*a;for(var y=a-1;0<=y;y--)o[m+y]=d.re[y],o[h+y]=d.im[y],o[g+y]=u.re[y],o[f+y]=u.im[y]}d=null,u=null;var b=Array(s*a);i.init(t);for(var x={re:Array(t),im:Array(t)},_=a-1;0<=_;_--){for(var p=t-1;0<=p;p--)x.re[p]=o[2*p*a+_],x.im[p]=o[(2*p+1)*a+_],isNaN(x.re[p])&&(x.re[p]=0),isNaN(x.im[p])&&(x.im[p]=0);i.fft1d(x.re,x.im);for(var p=t-1;0<=p;p--)b[2*p*a+_]=x.re[p],b[(2*p+1)*a+_]=x.im[p]}return b},reconstructTwoRealFFT:function(e,t,n){var r=e.re.length;t.re[0]=e.re[0],t.im[0]=0,n.re[0]=e.im[0],n.im[0]=0;for(var a=r/2,i,s,o,l,d;0<a;a--)d=r-a,i=0.5*(e.re[a]-e.re[d]),s=0.5*(e.re[a]+e.re[d]),o=0.5*(e.im[a]-e.im[d]),l=0.5*(e.im[a]+e.im[d]),t.re[a]=s,t.im[a]=o,t.re[d]=s,t.im[d]=-o,n.re[a]=l,n.im[a]=-i,n.re[d]=l,n.im[d]=i},convolute2DI:function(e,t,i,n){for(var r=0,a,s;r<i/2;r++)for(var o=0;o<n;o++)a=e[2*r*n+o]*t[2*r*n+o]-e[(2*r+1)*n+o]*t[(2*r+1)*n+o],s=e[2*r*n+o]*t[(2*r+1)*n+o]+e[(2*r+1)*n+o]*t[2*r*n+o],e[2*r*n+o]=a,e[(2*r+1)*n+o]=s},convolute:function(e,t,n,r){for(var a=Array(r*n),s=0;s<n*r;s++)a[s]=e[s];a=this.fft2DArray(a,n,r);for(var i=t.length,o=t[0].length,l=Array(r*n),s=0;s<r*n;s++)l[s]=0;for(var d=p((i-1)/2),u=p((o-1)/2),c=0,m,h;c<i;c++){m=(c-d+n)%n;for(var g=0;g<o;g++)h=(g-u+r)%r,l[m*r+h]=t[c][g]}l=this.fft2DArray(l,n,r);var f=2*n,y=r/2+1;return this.convolute2DI(a,l,f,y),this.ifft2DArray(a,f,y)},toRadix2:function(e,t,n){var r=n,a=t,s=0,o=0,l,i,d,u;if(0===n||0!=(n&n-1)){for(r=0;0!=n>>++r;);r=1<<r,o=r-n}if(0===t||0!=(t&t-1)){for(a=0;0!=t>>++a;);a=1<<a,s=(a-t)*r}if(a==t&&r==n)return{data:e,rows:t,cols:n};var c=Array(a*r),m=p((a-t)/2)-t,h=p((r-n)/2)-n;for(l=0;l<a;l++)for(d=l*r,u=(l-m)%t*n,i=0;i<r;i++)c[d+i]=e[u+(i-h)%n];return{data:c,rows:a,cols:r}},crop:function(e,t,n,r,a,s){if(t==r&&n==a)return e;var o=Object.assign({},s),l=Array(a*r),d=p((t-r)/2),u=p((n-a)/2),c,m,h,i;for(h=0;h<r;h++)for(c=h*r,m=(h+d)*n,i=0;i<a;i++)l[c+i]=e[m+(i+u)];return l}}},{"./fftlib":93}],93:[function(e,t,i){arguments[4][78][0].apply(i,arguments)},{dup:78}],94:[function(e,t,i){arguments[4][79][0].apply(i,arguments)},{"./FFTUtils":92,"./fftlib":93,dup:79}],95:[function(e,i){"use strict";"use strict;";function r(e){var t=e,r,a;if("number"!=typeof e[0]){r=e.length,a=e[0].length,t=Array(r*a);for(var s=0;s<r;s++)for(var i=0;i<a;i++)t[s*a+i]=e[s][i]}else{var l=o(e.length);n(l)&&(r=l,a=l)}return{data:t,rows:r,cols:a}}var a=e("ml-fft").FFTUtils;i.exports={fft:function(e,t,n){var s=r(e),o=s.data,l=Object.assign({normalize:!1,divisor:1,rows:s.rows,cols:s.cols},n),d,u;if(l.rows&&l.cols)d=l.rows,u=l.cols;else throw new Error("Invalid number of rows or columns "+d+" "+u);var p=l.divisor,c=t.length,m=t[0].length,h,i;if(l.normalize)for(p=0,h=0;h<c;h++)for(i=0;i<m;i++)p+=t[h][i];if(0===p)throw new RangeError("convolution: The divisor is equal to zero");var g=a.toRadix2(o,d,u),f=a.convolute(g.data,t,g.rows,g.cols);if(f=a.crop(f,g.rows,g.cols,d,u),0!=p)for(h=0;h<f.length;h++)f[h]/p;return f},direct:function(e,t,n){var a=r(e),s=a.data,o=Object.assign({normalize:!1,divisor:1,rows:a.rows,cols:a.cols},n),l,d;if(o.rows&&o.cols)l=o.rows,d=o.cols;else throw new Error("Invalid number of rows or columns "+l+" "+d);var u=o.divisor,c=t.length,m=t[0].length,h,i,g,f,y,b,x,_,k;if(o.normalize)for(u=0,h=0;h<c;h++)for(i=0;i<m;i++)u+=t[h][i];if(0===u)throw new RangeError("convolution: The divisor is equal to zero");var C=Array(l*d),w=p(c/2),v=p(m/2);for(f=0;f<l;f++)for(g=0;g<d;g++){for(b=0,i=0;i<c;i++)for(h=0;h<m;h++)x=t[c-i-1][m-h-1],_=(f+i-w+l)%l,k=(g+h-v+d)%d,y=_*d+k,b+=s[y]*x;y=f*d+g,C[y]=b/u}return C},kernelFactory:{LoG:function(e,n,r){var a=1e3;r&&r.factor&&(a=r.factor);var s=Array(n),o,i,l,u;a*=-1;var p=(n-1)/2;for(o=0;o<n;o++)for(s[o]=Array(n),u=(o-p)*(o-p),i=0;i<n;i++)l=-((i-p)*(i-p)+u)/(2*e*e),s[o][i]=t(a*(1+l)*d(l));return s}},matrix2Array:r}},{"ml-fft":94}],96:[function(e,t){"use strict";var n=e("ml-disjoint-set"),r=[-1,0],a=[0,-1],s=[null,null],o=[-1,-1,0,1],l=[0,-1,-1,-1],d=[null,null,null,null];t.exports=function(e,t,u,p){p=p||{};var c=p.neighbours||8,m,h,g;if(8===c)m=o,h=l,g=d;else if(4===c)m=r,h=a,g=s;else throw new RangeError("unsupported neighbours count: "+c);for(var f=e.length,y=Array(f),b=new Int16Array(f),x=new n,_=1,C=0,w;C<u;C++)for(var v=0,i;v<t;v++)if(i=null,w=v+C*t,e[w]){for(var S=0;S<g.length;S++){var k=v+m[S],j=C+h[S];if(0<=k&&0<=j&&k<t&&j<u){var E=y[k+j*t];E?(g[S]=E,(!i||g[S].value<i.value)&&(i=g[S])):g[S]=null}}if(!i)y[w]=x.add(_++);else{y[w]=i;for(var S=0;S<g.length;S++)g[S]&&g[S]!==i&&x.union(i,g[S])}}for(var C=0;C<u;C++)for(var v=0;v<t;v++)w=v+C*t,e[w]&&(b[w]=x.find(y[w]).value);return b}},{"ml-disjoint-set":74}],97:[function(e,t){"use strict";function n(e,t,n,r){var a={},s,o,l,d;for(d=0;d<e.length;d++)0!=e[d]&&(o=d%r,s=(d-o)/r,a[e[d]]?(l=a[e[d]],l.x+=o*t[d],l.y+=s*t[d],l.z+=t[d],o<l.minX&&(l.minX=o),o>l.maxX&&(l.maxX=o),s<l.minY&&(l.minY=s),s>l.maxY&&(l.maxY=s)):a[e[d]]={x:o*t[d],y:s*t[d],z:t[d],minX:o,maxX:o,minY:s,maxY:s});var i=Object.keys(a),u=Array(i.length);for(d=0;d<i.length;d++)u[d]=a[i[d]],u[d].x/=u[d].z,u[d].y/=u[d].z;return u}var i=e("ml-stat").array,r=e("ml-matrix-convolution"),a=e("./ccLabeling"),s=[[0,0,1,2,2,2,1,0,0],[0,1,4,7,7,7,4,1,0],[1,4,5,3,0,3,5,4,1],[2,7,3,-12,-23,-12,3,7,2],[2,7,0,-23,-40,-23,0,7,2],[2,7,3,-12,-23,-12,3,7,2],[1,4,5,3,0,3,5,4,1],[0,1,3,7,7,7,3,1,0],[0,0,1,2,2,2,1,0,0]];t.exports={findPeaks2DRegion:function(e,t){var l=Object.assign({},{nStdev:3,kernel:s},t),d=r.matrix2Array(e),u=d.data,p;d.rows&&d.cols&&(l.rows=d.rows,l.cols=d.cols);var i=l.rows,c=l.cols;if(!i||!c)throw new Error("Invalid number of rows or columns "+i+" "+c);var m=l.kernel,h=l.filteredData;h||(h=r.fft(u,m,l));var g=l.nStdev,y=0;for(p=c*i-2;0<=p;p--)y+=f(h[p]-h[p+1],2);y=-o(y),y*=g/i;var b=Array(c*i);for(p=c*i-1;0<=p;p--)b[p]=0;var x=0;for(p=h.length-1;0<=p;p--)h[p]<y&&(b[p]=1,x++);var _=a(b,c,i,{neighbours:8}),k=n(_,u,i,c);return 0<k.length,k},findPeaks2DMax:function(e,t){var n=Object.assign({},{nStdev:3,kernel:s},t),a=r.matrix2Array(e),l=a.data;a.rows&&a.cols&&(n.rows=a.rows,n.cols=a.cols);var d=n.rows,u=n.cols;if(!d||!u)throw new Error("Invalid number of rows or columns "+d+" "+u);var c=n.kernel,m=n.filteredData;m||(m=r.fft(l,c,n));for(var h=n.nStdev,g=0,y=u*d-2;0<=y;y--)g+=f(m[y]-m[y+1],2);g=-o(g),g*=h/d;for(var i=[],b=0,y=0,x,_;y<m.length;y++)m[y]<g&&(x=p(y/u),_=y%u,0<x&&x+1<d&&_+1<u&&0<_&&m[y]<m[y+1]&&m[y]<m[y-1]&&(b=(x-1)*u+_,m[y]<m[b-1]&&m[y]<m[b]&&m[y]<m[b+1]&&(b=(x+1)*u+_,m[y]<m[b-1]&&m[y]<m[b]&&m[y]<m[b+1]&&i.push({x:_,y:x,z:l[y]}))));return i}}},{"./ccLabeling":96,"ml-matrix-convolution":95,"ml-stat":127}],98:[function(e,t){"use strict";function i(e){for(var t=Array(e[0].length),n=0;n<t.length;++n)t[n]=Array(e.length);for(n=0;n<e.length;++n)for(var i=0;i<e[0].length;++i)t[i][n]=e[n][i];return t}var n=e("ml-stat").array;t.exports={coordArrayToPoints:function(e,t){if(0!=e.length%t)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var n=e.length/t,r=Array(n),a=0,s=0,i;s<e.length;s+=t){i=Array(t);for(var o=0;o<t;++o)i[o]=e[s+o];r[a]=i,a++}return r},coordArrayToCoordMatrix:function(e,t){if(0!=e.length%t)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var n=Array(t),r=e.length/t,a=0;a<n.length;a++)n[a]=Array(r);for(a=0;a<e.length;a+=t)for(var i=0,s;i<t;++i)s=p(a/t),n[i][s]=e[a+i];return n},coordMatrixToCoordArray:function(e){for(var t=Array(e.length*e[0].length),n=0,r=0;r<e[0].length;++r)for(var i=0;i<e.length;++i)t[n]=e[i][r],++n;return t},coordMatrixToPoints:i,pointsToCoordArray:function(e){for(var t=Array(e.length*e[0].length),n=0,r=0;r<e.length;++r)for(var i=0;i<e[0].length;++i)t[n]=e[r][i],++n;return t},pointsToCoordMatrix:i,applyDotProduct:function(e,t){var n,r;e.length<=t.length?(r=e,n=t):(r=t,n=e);for(var a=n.length-r.length+1,s=Array(a),o=0,i;o<a;++o){i=0;for(var l=0;l<r.length;++l)i+=r[l]*n[o+l];s[o]=i}return s},scale:function(e,t){var r=t.inPlace?e:Array(e.length);var a=t.max,s=t.min;if("number"==typeof a){if("number"==typeof s)for(var o=n.minMax(e),l=(a-s)/(o.max-o.min),d=0;d<r.length;d++)r[d]=(e[d]-o.min)*l+s;else for(var i=n.max(e),l=a/i,d=0;d<r.length;d++)r[d]=e[d]*l;}else if("number"==typeof s)for(var i=n.min(e),l=s/i,d=0;d<r.length;d++)r[d]=e[d]*l;return r}}},{"ml-stat":127}],99:[function(e,t,i){"use strict";function n(e,t,n,r,s){function o(e,t,i,n){return(n-t)/(i-e)}var d=e.length,u=(r-n)/(s-1),p=n-u/2,c=Array(s),m=e[1]-e[0],h=e[e.length-1]-e[e.length-2],g=p,f=p+u,y=l,b=0,x=e[0]-m,_=0,k=0,C=0,w=0,v=0,S=0,E=0,i=0;main:for(;;){for(;0<=x-f;){var j=a(0,f-y,C,b);if(S=k+j,c[i]=(S-v)/u,i++,i===s)break main;g=f,f+=u,v=S}y<=g&&g<=x&&(j=a(0,g-y,C,b),v=k+j),k+=a(y,x,C,w),y=x,b=_,E<d?(x=e[E],_=t[E],E++):E===d&&(x+=h,_=0),C=o(y,b,x,_),w=-C*y+b}return c}function r(e,t,n,r,a){var o=e.length,l=(r-n)/(a-1),d=e[e.length-1]-e[e.length-2],u=n-l/2,p=Array(a),c=u,m=u+l,h=-s,g=0,f=e[0],y=t[0],b=0,x=!0,_=0,k=0,C=1,i=0;main:for(;;){if(h>=f)throw new Error("x must be an increasing serie");for(;0<h-m;){if(x&&(k++,x=!1),p[i]=0>=k?0:_/k,i++,i===a)break main;c=m,m+=l,_=0,k=0}h>c&&(_+=g,k++),(h==-s||1<b)&&k--,h=f,g=y,C<o?(f=e[C],y=t[C],C++):(f+=d,y=0,b++)}return p}function a(e,t,i,n){return 0.5*i*t*t+n*t-(0.5*i*e*e+n*e)}i.getEquallySpacedData=function(e,t,i){1<e.length&&e[0]>e[1]&&(e=e.slice().reverse(),t=t.slice().reverse());var a=e.length;if(a!==t.length)throw new RangeError("the x and y vector doesn't have the same size.");i===void 0&&(i={});var s=i.from===void 0?e[0]:i.from;if(isNaN(s)||!isFinite(s))throw new RangeError("'From' value must be a number");var o=i.to===void 0?e[e.length-1]:i.to;if(isNaN(o)||!isFinite(o))throw new RangeError("'To' value must be a number");var l=s>o;if(l){var d=s;s=o,o=d}var u=i.numberOfPoints===void 0?100:i.numberOfPoints;if(isNaN(u)||!isFinite(u))throw new RangeError("'Number of points' value must be a number");if(1>u)throw new RangeError("the number of point must be higher than 1");var p="slot"===i.variant?"slot":"smooth",c="slot"==p?r(e,t,s,o,u):n(e,t,s,o,u);return l?c.reverse():c},i.integral=a},{}],100:[function(e,t,i){"use strict";t.exports=i=e("./ArrayUtils"),i.getEquallySpacedData=e("./getEquallySpaced").getEquallySpacedData,i.SNV=e("./snv").SNV},{"./ArrayUtils":98,"./getEquallySpaced":99,"./snv":101}],101:[function(e,t,i){arguments[4][70][0].apply(i,arguments)},{dup:70,"ml-stat":127}],102:[function(e,t,i){"use strict";function n(e){function t(e,t){if(e.rows!==t.rows||e.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal")}function n(e,t){return e-t}function f(e,t){for(var i in t)e=e.replace(new RegExp("%"+i+"%","g"),t[i]);return e}e===void 0&&(e=Object);class y extends e{static get[Symbol.species](){return this}static from1DArray(e,t,i){if(e*t!==i.length)throw new RangeError("Data length does not match given dimensions");for(var n=new this(e,t),r=0;r<e;r++)for(var a=0;a<t;a++)n.set(r,a,i[r*t+a]);return n}static rowVector(e){for(var t=new this(1,e.length),n=0;n<e.length;n++)t.set(0,n,e[n]);return t}static columnVector(e){for(var t=new this(e.length,1),n=0;n<e.length;n++)t.set(n,0,e[n]);return t}static empty(e,t){return new this(e,t)}static zeros(e,t){return this.empty(e,t).fill(0)}static ones(e,t){return this.empty(e,t).fill(1)}static rand(e,t,n){n===void 0&&(n=Math.random);for(var r=this.empty(e,t),a=0;a<e;a++)for(var i=0;i<t;i++)r.set(a,i,n());return r}static randInt(e,t,n,r){n===void 0&&(n=1e3),r===void 0&&(r=Math.random);for(var a=this.empty(e,t),s=0;s<e;s++)for(var i=0,o;i<t;i++)o=p(r()*n),a.set(s,i,o);return a}static eye(e,t,n){t===void 0&&(t=e),n===void 0&&(n=1);for(var r=w(e,t),a=this.zeros(e,t),s=0;s<r;s++)a.set(s,s,n);return a}static diag(e,t,n){var r=e.length;t===void 0&&(t=r),n===void 0&&(n=t);for(var a=w(r,t,n),s=this.zeros(t,n),o=0;o<a;o++)s.set(o,o,e[o]);return s}static min(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);for(var n=e.rows,r=e.columns,a=new this(n,r),s=0;s<n;s++)for(var i=0;i<r;i++)a.set(s,i,w(e.get(s,i),t.get(s,i)));return a}static max(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);for(var n=e.rows,r=e.columns,a=new this(n,r),s=0;s<n;s++)for(var i=0;i<r;i++)a.set(s,i,C(e.get(s,i),t.get(s,i)));return a}static checkMatrix(e){return y.isMatrix(e)?e:new this(e)}static isMatrix(e){return null!=e&&"Matrix"===e.klass}get size(){return this.rows*this.columns}apply(e){if("function"!=typeof e)throw new TypeError("callback must be a function");for(var t=this.rows,n=this.columns,r=0;r<t;r++)for(var i=0;i<n;i++)e.call(this,r,i);return this}to1DArray(){for(var e=Array(this.size),t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)e[t*this.columns+i]=this.get(t,i);return e}to2DArray(){for(var e=Array(this.rows),t=0;t<this.rows;t++){e[t]=Array(this.columns);for(var i=0;i<this.columns;i++)e[t][i]=this.get(t,i)}return e}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var e=0;e<this.rows;e++)for(var t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e,t){e=e||1,t=t||1;for(var n=new this.constructor[Symbol.species](this.rows*e,this.columns*t),r=0;r<e;r++)for(var i=0;i<t;i++)n.setSubMatrix(this,this.rows*r,this.columns*i);return n}fill(e){for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,e);return this}neg(){return this.mulS(-1)}getRow(e){o.checkRowIndex(this,e);for(var t=Array(this.columns),n=0;n<this.columns;n++)t[n]=this.get(e,n);return t}getRowVector(e){return this.constructor.rowVector(this.getRow(e))}setRow(e,t){o.checkRowIndex(this,e),t=o.checkRowVector(this,t);for(var n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}swapRows(e,t){o.checkRowIndex(this,e),o.checkRowIndex(this,t);for(var n=0,i;n<this.columns;n++)i=this.get(e,n),this.set(e,n,this.get(t,n)),this.set(t,n,i);return this}getColumn(e){o.checkColumnIndex(this,e);for(var t=Array(this.rows),n=0;n<this.rows;n++)t[n]=this.get(n,e);return t}getColumnVector(e){return this.constructor.columnVector(this.getColumn(e))}setColumn(e,t){o.checkColumnIndex(this,e),t=o.checkColumnVector(this,t);for(var n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}swapColumns(e,t){o.checkColumnIndex(this,e),o.checkColumnIndex(this,t);for(var n=0,i;n<this.rows;n++)i=this.get(n,e),this.set(n,e,this.get(n,t)),this.set(n,t,i);return this}addRowVector(e){e=o.checkRowVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)+e[i]);return this}subRowVector(e){e=o.checkRowVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)-e[i]);return this}mulRowVector(e){e=o.checkRowVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)*e[i]);return this}divRowVector(e){e=o.checkRowVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)/e[i]);return this}addColumnVector(e){e=o.checkColumnVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)+e[t]);return this}subColumnVector(e){e=o.checkColumnVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)-e[t]);return this}mulColumnVector(e){e=o.checkColumnVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)*e[t]);return this}divColumnVector(e){e=o.checkColumnVector(this,e);for(var t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)/e[t]);return this}mulRow(e,t){o.checkRowIndex(this,e);for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}mulColumn(e,t){o.checkColumnIndex(this,e);for(var n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}max(){for(var e=this.get(0,0),t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.get(t,i)>e&&(e=this.get(t,i));return e}maxIndex(){for(var e=this.get(0,0),t=[0,0],n=0;n<this.rows;n++)for(var i=0;i<this.columns;i++)this.get(n,i)>e&&(e=this.get(n,i),t[0]=n,t[1]=i);return t}min(){for(var e=this.get(0,0),t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)this.get(t,i)<e&&(e=this.get(t,i));return e}minIndex(){for(var e=this.get(0,0),t=[0,0],n=0;n<this.rows;n++)for(var i=0;i<this.columns;i++)this.get(n,i)<e&&(e=this.get(n,i),t[0]=n,t[1]=i);return t}maxRow(e){o.checkRowIndex(this,e);for(var t=this.get(e,0),n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxRowIndex(e){o.checkRowIndex(this,e);for(var t=this.get(e,0),n=[e,0],r=1;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r),n[1]=r);return n}minRow(e){o.checkRowIndex(this,e);for(var t=this.get(e,0),n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minRowIndex(e){o.checkRowIndex(this,e);for(var t=this.get(e,0),n=[e,0],r=1;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r),n[1]=r);return n}maxColumn(e){o.checkColumnIndex(this,e);for(var t=this.get(0,e),n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}maxColumnIndex(e){o.checkColumnIndex(this,e);for(var t=this.get(0,e),n=[0,e],r=1;r<this.rows;r++)this.get(r,e)>t&&(t=this.get(r,e),n[0]=r);return n}minColumn(e){o.checkColumnIndex(this,e);for(var t=this.get(0,e),n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}minColumnIndex(e){o.checkColumnIndex(this,e);for(var t=this.get(0,e),n=[0,e],r=1;r<this.rows;r++)this.get(r,e)<t&&(t=this.get(r,e),n[0]=r);return n}diag(){for(var e=w(this.rows,this.columns),t=Array(e),n=0;n<e;n++)t[n]=this.get(n,n);return t}sum(e){return"row"===e?o.sumByRow(this):"column"===e?o.sumByColumn(this):o.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var e=1,t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)e*=this.get(t,i);return e}cumulativeSum(){for(var e=0,t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)e+=this.get(t,i),this.set(t,i,e);return this}dot(e){y.isMatrix(e)&&(e=e.to1DArray());var t=this.to1DArray();if(t.length!==e.length)throw new RangeError("vectors do not have the same size");for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}mmul(e){e=this.constructor.checkMatrix(e),this.columns!==e.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var t=this.rows,r=this.columns,n=e.columns,a=new this.constructor[Symbol.species](t,n),o=Array(r),l=0;l<n;l++){for(var d=0;d<r;d++)o[d]=e.get(d,l);for(var u=0,i;u<t;u++){for(i=0,d=0;d<r;d++)i+=this.get(u,d)*o[d];a.set(u,l,i)}}return a}strassen2x2(e){var t=new this.constructor[Symbol.species](2,2),i=this.get(0,0),n=e.get(0,0),r=this.get(0,1),a=e.get(0,1),s=this.get(1,0),o=e.get(1,0),l=this.get(1,1),d=e.get(1,1),u=(i+l)*(n+d),p=(s+l)*n,c=i*(a-d),m=l*(o-n),h=(i+r)*d;return t.set(0,0,u+m-h+(r-l)*(o+d)),t.set(0,1,c+h),t.set(1,0,p+m),t.set(1,1,u-p+c+(s-i)*(n+a)),t}strassen3x3(e){var t=new this.constructor[Symbol.species](3,3),i=this.get(0,0),n=this.get(0,1),r=this.get(0,2),a=this.get(1,0),s=this.get(1,1),o=this.get(1,2),l=this.get(2,0),d=this.get(2,1),u=this.get(2,2),p=e.get(0,0),c=e.get(0,1),m=e.get(0,2),h=e.get(1,0),g=e.get(1,1),f=e.get(1,2),y=e.get(2,0),b=e.get(2,1),x=e.get(2,2),_=(i-a)*(-c+g),k=(-i+a+s)*(p-c+g),C=(a+s)*(-p+c),w=i*p,v=(-i+l+d)*(p-m+f),S=(-i+l)*(m-f),j=(l+d)*(-p+m),E=(-r+d+u)*(g+y-b),D=(r-u)*(g-b),A=r*y,T=(d+u)*(-y+b),I=(-r+s+o)*(f+y-x),P=(r-o)*(f-x),H=(s+o)*(-y+x);return t.set(0,0,w+A+n*h),t.set(0,1,(i+n+r-a-s-d-u)*g+k+C+w+E+A+T),t.set(0,2,w+v+j+(i+n+r-s-o-l-d)*f+A+I+H),t.set(1,0,_+s*(-p+c+h-g-f-y+x)+k+w+A+I+P),t.set(1,1,_+k+C+w+o*b),t.set(1,2,A+I+P+H+a*m),t.set(2,0,w+v+S+d*(-p+m+h-g-f-y+b)+E+D+A),t.set(2,1,E+D+A+T+l*c),t.set(2,2,w+v+S+j+u*x),t}mmulStrassen(e){function t(e,t,i){var n=e.rows,r=e.columns;if(n===t&&r===i)return e;var a=y.zeros(t,i);return a=a.setSubMatrix(e,0,0),a}function i(e,n,r,a){if(512>=r||512>=a)return e.mmul(n);1==r%2&&1==a%2?(e=t(e,r+1,a+1),n=t(n,r+1,a+1)):1==r%2?(e=t(e,r+1,a),n=t(n,r+1,a)):1==a%2&&(e=t(e,r,a+1),n=t(n,r,a+1));var s=parseInt(e.rows/2),o=parseInt(e.columns/2),l=e.subMatrix(0,s-1,0,o-1),d=n.subMatrix(0,s-1,0,o-1),u=e.subMatrix(0,s-1,o,e.columns-1),p=n.subMatrix(0,s-1,o,n.columns-1),c=e.subMatrix(s,e.rows-1,0,o-1),m=n.subMatrix(s,n.rows-1,0,o-1),h=e.subMatrix(s,e.rows-1,o,e.columns-1),g=n.subMatrix(s,n.rows-1,o,n.columns-1),f=i(y.add(l,h),y.add(d,g),s,o),b=i(y.add(c,h),d,s,o),x=i(l,y.sub(p,g),s,o),_=i(h,y.sub(m,d),s,o),k=i(y.add(l,u),g,s,o),C=i(y.sub(c,l),y.add(d,p),s,o),w=i(y.sub(u,h),y.add(m,g),s,o),v=y.add(f,_);v.sub(k),v.add(w);var S=y.add(x,k),j=y.add(b,_),E=y.sub(f,b);E.add(x),E.add(C);var D=y.zeros(2*v.rows,2*v.columns);return D=D.setSubMatrix(v,0,0),D=D.setSubMatrix(S,v.rows,0),D=D.setSubMatrix(j,0,v.columns),D=D.setSubMatrix(E,v.rows,v.columns),D.subMatrix(0,r-1,0,a-1)}var n=this.clone(),a=n.rows,s=n.columns,o=e.rows,l=e.columns;s!==o&&console.warn(`Multiplying ${a} x ${s} and ${o} x ${l} matrix: dimensions do not match.`);var d=C(a,o),r=C(s,l);return n=t(n,d,r),e=t(e,d,r),i(n,e,d,r)}scaleRows(e,t){if(e=void 0===e?0:e,t=void 0===t?1:t,e>=t)throw new RangeError("min should be strictly smaller than max");for(var n=this.constructor.empty(this.rows,this.columns),r=0,i;r<this.rows;r++)i=s.scale(this.getRow(r),{min:e,max:t}),n.setRow(r,i);return n}scaleColumns(e,t){if(e=void 0===e?0:e,t=void 0===t?1:t,e>=t)throw new RangeError("min should be strictly smaller than max");for(var n=this.constructor.empty(this.rows,this.columns),r=0,i;r<this.columns;r++)i=s.scale(this.getColumn(r),{min:e,max:t}),n.setColumn(r,i);return n}kroneckerProduct(e){e=this.constructor.checkMatrix(e);for(var t=this.rows,r=this.columns,n=e.rows,a=e.columns,s=new this.constructor[Symbol.species](t*n,r*a),o=0;o<t;o++)for(var i=0;i<r;i++)for(var d=0;d<n;d++)for(var u=0;u<a;u++)s[n*o+d][a*i+u]=this.get(o,i)*e.get(d,u);return s}transpose(){for(var e=new this.constructor[Symbol.species](this.columns,this.rows),t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)e.set(i,t,this.get(t,i));return e}sortRows(e){e===void 0&&(e=n);for(var t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(e){e===void 0&&(e=n);for(var t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(e,t,n,r){o.checkRange(this,e,t,n,r);for(var a=new this.constructor[Symbol.species](t-e+1,r-n+1),s=e;s<=t;s++)for(var i=n;i<=r;i++)a[s-e][i-n]=this.get(s,i);return a}subMatrixRow(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.columns-1),t>n||0>t||t>=this.columns||0>n||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](e.length,n-t+1),a=0;a<e.length;a++)for(var i=t;i<=n;i++){if(0>e[a]||e[a]>=this.rows)throw new RangeError("Row index out of range: "+e[a]);r.set(a,i-t,this.get(e[a],i))}return r}subMatrixColumn(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.rows-1),t>n||0>t||t>=this.rows||0>n||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](n-t+1,e.length),a=0;a<e.length;a++)for(var i=t;i<=n;i++){if(0>e[a]||e[a]>=this.columns)throw new RangeError("Column index out of range: "+e[a]);r.set(i-t,a,this.get(i,e[a]))}return r}setSubMatrix(e,t,n){e=this.constructor.checkMatrix(e);var r=t+e.rows-1,a=n+e.columns-1;o.checkRange(this,t,r,n,a);for(var s=0;s<e.rows;s++)for(var i=0;i<e.columns;i++)this[t+s][n+i]=e.get(s,i);return this}selection(e,t){for(var n=o.checkIndices(this,e,t),r=new this.constructor[Symbol.species](e.length,t.length),a=0,i;a<n.row.length;a++){i=n.row[a];for(var s=0,l;s<n.column.length;s++)l=n.column[s],r[a][s]=this.get(i,l)}return r}trace(){for(var e=w(this.rows,this.columns),t=0,n=0;n<e;n++)t+=this.get(n,n);return t}transposeView(){return new l(this)}rowView(e){return o.checkRowIndex(this,e),new d(this,e)}columnView(e){return o.checkColumnIndex(this,e),new m(this,e)}flipRowView(){return new h(this)}flipColumnView(){return new g(this)}subMatrixView(e,t,i,n){return new u(this,e,t,i,n)}selectionView(e,t){return new c(this,e,t)}det(){if(this.isSquare()){var e,t,i,n;if(2===this.columns)return e=this.get(0,0),t=this.get(0,1),i=this.get(1,0),n=this.get(1,1),e*n-t*i;if(3===this.columns){var a,s,o;return a=this.selectionView([1,2],[1,2]),s=this.selectionView([1,2],[0,2]),o=this.selectionView([1,2],[0,1]),e=this.get(0,0),t=this.get(0,1),i=this.get(0,2),e*a.det()-t*s.det()+i*o.det()}return new r(this).determinant}throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(e){void 0===e&&(e=Number.EPSILON);for(var t=new a(this,{autoTranspose:!0}),n=t.leftSingularVectors,r=t.rightSingularVectors,o=t.diagonal,s=0;s<o.length;s++)o[s]=_(o[s])>e?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),r.mmul(o.mmul(n.transposeView()))}}y.prototype.klass="Matrix",y.random=y.rand,y.diagonal=y.diag,y.prototype.diagonal=y.prototype.diag,y.identity=y.eye,y.prototype.negate=y.prototype.neg,y.prototype.tensorProduct=y.prototype.kroneckerProduct,y.prototype.determinant=y.prototype.det;var b=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,x=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% value);
        }
    }
    return this;
})
`,k=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));
        }
    }
    return this;
})
`,v=`
(function %name%(matrix, value) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(value);
})
`,S=`
(function %name%() {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j)));
        }
    }
    return this;
})
`,j=`
(function %name%(matrix) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%();
})
`,E=`
(function %name%(%args%) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), %args%));
        }
    }
    return this;
})
`,D=`
(function %name%(matrix, %args%) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(%args%);
})
`,A=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), value));
        }
    }
    return this;
})
`,T=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));
        }
    }
    return this;
})
`,I=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,P=D,H=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]],F;for(var i of H){var O=eval(f(b,{name:i[1],op:i[0]})),R=eval(f(x,{name:i[1]+"S",op:i[0]})),z=eval(f(k,{name:i[1]+"M",op:i[0]})),N=eval(f(v,{name:i[1]}));for(F=1;F<i.length;F++)y.prototype[i[F]]=O,y.prototype[i[F]+"S"]=R,y.prototype[i[F]+"M"]=z,y[i[F]]=N}var L=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(e){L.push(["Math."+e,e])});for(var M of L){var X=eval(f(S,{name:M[1],method:M[0]})),U=eval(f(j,{name:M[1]}));for(F=1;F<M.length;F++)y.prototype[M[F]]=X,y[M[F]]=U}var B=[["Math.pow",1,"pow"]];for(var Y of B){var q="arg0";for(F=1;F<Y[1];F++)q+=`, arg${F}`;if(1!==Y[1]){var W=eval(f(E,{name:Y[2],method:Y[0],args:q})),V=eval(f(D,{name:Y[2],args:q}));for(F=2;F<Y.length;F++)y.prototype[Y[F]]=W,y[Y[F]]=V}else{var Z={name:Y[2],args:q,method:Y[0]},$=eval(f(I,Z)),G=eval(f(A,Z)),J=eval(f(T,Z)),K=eval(f(P,Z));for(F=2;F<Y.length;F++)y.prototype[Y[F]]=$,y.prototype[Y[F]+"M"]=J,y.prototype[Y[F]+"S"]=G,y[Y[F]]=K}}return y}t.exports=n;var r=e("./dc/lu"),a=e("./dc/svd"),s=e("ml-array-utils"),o=e("./util"),l=e("./views/transpose"),d=e("./views/row"),u=e("./views/sub"),c=e("./views/selection"),m=e("./views/column"),h=e("./views/flipRow"),g=e("./views/flipColumn")},{"./dc/lu":105,"./dc/svd":107,"./util":113,"./views/column":115,"./views/flipColumn":116,"./views/flipRow":117,"./views/row":118,"./views/selection":119,"./views/sub":120,"./views/transpose":121,"ml-array-utils":100}],103:[function(e,t){"use strict";function n(e){if(!(this instanceof n))return new n(e);if(e=r.checkMatrix(e),!e.isSymmetric())throw new Error("Matrix is not symmetric");var t=e,a=t.rows,u=new r(a,a),l=!0,p,i,c;for(i=0;i<a;i++){var m=u[i],h=0;for(c=0;c<i;c++){var d=u[c],g=0;for(p=0;p<c;p++)g+=d[p]*m[p];m[c]=g=(t[i][c]-g)/u[c][c],h+=g*g}for(h=t[i][i]-h,l&=0<h,u[i][i]=o(C(h,0)),c=i+1;c<a;c++)u[i][c]=0}if(!l)throw new Error("Matrix is not positive definite");this.L=u}var r=e("../matrix").Matrix;n.prototype={get lowerTriangularMatrix(){return this.L},solve:function(e){e=r.checkMatrix(e);var t=this.L,n=t.rows;if(e.rows!==n)throw new Error("Matrix dimensions do not match");var a=e.columns,s=e.clone(),o,i,l;for(l=0;l<n;l++)for(i=0;i<a;i++){for(o=0;o<l;o++)s[l][i]-=s[o][i]*t[l][o];s[l][i]/=t[l][l]}for(l=n-1;0<=l;l--)for(i=0;i<a;i++){for(o=l+1;o<n;o++)s[l][i]-=s[o][i]*t[o][l];s[l][i]/=t[l][l]}return s}},t.exports=n},{"../matrix":111}],104:[function(e,t){"use strict";function r(t,o){if(o=Object.assign({},g,o),!(this instanceof r))return new r(t,o);if(t=p.checkMatrix(t),!t.isSquare())throw new Error("Matrix is not a square matrix");var c=t.columns,n=h(c,c,0),m=Array(c),d=Array(c),e=t,f=!1,y,i;if(f=!!o.assumeSymmetric||t.isSymmetric(),f){for(y=0;y<c;y++)for(i=0;i<c;i++)n[y][i]=e.get(y,i);a(c,d,m,n),s(c,d,m,n)}else{var b=h(c,c,0),x=Array(c);for(i=0;i<c;i++)for(y=0;y<c;y++)b[y][i]=e.get(y,i);l(c,b,x,n),u(c,d,m,n,b)}this.n=c,this.e=d,this.d=m,this.V=n}function a(t,n,e,r){var a,s,l,d,i,u,p,c;for(i=0;i<t;i++)e[i]=r[t-1][i];for(d=t-1;0<d;d--){for(c=0,l=0,u=0;u<d;u++)c+=_(e[u]);if(0===c)for(n[d]=e[d-1],i=0;i<d;i++)e[i]=r[d-1][i],r[d][i]=0,r[i][d]=0;else{for(u=0;u<d;u++)e[u]/=c,l+=e[u]*e[u];for(a=e[d-1],s=o(l),0<a&&(s=-s),n[d]=c*s,l-=a*s,e[d-1]=a-s,i=0;i<d;i++)n[i]=0;for(i=0;i<d;i++){for(a=e[i],r[i][d]=a,s=n[i]+r[i][i]*a,u=i+1;u<=d-1;u++)s+=r[u][i]*e[u],n[u]+=r[u][i]*a;n[i]=s}for(a=0,i=0;i<d;i++)n[i]/=l,a+=n[i]*e[i];for(p=a/(l+l),i=0;i<d;i++)n[i]-=p*e[i];for(i=0;i<d;i++){for(a=e[i],s=n[i],u=i;u<=d-1;u++)r[u][i]-=a*n[u]+s*e[u];e[i]=r[d-1][i],r[d][i]=0}}e[d]=l}for(d=0;d<t-1;d++){if(r[t-1][d]=r[d][d],r[d][d]=1,l=e[d+1],0!==l){for(u=0;u<=d;u++)e[u]=r[u][d+1]/l;for(i=0;i<=d;i++){for(s=0,u=0;u<=d;u++)s+=r[u][d+1]*r[u][i];for(u=0;u<=d;u++)r[u][i]-=s*e[u]}}for(u=0;u<=d;u++)r[u][d+1]=0}for(i=0;i<t;i++)e[i]=r[t-1][i],r[t-1][i]=0;r[t-1][t-1]=1,n[0]=0}function s(t,n,e,a){var o,d,u,i,h,g,l,y,p,b,x,c,k,w,v,S,j;for(u=1;u<t;u++)n[u-1]=n[u];n[t-1]=0;var E=0,f=0,D=2.220446049250313e-16;for(g=0;g<t;g++){for(f=C(f,_(e[g])+_(n[g])),l=g;l<t&&!(_(n[l])<=D*f);)l++;if(l>g){j=0;do{for(++j,o=e[g],y=(e[g+1]-o)/(2*n[g]),p=m(y,1),0>y&&(p=-p),e[g]=n[g]/(y+p),e[g+1]=n[g]*(y+p),b=e[g+1],d=o-e[g],u=g+2;u<t;u++)e[u]-=d;for(E+=d,y=e[l],x=1,c=x,k=x,w=n[g+1],v=0,S=0,u=l-1;u>=g;u--)for(k=c,c=x,S=v,o=x*n[u],d=x*y,p=m(y,n[u]),n[u+1]=v*p,v=n[u]/p,x=y/p,y=x*e[u]-v*o,e[u+1]=d+v*(x*o+v*e[u]),h=0;h<t;h++)d=a[h][u+1],a[h][u+1]=v*a[h][u]+x*d,a[h][u]=x*a[h][u]-v*d;y=-v*S*k*w*n[g]/b,n[g]=v*y,e[g]=x*y}while(_(n[g])>D*f)}e[g]+=E,n[g]=0}for(u=0;u<t-1;u++){for(h=u,y=e[u],i=u+1;i<t;i++)e[i]<y&&(h=i,y=e[i]);if(h!==u)for(e[h]=e[u],e[u]=y,i=0;i<t;i++)y=a[i][u],a[i][u]=a[i][h],a[i][h]=y}}function l(e,t,n,r){var a=0,s=e-1,l,d,u,p,i,c,m;for(c=a+1;c<=s-1;c++){for(m=0,p=c;p<=s;p++)m+=_(t[p][c-1]);if(0!==m){for(u=0,p=s;p>=c;p--)n[p]=t[p][c-1]/m,u+=n[p]*n[p];for(d=o(u),0<n[c]&&(d=-d),u-=n[c]*d,n[c]-=d,i=c;i<e;i++){for(l=0,p=s;p>=c;p--)l+=n[p]*t[p][i];for(l/=u,p=c;p<=s;p++)t[p][i]-=l*n[p]}for(p=0;p<=s;p++){for(l=0,i=s;i>=c;i--)l+=n[i]*t[p][i];for(l/=u,i=c;i<=s;i++)t[p][i]-=l*n[i]}n[c]=m*n[c],t[c][c-1]=m*d}}for(p=0;p<e;p++)for(i=0;i<e;i++)r[p][i]=p===i?1:0;for(c=s-1;c>=a+1;c--)if(0!==t[c][c-1]){for(p=c+1;p<=s;p++)n[p]=t[p][c-1];for(i=c;i<=s;i++){for(d=0,p=c;p<=s;p++)d+=n[p]*r[p][i];for(d=d/n[c]/t[c][c-1],p=c;p<=s;p++)r[p][i]+=d*n[p]}}}function u(a,u,e,d,h){var g=a-1,n=0,f=a-1,b=2.220446049250313e-16,v=0,S=0,E=0,p=0,D=0,A=0,T=0,I=0,P,i,j,k,l,m,t,H,x,y,F,O,R,N,L;for(P=0;P<a;P++)for((P<n||P>f)&&(e[P]=h[P][P],u[P]=0),i=C(P-1,0);i<a;i++)S+=_(h[P][i]);for(;g>=n;){for(k=g;k>n&&(A=_(h[k-1][k-1])+_(h[k][k]),0===A&&(A=S),!(_(h[k][k-1])<b*A));)k--;if(k===g)h[g][g]+=v,e[g]=h[g][g],u[g]=0,g--,I=0;else if(k===g-1){if(t=h[g][g-1]*h[g-1][g],E=(h[g-1][g-1]-h[g][g])/2,p=E*E+t,T=o(_(p)),h[g][g]+=v,h[g-1][g-1]=h[g-1][g-1]+v,H=h[g][g],0<=p){for(T=0<=E?E+T:E-T,e[g-1]=H+T,e[g]=e[g-1],0!==T&&(e[g]=H-t/T),u[g-1]=0,u[g]=0,H=h[g][g-1],A=_(H)+_(T),E=H/A,p=T/A,D=o(E*E+p*p),E/=D,p/=D,i=g-1;i<a;i++)T=h[g-1][i],h[g-1][i]=p*T+E*h[g][i],h[g][i]=p*h[g][i]-E*T;for(P=0;P<=g;P++)T=h[P][g-1],h[P][g-1]=p*T+E*h[P][g],h[P][g]=p*h[P][g]-E*T;for(P=n;P<=f;P++)T=d[P][g-1],d[P][g-1]=p*T+E*d[P][g],d[P][g]=p*d[P][g]-E*T}else e[g-1]=H+E,e[g]=H+E,u[g-1]=T,u[g]=-T;g-=2,I=0}else{if(H=h[g][g],x=0,t=0,k<g&&(x=h[g-1][g-1],t=h[g][g-1]*h[g-1][g]),10==I){for(v+=H,P=n;P<=g;P++)h[P][P]-=H;A=_(h[g][g-1])+_(h[g-1][g-2]),H=x=0.75*A,t=-0.4375*A*A}if(30==I&&(A=(x-H)/2,A=A*A+t,0<A)){for(A=o(A),x<H&&(A=-A),A=H-t/((x-H)/2+A),P=n;P<=g;P++)h[P][P]-=A;v+=A,H=x=t=0.964}for(++I,l=g-2;l>=k&&(T=h[l][l],D=H-T,A=x-T,E=(D*A-t)/h[l+1][l]+h[l][l+1],p=h[l+1][l+1]-T-D-A,D=h[l+2][l+1],A=_(E)+_(p)+_(D),E/=A,p/=A,D/=A,l!==k)&&!(_(h[l][l-1])*(_(p)+_(D))<b*(_(E)*(_(h[l-1][l-1])+_(T)+_(h[l+1][l+1]))));)l--;for(P=l+2;P<=g;P++)h[P][P-2]=0,P>l+2&&(h[P][P-3]=0);for(j=l;j<=g-1&&(N=j!==g-1,j!==l&&(E=h[j][j-1],p=h[j+1][j-1],D=N?h[j+2][j-1]:0,H=_(E)+_(p)+_(D),0!==H&&(E/=H,p/=H,D/=H)),0!==H);j++)if(A=o(E*E+p*p+D*D),0>E&&(A=-A),0!==A){for(j===l?k!==l&&(h[j][j-1]=-h[j][j-1]):h[j][j-1]=-A*H,E+=A,H=E/A,x=p/A,T=D/A,p/=E,D/=E,i=j;i<a;i++)E=h[j][i]+p*h[j+1][i],N&&(E+=D*h[j+2][i],h[j+2][i]=h[j+2][i]-E*T),h[j][i]-=E*H,h[j+1][i]=h[j+1][i]-E*x;for(P=0;P<=w(g,j+3);P++)E=H*h[P][j]+x*h[P][j+1],N&&(E+=T*h[P][j+2],h[P][j+2]=h[P][j+2]-E*D),h[P][j]-=E,h[P][j+1]=h[P][j+1]-E*p;for(P=n;P<=f;P++)E=H*d[P][j]+x*d[P][j+1],N&&(E+=T*d[P][j+2],d[P][j+2]=d[P][j+2]-E*D),d[P][j]-=E,d[P][j+1]=d[P][j+1]-E*p}}}if(0!==S){for(g=a-1;0<=g;g--)if(E=e[g],p=u[g],0===p)for(k=g,h[g][g]=1,P=g-1;0<=P;P--){for(t=h[P][P]-E,D=0,i=k;i<=g;i++)D+=h[P][i]*h[i][g];if(0>u[P])T=t,A=D;else if(k=P,0===u[P]?h[P][g]=0===t?-D/(b*S):-D/t:(H=h[P][P+1],x=h[P+1][P],p=(e[P]-E)*(e[P]-E)+u[P]*u[P],m=(H*A-T*D)/p,h[P][g]=m,h[P+1][g]=_(H)>_(T)?(-D-t*m)/H:(-A-x*m)/T),m=_(h[P][g]),1<b*m*m)for(i=P;i<=g;i++)h[i][g]/=m}else if(0>p)for(k=g-1,_(h[g][g-1])>_(h[g-1][g])?(h[g-1][g-1]=p/h[g][g-1],h[g-1][g]=-(h[g][g]-E)/h[g][g-1]):(L=c(0,-h[g-1][g],h[g-1][g-1]-E,p),h[g-1][g-1]=L[0],h[g-1][g]=L[1]),h[g][g-1]=0,h[g][g]=1,P=g-2;0<=P;P--){for(y=0,F=0,i=k;i<=g;i++)y+=h[P][i]*h[i][g-1],F+=h[P][i]*h[i][g];if(t=h[P][P]-E,0>u[P])T=t,D=y,A=F;else if(k=P,0===u[P]?(L=c(-y,-F,t,p),h[P][g-1]=L[0],h[P][g]=L[1]):(H=h[P][P+1],x=h[P+1][P],O=(e[P]-E)*(e[P]-E)+u[P]*u[P]-p*p,R=2*(e[P]-E)*p,0===O&&0===R&&(O=b*S*(_(t)+_(p)+_(H)+_(x)+_(T))),L=c(H*D-T*y+p*F,H*A-T*F-p*y,O,R),h[P][g-1]=L[0],h[P][g]=L[1],_(H)>_(T)+_(p)?(h[P+1][g-1]=(-y-t*h[P][g-1]+p*h[P][g])/H,h[P+1][g]=(-F-t*h[P][g]-p*h[P][g-1])/H):(L=c(-D-x*h[P][g-1],-A-x*h[P][g],T,p),h[P+1][g-1]=L[0],h[P+1][g]=L[1])),m=C(_(h[P][g-1]),_(h[P][g])),1<b*m*m)for(i=P;i<=g;i++)h[i][g-1]=h[i][g-1]/m,h[i][g]/=m}for(P=0;P<a;P++)if(P<n||P>f)for(i=P;i<a;i++)d[P][i]=h[P][i];for(i=a-1;i>=n;i--)for(P=n;P<=f;P++){for(T=0,j=n;j<=w(i,f);j++)T+=d[P][j]*h[j][i];d[P][i]=T}}}function c(e,t,i,n){var a,r;return _(i)>_(n)?(a=n/i,r=i+a*n,[(e+a*t)/r,(t-a*e)/r]):(a=i/n,r=n+a*i,[(a*e+t)/r,(a*t-e)/r])}var p=e("../matrix").Matrix,i=e("./util"),m=i.hypotenuse,h=i.getFilled2DArray,g={assumeSymmetric:!1};r.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return p.isMatrix(this.V)||(this.V=new p(this.V)),this.V},get diagonalMatrix(){var t=this.n,n=this.e,e=this.d,r=new p(t,t),a,i;for(a=0;a<t;a++){for(i=0;i<t;i++)r[a][i]=0;r[a][a]=e[a],0<n[a]?r[a][a+1]=n[a]:0>n[a]&&(r[a][a-1]=n[a])}return r}},t.exports=r},{"../matrix":111,"./util":108}],105:[function(e,t){"use strict";function n(e){if(!(this instanceof n))return new n(e);e=r.Matrix.checkMatrix(e);var a=e.clone(),o=a.rows,l=a.columns,d=Array(o),u=1,c,i,m,h,p,s,t,g,f,y;for(c=0;c<o;c++)d[c]=c;for(f=Array(o),i=0;i<l;i++){for(c=0;c<o;c++)f[c]=a[c][i];for(c=0;c<o;c++){for(g=a[c],y=w(c,i),p=0,m=0;m<y;m++)p+=g[m]*f[m];g[i]=f[c]-=p}for(h=i,c=i+1;c<o;c++)_(f[c])>_(f[h])&&(h=c);if(h!==i){for(m=0;m<l;m++)s=a[h][m],a[h][m]=a[i][m],a[i][m]=s;t=d[h],d[h]=d[i],d[i]=t,u=-u}if(i<o&&0!==a[i][i])for(c=i+1;c<o;c++)a[c][i]/=a[i][i]}this.LU=a,this.pivotVector=d,this.pivotSign=u}var r=e("../matrix");n.prototype={isSingular:function(){for(var e=this.LU,t=e.columns,i=0;i<t;i++)if(0===e[i][i])return!0;return!1},get determinant(){var e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");for(var t=this.pivotSign,i=e.columns,n=0;n<i;n++)t*=e[n][n];return t},get lowerTriangularMatrix(){for(var e=this.LU,t=e.rows,n=e.columns,a=new r.Matrix(t,n),s=0;s<t;s++)for(var i=0;i<n;i++)a[s][i]=s>i?e[s][i]:s===i?1:0;return a},get upperTriangularMatrix(){for(var e=this.LU,t=e.rows,n=e.columns,a=new r.Matrix(t,n),s=0;s<t;s++)for(var i=0;i<n;i++)a[s][i]=s<=i?e[s][i]:0;return a},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(e){e=r.Matrix.checkMatrix(e);var t=this.LU,n=t.rows;if(n!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var a=e.columns,s=e.subMatrixRow(this.pivotVector,0,a-1),o=t.columns,l,i,d;for(d=0;d<o;d++)for(l=d+1;l<o;l++)for(i=0;i<a;i++)s[l][i]-=s[d][i]*t[l][d];for(d=o-1;0<=d;d--){for(i=0;i<a;i++)s[d][i]/=t[d][d];for(l=0;l<d;l++)for(i=0;i<a;i++)s[l][i]-=s[d][i]*t[l][d]}return s}},t.exports=n},{"../matrix":111}],106:[function(e,t){"use strict";function r(e){if(!(this instanceof r))return new r(e);e=a.checkMatrix(e);var t=e.clone(),o=e.rows,l=e.columns,d=Array(l),u,i,p,c;for(p=0;p<l;p++){var m=0;for(u=p;u<o;u++)m=n(m,t[u][p]);if(0!==m){for(0>t[p][p]&&(m=-m),u=p;u<o;u++)t[u][p]/=m;for(t[p][p]+=1,i=p+1;i<l;i++){for(c=0,u=p;u<o;u++)c+=t[u][p]*t[u][i];for(c=-c/t[p][p],u=p;u<o;u++)t[u][i]+=c*t[u][p]}}d[p]=-m}this.QR=t,this.Rdiag=d}var a=e("../matrix").Matrix,n=e("./util").hypotenuse;r.prototype={solve:function(e){e=a.checkMatrix(e);var t=this.QR,r=t.rows;if(e.rows!==r)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var o=e.columns,l=e.clone(),d=t.columns,n,i,u,p;for(u=0;u<d;u++)for(i=0;i<o;i++){for(p=0,n=u;n<r;n++)p+=t[n][u]*l[n][i];for(p=-p/t[u][u],n=u;n<r;n++)l[n][i]+=p*t[n][u]}for(u=d-1;0<=u;u--){for(i=0;i<o;i++)l[u][i]/=this.Rdiag[u];for(n=0;n<u;n++)for(i=0;i<o;i++)l[n][i]-=l[u][i]*t[n][u]}return l.subMatrix(0,d-1,0,o-1)},isFullRank:function(){for(var e=this.QR.columns,t=0;t<e;t++)if(0===this.Rdiag[t])return!1;return!0},get upperTriangularMatrix(){var e=this.QR,t=e.columns,n=new a(t,t),r,i;for(r=0;r<t;r++)for(i=0;i<t;i++)n[r][i]=r<i?e[r][i]:r===i?this.Rdiag[r]:0;return n},get orthogonalMatrix(){var e=this.QR,t=e.rows,n=e.columns,r=new a(t,n),o,i,l,d;for(l=n-1;0<=l;l--){for(o=0;o<t;o++)r[o][l]=0;for(r[l][l]=1,i=l;i<n;i++)if(0!==e[l][l]){for(d=0,o=l;o<t;o++)d+=e[o][l]*r[o][i];for(d=-d/e[l][l],o=l;o<t;o++)r[o][i]+=d*e[o][l]}}return r}},t.exports=r},{"../matrix":111,"./util":108}],107:[function(e,t){"use strict";function r(h,y){if(!(this instanceof r))return new r(h,y);h=l.Matrix.checkMatrix(h),y=y||{};var x=h.rows,m=h.columns,n=w(x,m),v=!0,S=!0;!1===y.computeLeftSingularVectors&&(v=!1),!1===y.computeRightSingularVectors&&(S=!1);var E=!0===y.autoTranspose,D=!1,A;if(!(x<m))A=h.clone();else if(!E)A=h.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{A=h.transpose(),x=A.rows,m=A.columns,D=!0;var a=v;v=S,S=a}var T=Array(w(x+1,m)),s=u(x,n,0),I=u(m,m,0),P=Array(m),e=Array(x),H=w(x-1,m),F=C(0,w(m-2,x)),O,i,j,k,p,R,z,f,N,L,M,X,U,B,Y,q,W,V,b,c,Z;for(j=0,L=C(H,F);j<L;j++){if(j<H){for(T[j]=0,O=j;O<x;O++)T[j]=d(T[j],A[O][j]);if(0!==T[j]){for(0>A[j][j]&&(T[j]=-T[j]),O=j;O<x;O++)A[O][j]/=T[j];A[j][j]+=1}T[j]=-T[j]}for(i=j+1;i<m;i++){if(j<H&&0!==T[j]){for(p=0,O=j;O<x;O++)p+=A[O][j]*A[O][i];for(p=-p/A[j][j],O=j;O<x;O++)A[O][i]+=p*A[O][j]}P[i]=A[j][i]}if(v&&j<H)for(O=j;O<x;O++)s[O][j]=A[O][j];if(j<F){for(P[j]=0,O=j+1;O<m;O++)P[j]=d(P[j],P[O]);if(0!==P[j]){for(0>P[j+1]&&(P[j]=0-P[j]),O=j+1;O<m;O++)P[O]/=P[j];P[j+1]+=1}if(P[j]=-P[j],j+1<x&&0!==P[j]){for(O=j+1;O<x;O++)e[O]=0;for(i=j+1;i<m;i++)for(O=j+1;O<x;O++)e[O]+=P[i]*A[O][i];for(i=j+1;i<m;i++)for(p=-P[i]/P[j+1],O=j+1;O<x;O++)A[O][i]+=p*e[O]}if(S)for(O=j+1;O<m;O++)I[O][j]=P[O]}}if(k=w(m,x+1),H<m&&(T[H]=A[H][H]),x<k&&(T[k-1]=0),F+1<k&&(P[F]=A[F][k-1]),P[k-1]=0,v){for(i=H;i<n;i++){for(O=0;O<x;O++)s[O][i]=0;s[i][i]=1}for(j=H-1;0<=j;j--)if(0!==T[j]){for(i=j+1;i<n;i++){for(p=0,O=j;O<x;O++)p+=s[O][j]*s[O][i];for(p=-p/s[j][j],O=j;O<x;O++)s[O][i]+=p*s[O][j]}for(O=j;O<x;O++)s[O][j]=-s[O][j];for(s[j][j]=1+s[j][j],O=0;O<j-1;O++)s[O][j]=0}else{for(O=0;O<x;O++)s[O][j]=0;s[j][j]=1}}if(S)for(j=m-1;0<=j;j--){if(j<F&&0!==P[j])for(i=j+1;i<m;i++){for(p=0,O=j+1;O<m;O++)p+=I[O][j]*I[O][i];for(p=-p/I[j+1][j],O=j+1;O<m;O++)I[O][i]+=p*I[O][j]}for(O=0;O<m;O++)I[O][j]=0;I[j][j]=1}for(var g=k-1,$=0,G=2.220446049250313e-16;0<k;){for(j=k-2;-1<=j&&-1!==j;j--)if(_(P[j])<=G*(_(T[j])+_(T[j+1]))){P[j]=0;break}if(j===k-2)M=4;else{for(R=k-1;R>=j&&R!==j;R--)if(p=(R===k?0:_(P[R]))+(R===j+1?0:_(P[R-1])),_(T[R])<=G*p){T[R]=0;break}R===j?M=3:R===k-1?M=1:(M=2,j=R)}switch(j++,M){case 1:{for(z=P[k-2],P[k-2]=0,i=k-2;i>=j;i--)if(p=d(T[i],z),f=T[i]/p,N=z/p,T[i]=p,i!==j&&(z=-N*P[i-1],P[i-1]=f*P[i-1]),S)for(O=0;O<m;O++)p=f*I[O][i]+N*I[O][k-1],I[O][k-1]=-N*I[O][i]+f*I[O][k-1],I[O][i]=p;break}case 2:{for(z=P[j-1],P[j-1]=0,i=j;i<k;i++)if(p=d(T[i],z),f=T[i]/p,N=z/p,T[i]=p,z=-N*P[i],P[i]=f*P[i],v)for(O=0;O<x;O++)p=f*s[O][i]+N*s[O][j-1],s[O][j-1]=-N*s[O][i]+f*s[O][j-1],s[O][i]=p;break}case 3:{for(X=C(C(C(C(_(T[k-1]),_(T[k-2])),_(P[k-2])),_(T[j])),_(P[j])),U=T[k-1]/X,B=T[k-2]/X,Y=P[k-2]/X,q=T[j]/X,W=P[j]/X,V=((B+U)*(B-U)+Y*Y)/2,b=U*Y*(U*Y),c=0,(0!==V||0!==b)&&(c=o(V*V+b),0>V&&(c=-c),c=b/(V+c)),z=(q+U)*(q-U)+c,Z=q*W,i=j;i<k-1;i++){if(p=d(z,Z),f=z/p,N=Z/p,i!==j&&(P[i-1]=p),z=f*T[i]+N*P[i],P[i]=f*P[i]-N*T[i],Z=N*T[i+1],T[i+1]=f*T[i+1],S)for(O=0;O<m;O++)p=f*I[O][i]+N*I[O][i+1],I[O][i+1]=-N*I[O][i]+f*I[O][i+1],I[O][i]=p;if(p=d(z,Z),f=z/p,N=Z/p,T[i]=p,z=f*P[i]+N*T[i+1],T[i+1]=-N*P[i]+f*T[i+1],Z=N*P[i+1],P[i+1]=f*P[i+1],v&&i<x-1)for(O=0;O<x;O++)p=f*s[O][i]+N*s[O][i+1],s[O][i+1]=-N*s[O][i]+f*s[O][i+1],s[O][i]=p}P[k-2]=z,++$;break}case 4:{if(0>=T[j]&&(T[j]=0>T[j]?-T[j]:0,S))for(O=0;O<=g;O++)I[O][j]=-I[O][j];for(;j<g&&!(T[j]>=T[j+1]);){if(p=T[j],T[j]=T[j+1],T[j+1]=p,S&&j<m-1)for(O=0;O<m;O++)p=I[O][j+1],I[O][j+1]=I[O][j],I[O][j]=p;if(v&&j<x-1)for(O=0;O<x;O++)p=s[O][j+1],s[O][j+1]=s[O][j],s[O][j]=p;j++}$=0,k--;break}}}if(D){var J=I;I=s,s=J}this.m=x,this.n=m,this.s=T,this.U=s,this.V=I}var l=e("../matrix"),i=e("./util"),d=i.hypotenuse,u=i.getFilled2DArray;r.prototype={get condition(){return this.s[0]/this.s[w(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var e=C(this.m,this.n)*this.s[0]*2.220446049250313e-16,t=0,n=this.s,r=0,i=n.length;r<i;r++)n[r]>e&&t++;return t},get diagonal(){return this.s},get threshold(){return 2.220446049250313e-16/2*C(this.m,this.n)*this.s[0]},get leftSingularVectors(){return l.Matrix.isMatrix(this.U)||(this.U=new l.Matrix(this.U)),this.U},get rightSingularVectors(){return l.Matrix.isMatrix(this.V)||(this.V=new l.Matrix(this.V)),this.V},get diagonalMatrix(){return l.Matrix.diag(this.s)},solve:function(t){var n=this.threshold,e=this.s.length,r=l.Matrix.zeros(e,e),a;for(a=0;a<e;a++)r[a][a]=_(this.s[a])<=n?0:1/this.s[a];var i=this.U,s=this.rightSingularVectors,o=s.mmul(r),d=s.rows,u=i.length,p=l.Matrix.zeros(d,u),c,m,h;for(a=0;a<d;a++)for(c=0;c<u;c++){for(h=0,m=0;m<e;m++)h+=o[a][m]*i[c][m];p[a][c]=h}return p.mmul(t)},solveForDiagonal:function(e){return this.solve(l.Matrix.diag(e))},inverse:function(){var t=this.V,n=this.threshold,e=t.length,r=t[0].length,a=new l.Matrix(e,this.s.length),s,i;for(s=0;s<e;s++)for(i=0;i<r;i++)a[s][i]=_(this.s[i])>n?t[s][i]/this.s[i]:0;var o=this.U,d=o.length,u=o[0].length,p=new l.Matrix(e,d),c,m;for(s=0;s<e;s++)for(i=0;i<d;i++){for(m=0,c=0;c<u;c++)m+=a[s][c]*o[i][c];p[s][i]=m}return p}},t.exports=r},{"../matrix":111,"./util":108}],108:[function(e,t,i){"use strict";i.hypotenuse=function(e,t){var i;return _(e)>_(t)?(i=t/e,_(e)*o(1+i*i)):0===t?0:(i=e/t,_(t)*o(1+i*i))},i.getEmpty2DArray=function(e,t){for(var n=Array(e),r=0;r<e;r++)n[r]=Array(t);return n},i.getFilled2DArray=function(e,t,n){for(var r=Array(e),a=0;a<e;a++){r[a]=Array(t);for(var i=0;i<t;i++)r[a][i]=n}return r}},{}],109:[function(e,t){"use strict";function i(e){return e=r.checkMatrix(e),n(e,r.eye(e.rows))}function n(e,t){return e=r.checkMatrix(e),t=r.checkMatrix(t),e.isSquare()?new o(e).solve(t):new l(e).solve(t)}var r=e("./matrix").Matrix,a=e("./dc/svd"),s=e("./dc/evd"),o=e("./dc/lu"),l=e("./dc/qr"),d=e("./dc/cholesky");r.inverse=r.inv=i,r.prototype.inverse=r.prototype.inv=function(){return i(this)},r.solve=n,r.prototype.solve=function(e){return n(this,e)},t.exports={SingularValueDecomposition:a,SVD:a,EigenvalueDecomposition:s,EVD:s,LuDecomposition:o,LU:o,QrDecomposition:l,QR:l,CholeskyDecomposition:d,CHO:d,inverse:i,solve:n}},{"./dc/cholesky":103,"./dc/evd":104,"./dc/lu":105,"./dc/qr":106,"./dc/svd":107,"./matrix":111}],110:[function(e,t){"use strict";t.exports=e("./matrix").Matrix,t.exports.Decompositions=t.exports.DC=e("./decompositions")},{"./decompositions":109,"./matrix":111}],111:[function(e,t,i){"use strict";e("./symbol-species");var r=e("./abstractMatrix"),a=e("./util");class s extends r(Array){constructor(e,t){var r;if(1===arguments.length&&"number"==typeof e)return Array(e);if(s.isMatrix(e))return e.clone();if(n(e)&&0<e){if(super(e),n(t)&&0<t)for(r=0;r<e;r++)this[r]=Array(t);else throw new TypeError("nColumns must be a positive integer");}else if(Array.isArray(e)){var i=e;if(e=i.length,t=i[0].length,"number"!=typeof t||0===t)throw new TypeError("Data must be a 2D array with at least one element");for(super(e),r=0;r<e;r++){if(i[r].length!==t)throw new RangeError("Inconsistent array dimensions");this[r]=[].concat(i[r])}}else throw new TypeError("First argument must be a positive number or an array");return this.rows=e,this.columns=t,this}set(e,t,i){return this[e][t]=i,this}get(e,t){return this[e][t]}clone(){for(var e=new this.constructor[Symbol.species](this.rows,this.columns),t=0;t<this.rows;t++)for(var i=0;i<this.columns;i++)e.set(t,i,this.get(t,i));return e}removeRow(e){if(a.checkRowIndex(this,e),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(e,1),this.rows-=1,this}addRow(e,t){return void 0===t&&(t=e,e=this.rows),a.checkRowIndex(this,e,!0),t=a.checkRowVector(this,t,!0),this.splice(e,0,t),this.rows+=1,this}removeColumn(e){if(a.checkColumnIndex(this,e),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var t=0;t<this.rows;t++)this[t].splice(e,1);return this.columns-=1,this}addColumn(e,t){"undefined"==typeof t&&(t=e,e=this.columns),a.checkColumnIndex(this,e,!0),t=a.checkColumnVector(this,t);for(var n=0;n<this.rows;n++)this[n].splice(e,0,t[n]);return this.columns+=1,this}}i.Matrix=s,s.abstractMatrix=r},{"./abstractMatrix":102,"./symbol-species":112,"./util":113}],112:[function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},{}],113:[function(e,t,i){"use strict";var n=e("./matrix");i.checkRowIndex=function(e,t,i){var n=i?e.rows:e.rows-1;if(0>t||t>n)throw new RangeError("Row index out of range")},i.checkColumnIndex=function(e,t,i){var n=i?e.columns:e.columns-1;if(0>t||t>n)throw new RangeError("Column index out of range")},i.checkRowVector=function(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t},i.checkColumnVector=function(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t},i.checkIndices=function(e,t,i){var n=t.some((t)=>{return 0>t||t>=e.rows}),r=i.some((t)=>{return 0>t||t>=e.columns});if(n||r)throw new RangeError("Indices are out of range");if("object"!=typeof t||"object"!=typeof i)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(t)||(t=Array.from(t)),Array.isArray(i)||(t=Array.from(i)),{row:t,column:i}},i.checkRange=function(e,t,i,n,r){if(5!==arguments.length)throw new TypeError("Invalid argument type");var a=Array.from(arguments).slice(1).some(function(e){return"number"!=typeof e});if(a)throw new TypeError("Invalid argument type");if(t>i||n>r||0>t||t>=e.rows||0>i||i>=e.rows||0>n||n>=e.columns||0>r||r>=e.columns)throw new RangeError("Submatrix indices are out of range")},i.getRange=function(e,t){for(var n=Array(t-e+1),r=0;r<n.length;r++)n[r]=e+r;return n},i.sumByRow=function(e){for(var t=n.Matrix.zeros(e.rows,1),r=0;r<e.rows;++r)for(var i=0;i<e.columns;++i)t.set(r,0,t.get(r,0)+e.get(r,i));return t},i.sumByColumn=function(e){for(var t=n.Matrix.zeros(1,e.columns),r=0;r<e.rows;++r)for(var i=0;i<e.columns;++i)t.set(0,i,t.get(0,i)+e.get(r,i));return t},i.sumAll=function(e){for(var t=0,n=0;n<e.rows;n++)for(var i=0;i<e.columns;i++)t+=e.get(n,i);return t}},{"./matrix":111}],114:[function(e,t){"use strict";var i=e("../abstractMatrix"),n=e("../matrix");class r extends i(){constructor(e,t,i){super(),this.matrix=e,this.rows=t,this.columns=i}static get[Symbol.species](){return n.Matrix}}t.exports=r},{"../abstractMatrix":102,"../matrix":111}],115:[function(e,t){"use strict";var i=e("./base");t.exports=class extends i{constructor(e,t){super(e,e.rows,1),this.column=t}set(e,t,i){return this.matrix.set(e,this.column,i),this}get(e){return this.matrix.get(e,this.column)}}},{"./base":114}],116:[function(e,t){"use strict";var i=e("./base");t.exports=class extends i{constructor(e){super(e,e.rows,e.columns)}set(e,t,i){return this.matrix.set(e,this.columns-t-1,i),this}get(e,t){return this.matrix.get(e,this.columns-t-1)}}},{"./base":114}],117:[function(e,t){"use strict";var i=e("./base");t.exports=class extends i{constructor(e){super(e,e.rows,e.columns)}set(e,t,i){return this.matrix.set(this.rows-e-1,t,i),this}get(e,t){return this.matrix.get(this.rows-e-1,t)}}},{"./base":114}],118:[function(e,t){"use strict";var i=e("./base");t.exports=class extends i{constructor(e,t){super(e,1,e.columns),this.row=t}set(e,t,i){return this.matrix.set(this.row,t,i),this}get(e,t){return this.matrix.get(this.row,t)}}},{"./base":114}],119:[function(e,t){"use strict";var i=e("./base"),n=e("../util");t.exports=class extends i{constructor(e,t,i){var r=n.checkIndices(e,t,i);super(e,r.row.length,r.column.length),this.rowIndices=r.row,this.columnIndices=r.column}set(e,t,i){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],i),this}get(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}}},{"../util":113,"./base":114}],120:[function(e,t){"use strict";var i=e("./base"),n=e("../util");t.exports=class extends i{constructor(e,t,i,r,a){n.checkRange(e,t,i,r,a),super(e,i-t+1,a-r+1),this.startRow=t,this.startColumn=r}set(e,t,i){return this.matrix.set(this.startRow+e,this.startColumn+t,i),this}get(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}}},{"../util":113,"./base":114}],121:[function(e,t){"use strict";var i=e("./base");t.exports=class extends i{constructor(e){super(e,e.columns,e.rows)}set(e,t,i){return this.matrix.set(t,e,i),this}get(e,t){return this.matrix.get(t,e)}}},{"./base":114}],122:[function(e,t){"use strict";function n(e,t){var n=t.length/3,r=e.rows,a=c.zeros(e.length,1),s,o,i,l;for(o=0;o<n;o++)for(l=f(t[o+2*n][0]/2,2),s=t[o+n][0]*l,i=0;i<r;i++)a[i][0]+=s/(f(e[i][0]-t[o][0],2)+l);return a}function i(e,t){for(var n=t[1][0]*f(t[2][0]/2,2),r=e.rows,a=new c(e.rows,e.columns),s=0;s<r;s++)a[s][0]=n/(f(e[s][0]-t[0][0],2)+f(t[2][0]/2,2));return a}function r(e,t){for(var n=t[2][0]*t[2][0]/2,r=e.rows,a=new c(e.rows,e.columns),s=0;s<r;s++)a[s][0]=t[1][0]*d(-(e[s][0]-t[0][0])*(e[s][0]-t[0][0])/n);return a}function a(e,n,r){r=r||{};var a=l(e,r.percentage||0);if(null===a||3>a[0].rows)return null;var s=a[0],t=a[1],d=a[2],p=s.rows,m=[p/o(t.dot(t))],r=Object.create(r.LMOptions||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),h=_(s[0][0]-s[1][0]),g=new c([[-h/1e4],[-0.001],[-h/1e4]]),f=new c([[n.x],[1],[n.width]]),y=new c([[n.x-h],[0.75],[n.width/4]]),b=new c([[n.x+h],[1.25],[4*n.width]]),x=u.optimize(i,f,s,t,m,g,y,b,[],r);return x=x.p,[x[0],[x[1][0]*d],x[2]]}function s(e,i,n){n=n||{};var a=l(e,n.percentage||0);if(null===a||3>a[0].rows)return null;var s=a[0],t=a[1],d=a[2],p=s.rows,m=[p/o(t.dot(t))],n=Object.create(n.LMOptions||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),h=_(s[0][0]-s[1][0]),g=new c([[-h/1e4],[-0.001],[-h/1e4]]),g=new c([[-_(s[0][0]-s[1][0])/1e3],[-0.001],[-i.width/1e3]]),f=new c([[i.x],[1],[i.width]]),y=new c([[i.x-h],[0.75],[i.width/4]]),b=new c([[i.x+h],[1.25],[4*i.width]]),x=u.optimize(r,f,s,t,m,g,y,b,[],n);return x=x.p,[x[0],[x[1][0]*d],x[2]]}function l(e,n){var r=e.length,a=null,t=null,s=0,o,l,d;if(2==r){var i=e[0].length;if(a=Array(i),t=Array(i),o=e[0],l=e[1],"number"==typeof o[0])for(d=0;d<i;d++)a[d]=o[d],t[d]=l[d],l[d]>s&&(s=l[d]);else if("object"==typeof o[0])for(d=0;d<i;d++)a[d]=o[d][0],t[d]=l[d][0],l[d][0]>s&&(s=l[d][0])}else{var i=r;for(a=Array(i),t=Array(i),d=0;d<i;d++)a[d]=e[d][0],t[d]=e[d][1],t[d]>s&&(s=t[d])}for(d=0;d<i;d++)t[d]/=s;if(n)for(d=i-1;0<=d;d--)t[d]<n&&(t.splice(d,1),a.splice(d,1));return 0<a.length?[new c([a]).transpose(),new c([t]).transpose(),s]:null}var u=e("ml-curve-fitting"),p=u.Matrix.algebra,c=e("ml-matrix");t.exports.optimizeSingleLorentzian=a,t.exports.optimizeLorentzianSum=function(e,r,a){var s=l(e);if(null===s||3>s[0].rows)return null;var o=s[0],t=s[1],d=s[2],m=o.rows,h=[m/p.sqrt(t.dot(t))],a=Object.create(a||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),g=r.length,f=new c(3*g,1),y=new c(3*g,1),b=new c(3*g,1),x=new c(3*g,1),k=_(o[0][0]-o[1][0]),C;for(C=0;C<g;C++)f[C][0]=r[C].x,f[C+g][0]=1,f[C+2*g][0]=r[C].width,y[C][0]=r[C].x-k,y[C+g][0]=0,y[C+2*g][0]=r[C].width/4,b[C][0]=r[C].x+k,b[C+g][0]=1.5,b[C+2*g][0]=4*r[C].width,x[C][0]=-k/1e3,x[C+g][0]=-1e-3,x[C+2*g][0]=-k/1e3;var x=-_(o[0][0]-o[1][0])/1e4,i=u.optimize(n,f,o,t,h,x,y,b,[],a);i=i.p;var w=Array(g);for(C=0;C<g;C++)w[C]=[i[C],[i[C+g][0]*d],i[C+2*g]];return w},t.exports.optimizeSingleGaussian=s,t.exports.optimizeGaussianSum=function(e,r,a){var s=l(e);if(null===s||3>s[0].rows)return null;var o=s[0],t=s[1],d=s[2],m=o.rows,h=new c(m,1),g=m/p.sqrt(t.dot(t)),f;for(f=0;f<m;f++)h[f][0]=g;var a=Object.create(a||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,2]),i=r.length,y=new c(3*i,1),b=new c(3*i,1),x=new c(3*i,1),k=new c(3*i,1),C=_(o[0][0]-o[1][0]);for(f=0;f<i;f++)y[f][0]=r[f].x,y[f+i][0]=r[f].y/d,y[f+2*i][0]=r[f].width,b[f][0]=r[f].x-C,b[f+i][0]=0.8*r[f].y/d,b[f+2*i][0]=r[f].width/2,x[f][0]=r[f].x+C,x[f+i][0]=1.2*r[f].y/d,x[f+2*i][0]=2*r[f].width,k[f][0]=-C/1e3,k[f+i][0]=-1e-3,k[f+2*i][0]=-C/1e3;var w=u.optimize(n,y,o,t,h,k,b,x,[],a);w=w.p;var v=Array(i);for(f=0;f<i;f++)v[f]=[w[f],[w[f+i][0]*d],w[f+2*i]];return v},t.exports.singleGaussian=r,t.exports.singleLorentzian=i,t.exports.optimizeGaussianTrain=function(e,n,r){var a=l(e);if(null===a||3>a[0].rows)return null;for(var o=a[0],t=a[1],d=a[2],u=0,p=o.length,c=[],m=0,i,h,g,d,f;m<n.length;m++){for(i=n[m].x-1.5*n[m].width;o[u++]<i&&u<p;);for(i=n[m].x+1.5*n[m].width,h=[],g=[];o[u]<=i&&u<p;)h.push(o[u][0]),g.push(t[u][0]*d),u++;f=s([h,g],n[m],r),f?c.push({x:f[0][0],y:f[1][0],width:f[2][0],opt:!0}):c.push({x:n[m].x,y:n[m].y,width:n[m].width,opt:!1})}return c},t.exports.optimizeLorentzianTrain=function(e,n,r){var s=l(e);if(null===s||3>s[0].rows)return null;for(var o=s[0],t=s[1],d=s[2],u=0,p=o.length,c=[],m=0,i,h,g,d,f;m<n.length;m++){for(i=n[m].x-1.5*n[m].width;o[u++]<i&&u<p;);for(i=n[m].x+1.5*n[m].width,h=[],g=[];o[u]<=i&&u<p;)h.push(o[u][0]),g.push(t[u][0]*d),u++;f=a([h,g],n[m],r),f?c.push({x:f[0][0],y:f[1][0],width:f[2][0],opt:!0}):c.push({x:n[m].x,y:n[m].y,width:n[m].width,opt:!1})}return c}},{"ml-curve-fitting":73,"ml-matrix":110}],123:[function(e,t){"use strict";function r(e,t,n,r){for(var a=0,s=0,o=t-n;o<t+n;o++)0<=o&&o<e.length-1&&(a+=e[o+1]-e[o],s++);return f(a/s,r)}function a(e,t,i,n){var r=0;return r=0<i?(4*i-2)/(i*(2*t-i+1))*(e*a(e,t,i-1,n)+n*a(e,t,i-1,n-1))-(i-1)*(2*t+i)/(i*(2*t-i+1))*a(e,t,i-2,n):0==i&&0==n?1:0,r}function o(e,t){var i=1;if(e>=t)for(var n=e-t+1;n<=e;n++)i*=n;return i}function i(e,i,t,r,n){for(var s=0,l=0;l<=r;l++)s+=(2*l+1)*(o(2*t,l)/o(2*t+l+1,l+1))*a(e,t,l,0)*a(i,t,l,n);return s}function s(e,r,n){for(var a=Array(e),s=p(e/2),o=-s;o<=s;o++){a[o+s]=Array(e);for(var t=-s;t<=s;t++)a[o+s][t+s]=i(t,o,s,r,n)}return a}var u=e("extend"),l=e("ml-stat"),c={windowSize:9,derivative:0,polynomial:3};t.exports=function(e,t,a){if(a=u({},c,a),0==a.windowSize%2||5>a.windowSize||!n(a.windowSize))throw new RangeError("Invalid window size (should be odd and at least 5 integer number)");if(a.windowSize>e.length)throw new RangeError("Window size is higher than the data length "+a.windowSize+">"+e.length);if(0>a.derivative||!n(a.derivative))throw new RangeError("Derivative should be a positive integer");if(1>a.polynomial||!n(a.polynomial))throw new RangeError("Polynomial should be a positive integer");6<=a.polynomial&&console.warn("You should not use polynomial grade higher than 5 if you are not sure that your data arises from such a model. Possible polynomial oscillation problems");var o=a.windowSize,m=p(o/2),h=e.length,g=Array(h),y=s(o,a.polynomial,a.derivative),b=0,x=!0;"[object Array]"===Object.prototype.toString.call(t)?x=!1:b=f(t,a.derivative);for(var _=0;_<m;_++){for(var i=y[m-_-1],k=y[m+_+1],C=0,w=0,v=0;v<o;v++)C+=i[v]*e[v],w+=k[v]*e[h-o+v-1];x?(g[m-_-1]=C/b,g[h-m+_]=w/b):(b=r(t,m-_-1,m,a.derivative),g[m-_-1]=C/b,b=r(t,h-m+_,m,a.derivative),g[h-m+_]=w/b)}for(var l=y[m],_=o,S;_<h+1;_++){S=0;for(var v=0;v<o;v++)S+=l[v]*e[v+_-o];x||(b=r(t,_-m-1,m,a.derivative)),g[_-m-1]=S/b}return g}},{extend:10,"ml-stat":127}],124:[function(e,t){"use strict";function n(e){var t=o(2*e.length+0.25)-0.5,n=[],a=Array(t),s=t,l=0,i=[];for(l=t-1;0<=l;l--)a[l]=1;for(var d=-1,u=[];0<s;){if(0===u.length){for(i=Array(t),l=0;l<t;l++)i[l]=0;for(n.push(i),d=0;0==a[d];d++);}else d=u.splice(0,1);i[d]=1,a[d]=0,s--;var p=Array(t);for(l=0;l<t;l++){var m=C(d,l),c=w(d,l);p[l]=e[c*(2*t-c-1)/2+m],1==p[l]&&1==a[l]&&0==i[l]&&(u.push(l),i[l]=1)}}return n}var r={threshold:0,out:"assignment"};t.exports=function(e,t){var a=Object.assign({},r,t),s,o,i,l;if("number"==typeof e[0])s=n(e);else if("object"==typeof e[0]){for(var d=e.length,u=Array(d*(d+1)/2),p=0,o=0;o<d;o++)for(var i=o;i<d;i++)u[p++]=e[o][i]>a.threshold?1:0;s=n(u)}if("indexes"===a.out||"values"===a.out){var c=Array(s.length);for(o=0;o<s.length;o++)for(c[o]=[],i=0;i<s[o].length;i++)0!=s[o][i]&&c[o].push(i);if("values"===a.out){var m=Array(c.length);for(o=0;o<c.length;o++)for(m[o]=Array(c[o].length),i=0;i<c[o].length;i++)for(m[o][i]=Array(c[o].length),l=0;l<c[o].length;l++)m[o][i][l]=e[c[o][i]][c[o][l]];return m}return c}return s}},{}],125:[function(e,t,n){"use strict";function r(e,t){for(var n in t)e=e.replace(new RegExp("%"+n+"%","g"),t[n]);return e}var a=e("ml-hash-table");class s{constructor(e,t,n={}){if(e instanceof s){var r=e;return void this._init(r.rows,r.columns,r.elements.clone(),r.threshold)}if(Array.isArray(e)){var o=e;e=o.length,n=t||{},t=o[0].length,this._init(e,t,new a(n),n.threshold);for(var l=0;l<e;l++)for(var i=0,d;i<t;i++)d=o[l][i],this.threshold&&_(d)<this.threshold&&(d=0),0!==d&&this.elements.set(l*t+i,o[l][i])}else this._init(e,t,new a(n),n.threshold)}_init(e,t,i,n){this.rows=e,this.columns=t,this.elements=i,this.threshold=n||0}static eye(e=1,t=e){for(var n=w(e,t),r=new s(e,t,{initialCapacity:n}),a=0;a<n;a++)r.set(a,a,1);return r}clone(){return new s(this)}to2DArray(){for(var e=Array(this.rows),t=0;t<this.rows;t++){e[t]=Array(this.columns);for(var i=0;i<this.columns;i++)e[t][i]=this.get(t,i)}return e}isSquare(){return this.rows===this.columns}isSymmetric(){if(!this.isSquare())return!1;var e=!0;return this.forEachNonZero((t,i,n)=>{return this.get(i,t)===n?n:(e=!1,!1)}),e}get cardinality(){return this.elements.size}get size(){return this.rows*this.columns}get(e,t){return this.elements.get(e*this.columns+t)}set(e,t,i){return this.threshold&&_(i)<this.threshold&&(i=0),0===i?this.elements.remove(e*this.columns+t):this.elements.set(e*this.columns+t,i),this}mmul(e){this.columns!==e.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");var t=this.rows,i=e.columns,n=new s(t,i);return this.forEachNonZero((t,i,r)=>{return e.forEachNonZero((e,a,s)=>{return i===e&&n.set(t,a,n.get(t,a)+r*s),s}),r}),n}kroneckerProduct(e){var t=this.rows,i=this.columns,n=e.rows,r=e.columns,a=new s(t*n,i*r,{initialCapacity:this.cardinality*e.cardinality});return this.forEachNonZero((t,i,s)=>{return e.forEachNonZero((e,o,l)=>{return a.set(n*t+e,r*i+o,s*l),l}),s}),a}forEachNonZero(e){return this.elements.forEachPair((t,n)=>{var a=0|t/this.columns,i=t%this.columns,s=e(a,i,n);return!1!==s&&(this.threshold&&_(s)<this.threshold&&(s=0),s!==n&&(0===s?this.elements.remove(t,!0):this.elements.set(t,s)),!0)}),this.elements.maybeShrinkCapacity(),this}getNonZeros(){var e=this.cardinality,t=Array(e),n=Array(e),r=Array(e),a=0;return this.forEachNonZero((e,i,s)=>{return t[a]=e,n[a]=i,r[a]=s,a++,s}),{rows:t,columns:n,values:r}}setThreshold(e){return 0!==e&&e!==this.threshold&&(this.threshold=e,this.forEachNonZero((e,t,i)=>i)),this}}s.prototype.klass="Matrix",s.identity=s.eye,s.prototype.tensorProduct=s.prototype.kroneckerProduct,t.exports=s;var o=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,l=`
(function %name%S(value) {
    this.forEachNonZero((i, j, v) => v %op% value);
    return this;
})
`,d=`
(function %name%M(matrix) {
    matrix.forEachNonZero((i, j, v) => {
        this.set(i, j, this.get(i, j) %op% v);
        return v;
    });
    return this;
})
`,u=`
(function %name%(matrix, value) {
    var newMatrix = new SparseMatrix(matrix);
    return newMatrix.%name%(value);
})
`,p=`
(function %name%() {
    this.forEachNonZero((i, j, v) => %method%(v));
    return this;
})
`,c=`
(function %name%(matrix) {
    var newMatrix = new SparseMatrix(matrix);
    return newMatrix.%name%();
})
`,m=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]];for(var h of m)for(var g=1;g<h.length;g++)s.prototype[h[g]]=eval(r(o,{name:h[g],op:h[0]})),s.prototype[h[g]+"S"]=eval(r(l,{name:h[g]+"S",op:h[0]})),s.prototype[h[g]+"M"]=eval(r(d,{name:h[g]+"M",op:h[0]})),s[h[g]]=eval(r(u,{name:h[g]}));var i=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(e){i.push(["Math."+e,e])});for(var f of i)for(var g=1;g<f.length;g++)s.prototype[f[g]]=eval(r(p,{name:f[g],method:f[0]})),s[f[g]]=eval(r(c,{name:f[g]}))},{"ml-hash-table":85}],126:[function(t,i,r){"use strict";function n(e,t){return e-t}r.sum=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t},r.max=function(e){for(var t=e[0],n=e.length,r=1;r<n;r++)e[r]>t&&(t=e[r]);return t},r.min=function(e){for(var t=e[0],n=e.length,r=1;r<n;r++)e[r]<t&&(t=e[r]);return t},r.minMax=function(e){for(var t=e[0],n=e[0],r=e.length,a=1;a<r;a++)e[a]<t&&(t=e[a]),e[a]>n&&(n=e[a]);return{min:t,max:n}},r.arithmeticMean=function(e){for(var t=0,n=e.length,r=0;r<n;r++)t+=e[r];return t/n},r.mean=r.arithmeticMean,r.geometricMean=function(e){for(var t=1,n=e.length,r=0;r<n;r++)t*=e[r];return f(t,1/n)},r.logMean=function(e){for(var t=0,n=e.length,r=0;r<n;r++)t+=u(e[r]);return t/n},r.grandMean=function(e,t){for(var r=0,a=0,n=e.length,s=0;s<n;s++)r+=t[s]*e[s],a+=t[s];return r/a},r.truncatedMean=function(e,t,r){r===void 0&&(r=!1),r||(e=[].concat(e).sort(n));for(var a=e.length,s=p(a*t),o=0,l=s;l<a-s;l++)o+=e[l];return o/(a-2*s)},r.harmonicMean=function(e){for(var t=0,n=e.length,r=0;r<n;r++){if(0===e[r])throw new RangeError("value at index "+r+"is zero");t+=1/e[r]}return n/t},r.contraHarmonicMean=function(e){for(var t=0,n=0,r=e.length,a=0;a<r;a++)t+=e[a]*e[a],n+=e[a];if(0>n)throw new RangeError("sum of values is negative");return t/n},r.median=function(e,t){t===void 0&&(t=!1),t||(e=[].concat(e).sort(n));var i=e.length,r=p(i/2);return 0==i%2?0.5*(e[r-1]+e[r]):e[r]},r.variance=function(e,t){t===void 0&&(t=!0);for(var n=r.mean(e),a=0,s=e.length,o=0,i;o<s;o++)i=e[o]-n,a+=i*i;return t?a/(s-1):a/s},r.standardDeviation=function(e,t){return o(r.variance(e,t))},r.standardError=function(e){return r.standardDeviation(e)/o(e.length)},r.robustMeanAndStdev=function(e){var t=0,r=0,a=e.length,s=0;for(s=0;s<a;s++)t+=e[s];t/=a;var i=Array(a);for(s=0;s<a;s++)i[s]=_(e[s]-t);return i.sort(n),r=1==a%2?i[(a-1)/2]/0.6745:0.5*(i[a/2]+i[a/2-1])/0.6745,{mean:t,stdev:r}},r.quartiles=function(t,i){"undefined"==typeof i&&(i=!1),i||(t=[].concat(t).sort(n));var a=t.length/4,s=t[e(a)-1],o=r.median(t,!0),l=t[e(3*a)-1];return{q1:s,q2:o,q3:l}},r.pooledStandardDeviation=function(e,t){return o(r.pooledVariance(e,t))},r.pooledVariance=function(e,t){"undefined"==typeof t&&(t=!0);for(var n=0,a=0,s=e.length,o=0;o<s;o++){var i=e[o],l=r.variance(i);n+=(i.length-1)*l,a+=t?i.length-1:i.length}return n/a},r.mode=function(e){var t=e.length,n=Array(t),r;for(r=0;r<t;r++)n[r]=0;var i=Array(t),a=0;for(r=0;r<t;r++){var s=i.indexOf(e[r]);0<=s?n[s]++:(i[a]=e[r],n[a]=1,a++)}var o=0,l=0;for(r=0;r<a;r++)n[r]>o&&(o=n[r],l=r);return i[l]},r.covariance=function(e,t,n){"undefined"==typeof n&&(n=!0);var a=r.mean(e),s=r.mean(t);if(e.length!==t.length)throw"Vectors do not have the same dimensions";for(var o=0,d=e.length,l=0;l<d;l++){var i=e[l]-a,u=t[l]-s;o+=i*u}return n?o/(d-1):o/d},r.skewness=function(e,t){"undefined"==typeof t&&(t=!0);for(var n=r.mean(e),s=0,d=0,u=e.length,l=0,i;l<u;l++)i=e[l]-n,s+=i*i,d+=i*i*i;var p=s/u,c=d/u,m=c/f(p,3/2);if(t){var h=o(u*(u-1));return h/(u-2)*m}return m},r.kurtosis=function(e,t){"undefined"==typeof t&&(t=!0);for(var a=r.mean(e),s=e.length,n=0,o=0,l=0,i;l<s;l++)i=e[l]-a,n+=i*i,o+=i*i*i*i;var d=n/s,u=o/s;if(t){var p=n/(s-1),c=o/(p*p);return s*(s+1)/((s-1)*(s-2)*(s-3))*c-3*((s-1)*(s-1)/((s-2)*(s-3)))}return u/(d*d)-3},r.entropy=function(e,t){"undefined"==typeof t&&(t=0);for(var n=0,r=e.length,a=0;a<r;a++)n+=e[a]*u(e[a]+t);return-n},r.weightedMean=function(e,t){for(var n=0,r=e.length,a=0;a<r;a++)n+=e[a]*t[a];return n},r.weightedStandardDeviation=function(e,t){return o(r.weightedVariance(e,t))},r.weightedVariance=function(e,t){for(var n=r.weightedMean(e,t),s=0,o=e.length,l=0,a=0,d=0;d<o;d++){var i=e[d]-n,u=t[d];s+=u*(i*i),a+=u,l+=u*u}return s*(a/(a*a-l))},r.center=function(e,t){"undefined"==typeof t&&(t=!1);var n=e;t||(n=[].concat(e));for(var a=r.mean(n),s=n.length,o=0;o<s;o++)n[o]-=a},r.standardize=function(e,t,n){"undefined"==typeof t&&(t=r.standardDeviation(e)),"undefined"==typeof n&&(n=!1);for(var a=e.length,s=n?e:Array(a),o=0;o<a;o++)s[o]=e[o]/t;return s},r.cumulativeSum=function(e){var t=e.length,n=Array(t);n[0]=e[0];for(var r=1;r<t;r++)n[r]=n[r-1]+e[r];return n}},{}],127:[function(e,t,i){"use strict";i.array=e("./array"),i.matrix=e("./matrix")},{"./array":126,"./matrix":128}],128:[function(e,t,r){"use strict";function n(e,t){return e-t}var a=e("./array");r.max=function(e){for(var t=-Infinity,n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++)e[n][i]>t&&(t=e[n][i]);return t},r.min=function(e){for(var t=Infinity,n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++)e[n][i]<t&&(t=e[n][i]);return t},r.minMax=function(e){for(var t=Infinity,n=-Infinity,r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)e[r][i]<t&&(t=e[r][i]),e[r][i]>n&&(n=e[r][i]);return{min:t,max:n}},r.entropy=function(e,t){"undefined"==typeof t&&(t=0);for(var n=0,r=e.length,a=e[0].length,s=0;s<r;s++)for(var i=0;i<a;i++)n+=e[s][i]*u(e[s][i]+t);return-n},r.mean=function(e,t){"undefined"==typeof t&&(t=0);var n=e.length,r=e[0].length,a,s,o,i;if(-1===t){for(a=[0],s=n*r,o=0;o<n;o++)for(i=0;i<r;i++)a[0]+=e[o][i];a[0]/=s}else if(0===t)for(a=Array(r),s=n,i=0;i<r;i++){for(a[i]=0,o=0;o<n;o++)a[i]+=e[o][i];a[i]/=s}else if(1===t)for(a=Array(n),s=r,i=0;i<n;i++){for(a[i]=0,o=0;o<r;o++)a[i]+=e[i][o];a[i]/=s}else throw new Error("Invalid dimension");return a},r.sum=function(e,t){"undefined"==typeof t&&(t=0);var n=e.length,r=e[0].length,a,s,i;if(-1===t)for(a=[0],s=0;s<n;s++)for(i=0;i<r;i++)a[0]+=e[s][i];else if(0===t)for(a=Array(r),i=0;i<r;i++)for(a[i]=0,s=0;s<n;s++)a[i]+=e[s][i];else if(1===t)for(a=Array(n),i=0;i<n;i++)for(a[i]=0,s=0;s<r;s++)a[i]+=e[i][s];else throw new Error("Invalid dimension");return a},r.product=function(e,t){"undefined"==typeof t&&(t=0);var n=e.length,r=e[0].length,a,s,i;if(-1===t)for(a=[1],s=0;s<n;s++)for(i=0;i<r;i++)a[0]*=e[s][i];else if(0===t)for(a=Array(r),i=0;i<r;i++)for(a[i]=1,s=0;s<n;s++)a[i]*=e[s][i];else if(1===t)for(a=Array(n),i=0;i<n;i++)for(a[i]=1,s=0;s<r;s++)a[i]*=e[i][s];else throw new Error("Invalid dimension");return a},r.standardDeviation=function(e,t,n){for(var a=r.variance(e,t,n),s=a.length,l=0;l<s;l++)a[l]=o(a[l]);return a},r.variance=function(e,t,n){"undefined"==typeof n&&(n=!0),t=t||r.mean(e);var a=e.length;if(0===a)return[];for(var s=e[0].length,o=Array(s),l=0;l<s;l++){for(var d=0,u=0,p=0,c=0;c<a;c++)p=e[c][l]-t[l],d+=p,u+=p*p;o[l]=n?(u-d*d/a)/(a-1):(u-d*d/a)/a}return o},r.median=function(e){for(var t=e.length,r=e[0].length,a=Array(r),s=0,i;s<r;s++){i=Array(t);for(var o=0;o<t;o++)i[o]=e[o][s];i.sort(n);var l=i.length;a[s]=0==l%2?0.5*(i[l/2]+i[l/2-1]):i[p(l/2)]}return a},r.mode=function(e){var t=e.length,n=e[0].length,r=Array(n),a,i;for(a=0;a<n;a++){for(var s=Array(t),o=0;o<t;o++)s[o]=0;var l=Array(t),d=0;for(i=0;i<t;i++){var u=l.indexOf(e[i][a]);0<=u?s[u]++:(l[d]=e[i][a],s[d]=1,d++)}var p=0,c=0;for(i=0;i<d;i++)s[i]>p&&(p=s[i],c=i);r[a]=l[c]}return r},r.skewness=function(e,t){"undefined"==typeof t&&(t=!0);for(var s=r.mean(e),d=e.length,n=s.length,l=Array(n),u=0;u<n;u++){for(var p=0,c=0,m=0,i;m<d;m++)i=e[m][u]-s[u],p+=i*i,c+=i*i*i;var h=p/d,y=c/d,b=y/f(h,3/2);if(t){var g=o(d*(d-1));l[u]=g/(d-2)*b}else l[u]=b}return l},r.kurtosis=function(e,t){"undefined"==typeof t&&(t=!0);for(var a=r.mean(e),s=e.length,n=e[0].length,o=Array(n),l=0;l<n;l++){for(var d=0,u=0,p=0,i;p<s;p++)i=e[p][l]-a[l],d+=i*i,u+=i*i*i*i;var c=d/s,m=u/s;if(t){var h=d/(s-1),g=u/(h*h);o[l]=s*(s+1)/((s-1)*(s-2)*(s-3))*g-3*((s-1)*(s-1)/((s-2)*(s-3)))}else o[l]=m/(c*c)-3}return o},r.standardError=function(e){for(var t=e.length,n=r.standardDeviation(e),a=n.length,s=Array(a),l=o(t),d=0;d<a;d++)s[d]=n[d]/l;return s},r.covariance=function(e,t){return r.scatter(e,void 0,t)},r.scatter=function(e,t,n){"undefined"==typeof n&&(n=0),"undefined"==typeof t&&(0===n?t=e.length-1:1===n&&(t=e[0].length-1));var a=r.mean(e,n),o=e.length;if(0===o)return[[]];var l=e[0].length,d,u,i,p,s;if(0===n){for(d=Array(l),u=0;u<l;u++)d[u]=Array(l);for(u=0;u<l;u++)for(i=u;i<l;i++){for(p=0,s=0;s<o;s++)p+=(e[s][i]-a[i])*(e[s][u]-a[u]);p/=t,d[u][i]=p,d[i][u]=p}}else if(1===n){for(d=Array(o),u=0;u<o;u++)d[u]=Array(o);for(u=0;u<o;u++)for(i=u;i<o;i++){for(p=0,s=0;s<l;s++)p+=(e[i][s]-a[i])*(e[u][s]-a[u]);p/=t,d[u][i]=p,d[i][u]=p}}else throw new Error("Invalid dimension");return d},r.correlation=function(e){var t=r.mean(e),n=r.standardDeviation(e,!0,t),a=r.zScores(e,t,n),s=e.length,o=e[0].length,d=Array(o),u,i;for(u=0;u<o;u++)d[u]=Array(o);for(u=0;u<o;u++)for(i=u;i<o;i++){for(var p=0,c=0,m=a.length;c<m;c++)p+=a[c][i]*a[c][u];p/=s-1,d[u][i]=p,d[i][u]=p}return d},r.zScores=function(e,t,i){return t=t||r.mean(e),"undefined"==typeof i&&(i=r.standardDeviation(e,!0,t)),r.standardize(r.center(e,t,!1),i,!0)},r.center=function(e,t,n){t=t||r.mean(e);var a=e,s=e.length,o,i,l;if(!n)for(a=Array(s),o=0;o<s;o++)a[o]=Array(e[o].length);for(o=0;o<s;o++){var d=a[o];for(i=0,l=d.length;i<l;i++)d[i]=e[o][i]-t[i]}return a},r.standardize=function(e,t,n){"undefined"==typeof t&&(t=r.standardDeviation(e));var a=e,s=e.length,o,i,l;if(!n)for(a=Array(s),o=0;o<s;o++)a[o]=Array(e[o].length);for(o=0;o<s;o++){var d=a[o],u=e[o];for(i=0,l=d.length;i<l;i++)0===t[i]||isNaN(t[i])||(d[i]=u[i]/t[i])}return a},r.weightedVariance=function(e,t){var n=r.mean(e),s=e.length;if(0===s)return[];for(var o=e[0].length,l=Array(o),d=0;d<o;d++){for(var u=0,p=0,a=0,c=0;c<s;c++){var i=e[c][d]-n[d],m=t[c];u+=m*(i*i),a+=m,p+=m*m}l[d]=u*(a/(a*a-p))}return l},r.weightedMean=function(e,t,n){"undefined"==typeof n&&(n=0);var r=e.length;if(0===r)return[];var s=e[0].length,o,l,i,d,u,p;if(0===n){for(o=Array(s),l=0;l<s;l++)o[l]=0;for(l=0;l<r;l++)for(p=e[l],u=t[l],d=0;d<s;d++)o[d]+=p[d]*u}else if(1===n){for(o=Array(r),l=0;l<r;l++)o[l]=0;for(d=0;d<r;d++)for(p=e[d],u=t[d],l=0;l<s;l++)o[d]+=p[l]*u}else throw new Error("Invalid dimension");var c=a.sum(t);if(0!==c)for(l=0,i=o.length;l<i;l++)o[l]/=c;return o},r.weightedCovariance=function(e,t,n,a){a=a||0,n=n||r.weightedMean(e,t,a);for(var s=0,o=0,l=0,i=t.length;l<i;l++)s+=t[l],o+=t[l]*t[l];var d=s/(s*s-o);return r.weightedScatter(e,t,n,d,a)},r.weightedScatter=function(e,t,n,a,o){o=o||0,n=n||r.weightedMean(e,t,o),"undefined"==typeof a&&(a=1);var l=e.length;if(0===l)return[[]];var d=e[0].length,u,p,i,c,m;if(0===o){for(u=Array(d),p=0;p<d;p++)u[p]=Array(d);for(p=0;p<d;p++)for(i=p;i<d;i++){for(m=0,c=0;c<l;c++)m+=t[c]*(e[c][i]-n[i])*(e[c][p]-n[p]);u[p][i]=m*a,u[i][p]=m*a}}else if(1===o){for(u=Array(l),p=0;p<l;p++)u[p]=Array(l);for(p=0;p<l;p++)for(i=p;i<l;i++){for(m=0,c=0;c<d;c++)m+=t[c]*(e[i][c]-n[i])*(e[p][c]-n[p]);u[p][i]=m*a,u[i][p]=m*a}}else throw new Error("Invalid dimension");return u}},{"./array":126}],129:[function(e,t){"use strict";t.exports=function(e){var t=e.getDataVariable("scan_acquisition_time"),n=e.getDataVariable("total_intensity"),r=e.getDataVariable("scan_index"),a=e.getDataVariable("mass_values"),s=e.getDataVariable("intensity_values");r.push(a.length);for(var o=Array(t.length),l=0,d=0,i;d<o.length;d++){i=r[d+1]-r[d],o[d]=[Array(i),Array(i)];for(var u=0;u<i;u++)o[d][0][u]=a[l],o[d][1][u]=s[l++]}return{times:t,series:[{name:"tic",dimension:1,data:n},{name:"ms",dimension:2,data:o}]}}},{}],130:[function(e,t){"use strict";t.exports=function(e){for(var t=e.getDataVariable("scan_acquisition_time"),n=e.getDataVariable("total_intensity"),r=e.getDataVariable("point_count"),a=e.getDataVariable("mass_values"),s=e.getDataVariable("intensity_values"),o=Array(r.length),l=0,d=0,i;d<o.length;d++){i=r[d],o[d]=[Array(i),Array(i)];for(var u=0;u<i;u++)o[d][0][u]=a[l],o[d][1][u]=s[l++]}return{times:t,series:[{name:"tic",dimension:1,data:n},{name:"ms",dimension:2,data:o}]}}},{}],131:[function(e,t){"use strict";t.exports=function(e){var t=e.getDataVariable("ordinate_values"),n=t.length,r=e.getAttribute("detector_name"),a=void 0;a=r.match(/dad/i)?`uv${+r.replace(/.*Sig=([0-9]+).*/,"$1")}`:r.match(/tic/i)?"tic":"unknown";var s=e.getDataVariable("actual_delay_time")[0],o=e.getDataVariable("actual_run_time_length")[0],l=void 0;if(!e.dataVariableExists("actual_sampling_interval"))l=(o-s)/n;else if(l=e.getDataVariable("actual_sampling_interval")[0],3<_(s+l*n-o))throw new Error("The expected last time does not correspond to the runtimeLength");for(var d=[],u=s,p=0;p<n;p++)d.push(u),u+=l;return{times:d,series:[{name:a,dimension:1,data:t}]}}},{}],132:[function(e,t){"use strict";t.exports=function(e){for(var t=[],n=e.getDataVariable("ordinate_values"),r=+e.getDataVariable("actual_delay_time"),a=+e.getDataVariable("actual_sampling_interval"),s=r,o=0;o<n.length;o++)t.push(s),s+=a;return{times:t,series:[{name:"tic",dimension:1,data:n}]}}},{}],133:[function(e,t){"use strict";t.exports=function(e){var t=e.getDataVariable("scan_acquisition_time"),n=e.getDataVariable("total_intensity"),r=e.getDataVariable("scan_index"),a=e.getDataVariable("mass_values"),s=e.getDataVariable("intensity_values");r.push(a.length);for(var o=Array(t.length),l=0,d=0,i;d<o.length;d++){i=r[d+1]-r[d],o[d]=[Array(i),Array(i)];for(var u=0;u<i;u++)o[d][0][u]=a[l],o[d][1][u]=s[l++]}return{times:t,series:[{name:"tic",dimension:1,data:n},{name:"ms",dimension:2,data:o}]}}},{}],134:[function(e,t){"use strict";t.exports=function(e){var t=e.getDataVariable("scan_acquisition_time"),n=e.getDataVariable("total_intensity"),r=e.getDataVariable("scan_index"),a=e.getDataVariable("mass_values"),s=e.getDataVariable("intensity_values");r.push(a.length);for(var o=Array(t.length),l=0,d=0,i;d<o.length;d++){i=r[d+1]-r[d],o[d]=[Array(i),Array(i)];for(var u=0;u<i;u++)o[d][0][u]=a[l],o[d][1][u]=s[l++]}return{times:t,series:[{name:"tic",dimension:1,data:n},{name:"ms",dimension:2,data:o}]}}},{}],135:[function(e,t){"use strict";function i(e){var t={};for(var i of e)t[i.name]=i.value;return t}function n(e){for(var t of e.variables)t.value=e.getDataVariable(t);return e.variables}var r=e("netcdfjs"),a=e("./agilentGCMS"),s=e("./brukerGCMS"),o=e("./agilentHPLC"),l=e("./finniganGCMS"),d=e("./shimadzuGCMS"),u=e("./advionGCMS"),p=e("./aiaTemplate");t.exports=function(e,t={}){var c=new r(e),m=c.globalAttributes,h=c.dataVariableExists("instrument_mfr")&&c.getDataVariableAsString("instrument_mfr"),g=c.attributeExists("dataset_origin"),f=c.dataVariableExists("mass_values"),y=c.getAttribute("detector_name"),b=c.attributeExists("aia_template_revision"),x=c.getAttribute("source_file_format"),_=void 0;if(f&&g)_=a(c);else if(f&&h&&h.match(/finnigan/i))_=l(c);else if(f&&h&&h.match(/bruker/i))_=s(c);else if(f&&h&&h.match(/bruker/i))_=s(c);else if(f&&x&&x.match(/shimadzu/i))_=d(c);else if(f&&x&&x.match(/advion/i))_=u(c);else if(y&&y.match(/(dad|tic)/i))_=o(c);else if(b)_=p(c);else throw new TypeError("Unknown file format");return t.meta&&(_.meta=i(m)),t.variables&&(_.variables=n(c)),_},t.exports.fromAgilentGCMS=function(e){return a(new r(e))},t.exports.fromAgilentHPLC=function(e){return o(new r(e))},t.exports.fromFinniganGCMS=function(e){return l(new r(e))},t.exports.fromAiaTemplate=function(e){return p(new r(e))}},{"./advionGCMS":129,"./agilentGCMS":130,"./agilentHPLC":131,"./aiaTemplate":132,"./brukerGCMS":133,"./finniganGCMS":134,"./shimadzuGCMS":136,netcdfjs:139}],136:[function(e,t){"use strict";t.exports=function(e){var t=e.getDataVariable("scan_acquisition_time"),n=e.getDataVariable("total_intensity"),r=e.getDataVariable("scan_index"),a=e.getDataVariable("mass_values"),s=e.getDataVariable("intensity_values");r.push(a.length);for(var o=Array(t.length),l=0,d=0,i;d<o.length;d++){i=r[d+1]-r[d],o[d]=[Array(i),Array(i)];for(var u=0;u<i;u++)o[d][0][u]=a[l],o[d][1][u]=s[l++]}return{times:t,series:[{name:"tic",dimension:1,data:n},{name:"ms",dimension:2,data:o}]}}},{}],137:[function(e,t){"use strict";var n=e("./types");t.exports.nonRecord=function(e,t){for(var r=n.str2num(t.type),a=t.size/n.num2bytes(r),s=Array(a),o=0;o<a;o++)s[o]=n.readType(e,r,1);return s},t.exports.record=function(e,t,r){for(var a=n.str2num(t.type),s=t.size?t.size/n.num2bytes(a):1,o=r.length,l=Array(o),d=r.recordStep,u=0,i;u<o;u++)i=e.offset,l[u]=n.readType(e,a,s),e.seek(i+d);return l}},{"./types":141}],138:[function(e,t){"use strict";function i(e){var t=e.readUint32(),i,n;if(t===o)return a.notNetcdf(e.readUint32()!==o,"wrong empty tag for list of dimensions"),[];a.notNetcdf(t!==l,"wrong tag for list of dimensions");for(var r=e.readUint32(),s=Array(r),d=0;d<r;d++){var u=a.readName(e),c=e.readUint32();c===p&&(i=d,n=u),s[d]={name:u,size:c}}return{dimensions:s,recordId:i,recordName:n}}function n(e){var t=e.readUint32();if(t===o)return a.notNetcdf(e.readUint32()!==o,"wrong empty tag for list of attributes"),[];a.notNetcdf(t!==u,"wrong tag for list of attributes");for(var i=e.readUint32(),n=Array(i),r=0;r<i;r++){var l=a.readName(e),d=e.readUint32();a.notNetcdf(1>d||6<d,`non valid type ${d}`);var p=e.readUint32(),c=s.readType(e,d,p);a.padding(e),n[r]={name:l,type:s.num2str(d),value:c}}return n}function r(e,t,i){var r=e.readUint32(),l=0;if(r===o)return a.notNetcdf(e.readUint32()!==o,"wrong empty tag for list of variables"),[];a.notNetcdf(r!==d,"wrong tag for list of variables");for(var u=e.readUint32(),p=Array(u),c=0;c<u;c++){for(var m=a.readName(e),h=e.readUint32(),g=Array(h),f=0;f<h;f++)g[f]=e.readUint32();var y=n(e),b=e.readUint32();a.notNetcdf(1>b&&6<b,`non valid type ${b}`);var x=e.readUint32(),_=e.readUint32();2===i&&(a.notNetcdf(0<_,"offsets larger than 4GB not supported"),_=e.readUint32());var k=!1;"undefined"!=typeof t&&g[0]===t&&(l+=x,k=!0),p[c]={name:m,dimensions:g,attributes:y,type:s.num2str(b),size:x,offset:_,record:k}}return{variables:p,recordStep:l}}var a=e("./utils"),s=e("./types"),o=0,l=10,d=11,u=12,p=0;t.exports=function(e,t){var a={recordDimension:{length:e.readUint32()},version:t},s=i(e);a.recordDimension.id=s.recordId,a.recordDimension.name=s.recordName,a.dimensions=s.dimensions,a.globalAttributes=n(e);var o=r(e,s.recordId,t);return a.variables=o.variables,a.recordDimension.recordStep=o.recordStep,a}},{"./types":141,"./utils":142}],139:[function(e,t){"use strict";var i=e("iobuffer"),n=i.IOBuffer,r=e("./utils"),a=e("./data"),s=e("./header"),o=e("./toString");class l{constructor(e){var t=new n(e);t.setBigEndian(),r.notNetcdf("CDF"!==t.readChars(3),"should start with CDF");var i=t.readByte();r.notNetcdf(2<i,"unknown version"),this.header=s(t,i),this.buffer=t}get version(){return 1===this.header.version?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(e){var t=this.globalAttributes.find((t)=>t.name===e);return t?t.value:null}getDataVariableAsString(e){var t=this.getDataVariable(e);return t?t.join(""):null}get variables(){return this.header.variables}toString(){return o.call(this)}getDataVariable(e){var t;return t="string"==typeof e?this.header.variables.find(function(t){return t.name===e}):e,r.notNetcdf(void 0===t,`variable not found: ${e}`),this.buffer.seek(t.offset),t.record?a.record(this.buffer,t,this.header.recordDimension):a.nonRecord(this.buffer,t)}dataVariableExists(e){var t=this.header.variables.find(function(t){return t.name===e});return t!==void 0}attributeExists(e){var t=this.globalAttributes.find((t)=>t.name===e);return t!==void 0}}t.exports=l},{"./data":137,"./header":138,"./toString":140,"./utils":142,iobuffer:20}],140:[function(e,t){"use strict";t.exports=function(){var e=["DIMENSIONS"];for(var t of this.dimensions)e.push(`  ${t.name.padEnd(30)} = size: ${t.size}`);e.push(""),e.push("GLOBAL ATTRIBUTES");for(var i of this.globalAttributes)e.push(`  ${i.name.padEnd(30)} = ${i.value}`);var n=JSON.parse(JSON.stringify(this.variables));e.push(""),e.push("VARIABLES:");for(var r of n){r.value=this.getDataVariable(r);var a=JSON.stringify(r.value);50<a.length&&(a=a.substring(0,50)),isNaN(r.value.length)||(a+=` (length: ${r.value.length})`),e.push(`  ${r.name.padEnd(30)} = ${a}`)}return e.join("\n")}},{}],141:[function(e,t){"use strict";function i(e,t){if(1!==e){for(var n=Array(e),r=0;r<e;r++)n[r]=t();return n}return t()}function n(e){return 0===e.charCodeAt(e.length-1)?e.substring(0,e.length-1):e}var r=e("./utils").notNetcdf,a={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};t.exports=a,t.exports.num2str=function(e){switch(+e){case a.BYTE:return"byte";case a.CHAR:return"char";case a.SHORT:return"short";case a.INT:return"int";case a.FLOAT:return"float";case a.DOUBLE:return"double";default:return"undefined";}},t.exports.num2bytes=function(e){switch(+e){case a.BYTE:return 1;case a.CHAR:return 1;case a.SHORT:return 2;case a.INT:return 4;case a.FLOAT:return 4;case a.DOUBLE:return 8;default:return-1;}},t.exports.str2num=function(e){switch(e+""){case"byte":return a.BYTE;case"char":return a.CHAR;case"short":return a.SHORT;case"int":return a.INT;case"float":return a.FLOAT;case"double":return a.DOUBLE;default:return-1;}},t.exports.readType=function(e,t,s){return t===a.BYTE?e.readBytes(s):t===a.CHAR?n(e.readChars(s)):t===a.SHORT?i(s,e.readInt16.bind(e)):t===a.INT?i(s,e.readInt32.bind(e)):t===a.FLOAT?i(s,e.readFloat32.bind(e)):t===a.DOUBLE?i(s,e.readFloat64.bind(e)):void r(!0,`non valid type ${t}`)}},{"./utils":142}],142:[function(e,t){"use strict";function i(e){0!=e.offset%4&&e.skip(4-e.offset%4)}t.exports.notNetcdf=function(e,t){if(e)throw new TypeError(`Not a valid NetCDF v3.x file: ${t}`)},t.exports.padding=i,t.exports.readName=function(e){var t=e.readUint32(),n=e.readChars(t);return i(e),n}},{}],143:[function(e,t){"use strict";t.exports=function(e,t){e=e||0;for(var n=Array(e),r=0;r<e;r++)n[r]=t;return n}},{}],144:[function(e,t){"use strict";function i(e,t,i){i!==void 0&&("string"==typeof i?(i.startsWith("<")&&i.endsWith(">")&&(i=i.substring(1,i.length-2)),e[t]=i.trim()):e[t]=i)}var n=e("./getSpectrumType"),r=e("./getNucleusFrom2DExperiment");t.exports=function(e){var t={dimension:e.twoD?2:1,nucleus:[],isFid:!1,isFt:!1},a=e.info;if(i(t,"title",a.TITLE),i(t,"solvent",a[".SOLVENTNAME"]),i(t,"pulse",a[".PULSESEQUENCE"]||a[".PULPROG"]||a.$PULPROG),i(t,"experiment",n(t,a)),i(t,"temperature",parseFloat(a.$TE||a[".TE"])),i(t,"frequency",parseFloat(a[".OBSERVEFREQUENCY"])),i(t,"type",a.DATATYPE),i(t,"probe",a.$PROBHD),void 0!==a.$FNTYPE&&i(t,"acquisitionMode",parseInt(a.$FNTYPE)),i(t,"expno",parseInt(a.$EXPNO)),t.type&&(0<=t.type.toUpperCase().indexOf("FID")?t.isFid=!0:0<=t.type.toUpperCase().indexOf("SPECTRUM")&&(t.isFt=!0)),1===t.dimension){var s=a[".OBSERVENUCLEUS"];s&&(t.nucleus=[s.replace(/[^A-Za-z0-9]/g,"")])}else{var o=a[".NUCLEUS"];o&&(t.nucleus=o.split(",").map((e)=>e.trim()))}return 0===t.nucleus.length&&(t.nucleus=r(t.experiment)),a.$DATE&&(t.date=new Date(1e3*a.$DATE).toISOString()),t}},{"./getNucleusFrom2DExperiment":145,"./getSpectrumType":146}],145:[function(e,t){"use strict";t.exports=function(e){return"string"==typeof e?(e=e.toLowerCase(),e.includes("jres")?["1H"]:e.includes("hmbc")||e.includes("hsqc")?["1H","13C"]:["1H","1H"]):[]}},{}],146:[function(e,t){"use strict";t.exports=function(e={},t={}){null===e&&(e={}),"string"==typeof e&&(e={pulse:e});var i=(t.$SPECTYP||"").replace(/^<(.*)>$/,"$1").toLowerCase();if(i)return i;var n=e.pulse;return"string"==typeof n?(n=n.toLowerCase(),n.includes("zg")?"1d":n.includes("hsqct")||n.includes("invi")&&(n.includes("ml")||n.includes("di"))?"hsqctocsy":n.includes("hsqc")||n.includes("invi")?"hsqc":n.includes("hmbc")||n.includes("inv4")&&n.includes("lp")?"hmbc":n.includes("cosy")?"cosy":n.includes("jres")?"jres":n.includes("tocsy")||n.includes("mlev")||n.includes("dipsi")?"tocsy":n.includes("noesy")?"noesy":n.includes("roesy")?"roesy":n.includes("dept")?"dept":n.includes("jmod")||n.includes("apt")?"aptjmod":""):""}},{}],147:[function(e,t,i){"use strict";var n=e("jcampconverter"),r=e("spectra-data"),a=e("./getMetadata"),s=e("./getSpectrumType"),o={computeRanges:!1},l={nH:100,thresholdFactor:0.85,clean:0.4,compile:!0,integralType:"sum"};i.parseJcamp=function(e,t){t=Object.assign({},o,t);var i=e.toString(),s=n.convert(i,{keepRecordsRegExp:/.*/,withoutXY:!0}),d=a(s);if(t.computeRanges&&d.isFt&&1===d.dimension&&"1H"===d.nucleus[0]){var u=Object.assign({},l,t.ranges);t.removeImpurities&&d.solvent&&(u.removeImpurity={solvent:d.solvent});var p=r.NMR.fromJcamp(i),c=p.getRanges(u);c.forEach(function(e){delete e._highlight,delete e.signalID,e.signal.forEach(function(e){delete e.peak})}),d.range=c}return d},i.getNucleusFrom2DExperiment=e("./getNucleusFrom2DExperiment"),i.getMetadata=e("./getMetadata"),i.getSpectrumType=s},{"./getMetadata":144,"./getNucleusFrom2DExperiment":145,"./getSpectrumType":146,jcampconverter:24,"spectra-data":192}],148:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var r=e("ml-matrix"),a=n(r),s=e("new-array"),o=n(s),l=e("ml-simple-clustering"),d=n(l),u=e("ml-hclust"),p=n(u);class c{constructor(e,t,i){this.chemicalShifts=e,this.couplingConstants=t,this.multiplicity=i,this.nSpins=e.length,this._initConnectivity(),this._initClusters()}static fromSpinusPrediction(e){for(var t=e.split("\n"),n=t.length-1,r=Array(n),s=Array(n),l={},d=a.default.zeros(n,n),u=0,p;u<n;u++)p=t[u].split("\t"),r[u]=+p[2],l[p[0]-1]=u,s[u]=+p[5];for(var m=0;m<n;m++){p=t[m].split("\t");var h=(p.length-4)/3;for(y=0;y<h;y++){var g=p[4+3*y]-1,f=l[g];d[m][f]=+p[6+3*y]}}for(var y=0;y<n;y++)for(var b=y;b<n;b++)d[y][b]=d[b][y];return new c(r,d,(0,o.default)(n,2))}static fromPrediction(e){var t=c.ungroupAtoms(e),n=t.length,r=Array(n),s=a.default.zeros(n,n),o=Array(n),l={},d,i,u;for(d=0;d<n;d++)r[d]=t[d].delta,l[t[d].atomIDs[0]]=d;for(d=0;d<n;d++){for(r[d]=t[d].delta,u=t[d].j,i=0;i<u.length;i++)s[l[t[d].atomIDs[0]]][l[u[i].assignment]]=u[i].coupling,s[l[u[i].assignment]][l[t[d].atomIDs[0]]]=u[i].coupling;o[d]=t[d].integral+1}return new c(r,s,o)}static ungroupAtoms(e){var t=[];return e.forEach((e)=>{var n=e.atomIDs;if(n instanceof Array)for(var r=0;r<n.length;r++){var i=JSON.parse(JSON.stringify(e)),a=[];if(i.atomIDs=[n[r]],i.integral=1,i.j instanceof Array)for(var s=0,o;s<i.j.length;s++)if(o=i.j[s].assignment,o instanceof Array)for(var l=0,d;l<o.length;l++)d=JSON.parse(JSON.stringify(i.j[s])),d.assignment=o[l],a.push(d);i.j=a,delete i.nbAtoms,t.push(i)}}),t}_initClusters(){this.clusters=(0,d.default)(this.connectivity,{out:"indexes"})}_initConnectivity(){for(var e=this.couplingConstants,t=a.default.ones(e.length,e.length),n=0;n<e.length;n++)for(var i=n;i<e[n].length;i++)0===e[n][i]&&(t[n][i]=0,t[i][n]=0);this.connectivity=t}_calculateBetas(e,t){var n=a.default.zeros(e.length,e.length),r,i;for(r=0;r<e.rows;r++)for(i=r;i<e.columns;i++)0==this.chemicalShifts[r]-this.chemicalShifts[i]?r!==i&&0===e[r][i]&&(n[r][i]=1,n[i][r]=1):(n[r][i]=1-_(e[r][i]/((this.chemicalShifts[r]-this.chemicalShifts[i])*t)),n[i][r]=n[r][i]);return n}ensureClusterSize(e){var t=this._calculateBetas(this.couplingConstants,e.frequency||400),n=p.default.agnes(t,{isDistanceMatrix:!0}),r=[];this._splitCluster(n,r,e.maxClusterSize||8,!1);var a=this._mergeClusters(r);this.nClusters=a.length,this.clusters=Array(a.length);for(var s=0;s<this.nClusters;s++){this.clusters[s]=[];for(var o=0;o<this.nSpins;o++)0!==a[s][o]&&(0>a[s][o]?this.clusters[s].push(-(o+1)):this.clusters[s].push(o))}}_splitCluster(e,t,n,r){if(!r&&e.index.length<=n)t.push(this._getMembers(e));else for(var a of e.children)if(!isNaN(a.index)||a.index.length<=n){for(var s=this._getMembers(a),o=0,l=0;l<this.nSpins;l++)if(1===s[l]){o++;for(var i=0;i<this.nSpins;i++)1===this.connectivity[l][i]&&0===s[i]&&(s[i]=-1,o++)}o<=n?t.push(s):isNaN(a.index)?this._splitCluster(a,t,n,!0):(s[a.index]=2,t.push(s))}else this._splitCluster(a,t,n,!1)}_getMembers(e){for(var t=Array(this.nSpins),n=0;n<this.nSpins;n++)t[n]=0;if(!isNaN(e.index))t[1*e.index]=1;else for(var i of e.index)t[1*i.index]=1;return t}_mergeClusters(e){var t=0,n,r,a,i,s,o,l;for(a=e.length-1;0<=a;a--){for(n=e[a],t=n.length,s=0;s<t&&-1!==n[s++];);if(s<t)for(i=e.length-1;i>=a+1;i--){for(r=e[i],s=0,o=0,l=0;s<t;)-1==n[s]*r[s]&&o++,(0!==n[s]||0!==r[s])&&l++,s++;if(0<o&&l<=this.maxClusterSize){for(s=0;s<t;)1===r[s]?n[s]=1:-1===r[s]&&1!==n[s]&&(n[s]=-1),s++;e.splice(i,1),i++}}}return e}}i.default=c},{"ml-hclust":91,"ml-matrix":110,"ml-simple-clustering":124,"new-array":143}],149:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var r=e("./SpinSystem");Object.defineProperty(i,"SpinSystem",{enumerable:!0,get:function(){return n(r).default}});var a=e("./simulate1D");Object.defineProperty(i,"simulate1D",{enumerable:!0,get:function(){return n(a).default}});var s=e("./simulate2D");Object.defineProperty(i,"simulate2D",{enumerable:!0,get:function(){return n(s).default}})},{"./SpinSystem":148,"./simulate1D":151,"./simulate2D":152}],150:[function(e,t,i){"use strict";function n(e){for(var t=(e-1)/2,n=Array(e),a=Array(e),s=0;s<e;s++)n[s]=e-1-s-t,a[s]=o(t*(t+1)-n[s]*(n[s]+1));var i=r(a,1,e,e);for(s=0;s<e;s++)a[s]=o(t*(t+1)-n[s]*(n[s]-1));var l=r(a,-1,e,e),d=i.clone().add(l).mul(0.5),u=l.clone().mul(-1).add(i).mul(-0.5),c=r(n,0,e,e);return{x:d,y:u,z:c,m:l,p:i}}function r(e,t,r,n){for(var a=new s.default(r,n,{initialCapacity:20}),o=0;o<e.length;o++)0<=o-t&&o-t<r&&o<n&&a.set(o-t,o,e[o]);return a}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){return 2===e?l:n(e)};var a=e("ml-sparse-matrix"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=n(2)},{"ml-sparse-matrix":125}],151:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,r,a,s,o){for(var l=0|s*(-t-r)/(a-r),d=o.length,u=0,p=0,c=l-d/2;c<l+d/2;c++)u=0|c,0<=c&&c<s&&(e[u]+=o[p]*n),p++}function s(e,t){e.forEachNonZero((e,i,n)=>{return e>i?0:_(n)<=t?0:n})}function l(e,t,r,a,s){for(var o=1,l=0;l<s.length;l++)o*=r[s[l]];for(var i=new h.default(o,o),d=0;d<s.length;d++){for(var u=s[d],n=(0,x.default)(r[u]),p=void 0,c=void 0,m=1,g=0;g<d;g++)m*=r[s[g]];p=h.default.eye(m),m=1;for(var f=d+1;f<s.length;f++)m*=r[s[f]];c=h.default.eye(m);var y=e[u],b=p.kroneckerProduct(n.z).kroneckerProduct(c);i.add(b.mul(y));for(var _=0,C;_<s.length;_++)if(C=s[_],1===a[u][C]){for(var k=(0,x.default)(r[C]),w=void 0,v=void 0,S=1,j=0;j<_;j++)S*=r[s[j]];w=h.default.eye(S),S=1;for(var E=_+1;E<s.length;E++)S*=r[s[E]];v=h.default.eye(S);var D=p.kroneckerProduct(n.x).kroneckerProduct(c).mmul(w.kroneckerProduct(k.x).kroneckerProduct(v));D.add(p.kroneckerProduct(n.y).kroneckerProduct(c).mul(-1).mmul(w.kroneckerProduct(k.y).kroneckerProduct(v))),D.add(p.kroneckerProduct(n.z).kroneckerProduct(c).mmul(w.kroneckerProduct(k.z).kroneckerProduct(v))),i.add(D.mul(t[u][C]/2))}}return i}function u(e,t,n){for(var r=Array(n),a=0;a<n;a++)r[a]=e+a*((t-e)/(n-1));return r}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var p=t.lineWidth,m=p===void 0?1:p,g=t.nbPoints,C=g===void 0?1024:g,v=t.maxClusterSize,S=v===void 0?10:v,E=t.output,D=E===void 0?"y":E,A=t.frequency,T=A===void 0?400:A,I=t.noiseFactor,P=I===void 0?1:I,H,i;C=+C;var j=t.from*T||0,F=(t.to||10)*T,O=e.chemicalShifts.slice();for(H=0;H<O.length;H++)O[H]*=T;var R=C*m/_(F-j)/2.355,z=C*m/_(F-j)/2,N=40*z,L=0|N,M=Array(L),X=N/2,b=R*o(2*a);for(H=0;H<L;H++){var U=(H-X)*(H-X);M[H]=10e9*(d(-U/(2*(R*R)))/b+z/((U+z*z)*a))}for(var B=t.withNoise?[...Array(C)].map(()=>Math.random()*P):Array(C).fill(0),Y=e.multiplicity,q=function(){var t=e.clusters[W];for(Z=Array(t.length),H=0;H<t.length;H++)Z[H]=0>t[H]?-t[H]-1:t[H];$=1,G=0;var n=[],a=[];if(t.length>S){for(V=0;0>t[V++];);for(V=t[V-1],n.push(-O[V]),H=0;H<t.length;H++)if(0>t[H])for(K=e.couplingConstants[V][Z[H]]/2,J=n.length,i=0;i<J;i++)n.push(n[i]+K),n[i]-=K;for(n.sort(y.asc),G=n.length,$=1,H=0;H<G;H++)a.push(1)}else{var o=l(O,e.couplingConstants,Y,e.connectivity,Z),d=o.rows,u=new c.default.DC.EVD(o),p=u.eigenvectorMatrix,g=u.realEigenvalues,b=new h.default(d,d),v=t.length;for($=0,Q=0;Q<v;Q++){var E=(0,x.default)(Y[Z[Q]]),D=1;for(i=0;i<Q;i++)D*=Y[Z[i]];var T=h.default.eye(D);for(D=1,i=Q+1;i<v;i++)D*=Y[Z[i]];var A=h.default.eye(D),I=T.kroneckerProduct(E.m).kroneckerProduct(A);0<=t[Q]?(b.add(I.mul(t[Q]+1)),$++):b.add(I.mul(t[Q]))}var P=c.default.zeros(d,d);b.forEachNonZero((e,t,i)=>{if(0<i)for(var n=p[t],r=0;r<n.length;r++)0!==n[r]&&P.set(e,r,P.get(e,r)+n[r]);return i});var R=P.clone();b.forEachNonZero((e,t,i)=>{if(0>i)for(var n=p[t],r=0;r<n.length;r++)0!==n[r]&&R.set(e,r,R.get(e,r)+n[r]);return i});var z=p.transpose();P=z.mmul(P),P=new h.default(P,{threshold:k}),s(P,k),R=z.mmul(R),R=new h.default(R,{threshold:k}),s(R,k),R.forEachNonZero((e,t,i)=>{var r=P.get(e,t);r=w(_(r),_(i)),r*=r,G+=r;var s=g[e]-g[t],o=(0,f.default)(n,s,y.asc);0>o?(n.splice(-1-o,0,s),a.splice(-1-o,0,r)):a[o]+=r})}var N=n.length;if(0<N){$/=G;var L=n[0],X=a[0],U=1;for(H=1;H<N;H++)_(n[H]-L/U)<m/64?(X+=a[H],L+=n[H],U++):(r(B,L/U,X*$,j,F,C,M),L=n[H],X=a[H],U=1);r(B,L/U,X*$,j,F,C,M)}},W=0;W<e.clusters.length;W++){var Z,$,G,V,J,K,Q;q()}if("xy"===D)return{x:u(t.from,t.to,C),y:B};if("y"===D)return B;throw new RangeError("wrong output option")};var p=e("ml-matrix"),c=n(p),m=e("ml-sparse-matrix"),h=n(m),g=e("binary-search"),f=n(g),y=e("num-sort"),b=e("./pauli"),x=n(b),k=0.01},{"./pauli":150,"binary-search":3,"ml-matrix":110,"ml-sparse-matrix":125,"num-sort":153}],152:[function(e,i,n){"use strict";function r(e,t,i,n){return(e-t)*(n-1)/(i-t)}function a(e,n){for(var r=4,a=C(0,t(n.x-n.widthX*r)),s=w(e[0].length-1,t(n.x+n.widthX*r)),o=C(0,t(n.y-n.widthY*r)),l=w(e.length-1,t(n.y+n.widthY*r)),u=n.widthX*n.widthX,p=n.widthY*n.widthY,c=o;c<l;c++)for(var m=a;m<s;m++){var i=f(n.x-m,2)/u+f(n.y-c,2)/p,h=1e4*n.z*d(-i);e[c][m]+=h}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=e[0].fromAtomLabel,s=e[0].toLabel,d=t.frequencyX||l[n].frequency,u=t.frequencyY||l[s].frequency,p=t.lineWidthX||l[n].lineWidth,c=t.lineWidthY||l[s].lineWidth,m=t.symmetrize||!1,h=e[0].fromChemicalShift,g=e[0].fromChemicalShift,f=e[0].toChemicalShift,y=e[0].toChemicalShift,b;for(b=1;b<e.length;)h=w(h,e[b].fromChemicalShift),g=C(g,e[b].fromChemicalShift),f=w(f,e[b].toChemicalShift),y=C(y,e[b].toChemicalShift),b++;null===t.firstX||isNaN(t.firstX)||(h=t.firstX),null===t.firstY||isNaN(t.firstY)||(f=t.firstY),null===t.lastX||isNaN(t.lastX)||(g=t.lastX),null===t.lastY||isNaN(t.lastY)||(y=t.lastY);var i=t.nbPointsX||512,x=t.nbPointsY||512,_=new o.default(x,i).fill(0);for(b=0;b<e.length;){var k={x:r(e[b].fromChemicalShift,h,g,i),y:r(e[b].toChemicalShift,f,y,x),z:e[b].fromAtoms.length+e[b].toAtoms.length,widthX:r(p/d+h,h,g,i),widthY:r(c/u+f,f,y,x)};a(_,k),m&&a(_,{x:k.y,y:k.x,z:k.z,widthX:k.widthY,widthY:k.widthX}),b++}return _};var s=e("ml-matrix"),o=function(e){return e&&e.__esModule?e:{default:e}}(s),l={H:{frequency:400,lineWidth:10},C:{frequency:100,lineWidth:10}}},{"ml-matrix":110}],153:[function(e,t,i){"use strict";function n(e){if("number"!=typeof e||r(e))throw new TypeError("Expected a number")}var r=e("number-is-nan");i.asc=function(e,t){return n(e),n(t),e-t},i.desc=function(e,t){return n(e),n(t),t-e}},{"number-is-nan":154}],154:[function(e,t){"use strict";t.exports=Number.isNaN||function(e){return e!==e}},{}],155:[function(e,t){"use strict";var i=e("./lib/utils/common").assign,n=e("./lib/deflate"),r=e("./lib/inflate"),a=e("./lib/zlib/constants"),s={};i(s,n,r,a),t.exports=s},{"./lib/deflate":156,"./lib/inflate":157,"./lib/utils/common":158,"./lib/zlib/constants":161}],156:[function(e,t,i){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.options=s.assign({level:g,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&16>t.windowBits&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var i=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==c)throw new Error(l[i]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,i=a.deflateSetDictionary(this.strm,r),i!==c)throw new Error(l[i]);this._dict_set=!0}}function r(e,t){var i=new n(t);if(i.push(e,!0),i.err)throw i.msg||l[i.err];return i.result}var a=e("./zlib/deflate"),s=e("./utils/common"),o=e("./utils/strings"),l=e("./zlib/messages"),d=e("./zlib/zstream"),u=Object.prototype.toString,p=4,c=0,m=1,h=2,g=-1,f=0,y=8;n.prototype.push=function(e,t){var i=this.strm,n=this.options.chunkSize,r,l;if(this.ended)return!1;l=t===~~t?t:!0===t?p:0,i.input="string"==typeof e?o.string2buf(e):"[object ArrayBuffer]"===u.call(e)?new Uint8Array(e):e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new s.Buf8(n),i.next_out=0,i.avail_out=n),r=a.deflate(i,l),r!==m&&r!==c)return this.onEnd(r),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&(l===p||l===h))&&("string"===this.options.to?this.onData(o.buf2binstring(s.shrinkBuf(i.output,i.next_out))):this.onData(s.shrinkBuf(i.output,i.next_out)))}while((0<i.avail_in||0===i.avail_out)&&r!==m);return l===p?(r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===c):l!==h||(this.onEnd(c),i.avail_out=0,!0)},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=n,i.deflate=r,i.deflateRaw=function(e,t){return t=t||{},t.raw=!0,r(e,t)},i.gzip=function(e,t){return t=t||{},t.gzip=!0,r(e,t)}},{"./utils/common":158,"./utils/strings":159,"./zlib/deflate":163,"./zlib/messages":168,"./zlib/zstream":170}],157:[function(e,t,i){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&16>t.windowBits&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),0<=t.windowBits&&16>t.windowBits&&!(e&&e.windowBits)&&(t.windowBits+=32),15<t.windowBits&&48>t.windowBits&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var i=a.inflateInit2(this.strm,t.windowBits);if(i!==l.Z_OK)throw new Error(d[i]);if(this.header=new p,a.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=a.inflateSetDictionary(this.strm,t.dictionary),i!==l.Z_OK)))throw new Error(d[i])}function r(e,t){var i=new n(t);if(i.push(e,!0),i.err)throw i.msg||d[i.err];return i.result}var a=e("./zlib/inflate"),s=e("./utils/common"),o=e("./utils/strings"),l=e("./zlib/constants"),d=e("./zlib/messages"),u=e("./zlib/zstream"),p=e("./zlib/gzheader"),c=Object.prototype.toString;n.prototype.push=function(e,t){var i=this.strm,n=this.options.chunkSize,r=this.options.dictionary,d=!1,u,p,m,h,g;if(this.ended)return!1;p=t===~~t?t:!0===t?l.Z_FINISH:l.Z_NO_FLUSH,i.input="string"==typeof e?o.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?new Uint8Array(e):e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new s.Buf8(n),i.next_out=0,i.avail_out=n),u=a.inflate(i,l.Z_NO_FLUSH),u===l.Z_NEED_DICT&&r&&(u=a.inflateSetDictionary(this.strm,r)),u===l.Z_BUF_ERROR&&!0==d&&(u=l.Z_OK,d=!1),u!==l.Z_STREAM_END&&u!==l.Z_OK)return this.onEnd(u),this.ended=!0,!1;i.next_out&&(0===i.avail_out||u===l.Z_STREAM_END||0===i.avail_in&&(p===l.Z_FINISH||p===l.Z_SYNC_FLUSH))&&("string"===this.options.to?(m=o.utf8border(i.output,i.next_out),h=i.next_out-m,g=o.buf2string(i.output,m),i.next_out=h,i.avail_out=n-h,h&&s.arraySet(i.output,i.output,m,h,0),this.onData(g)):this.onData(s.shrinkBuf(i.output,i.next_out))),0===i.avail_in&&0===i.avail_out&&(d=!0)}while((0<i.avail_in||0===i.avail_out)&&u!==l.Z_STREAM_END);return u===l.Z_STREAM_END&&(p=l.Z_FINISH),p===l.Z_FINISH?(u=a.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===l.Z_OK):p!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),i.avail_out=0,!0)},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=n,i.inflate=r,i.inflateRaw=function(e,t){return t=t||{},t.raw=!0,r(e,t)},i.ungzip=r},{"./utils/common":158,"./utils/strings":159,"./zlib/constants":161,"./zlib/gzheader":164,"./zlib/inflate":166,"./zlib/messages":168,"./zlib/zstream":170}],158:[function(e,t,i){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)n(i,r)&&(e[r]=i[r])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,a){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),a);for(var s=0;s<r;s++)e[a+s]=t[n+s]},flattenChunks:function(e){var t,i,n,r,a,s;for(n=0,t=0,i=e.length;t<i;t++)n+=e[t].length;for(s=new Uint8Array(n),r=0,(t=0,i=e.length);t<i;t++)a=e[t],s.set(a,r),r+=a.length;return s}},s={arraySet:function(e,t,n,r,a){for(var s=0;s<r;s++)e[a+s]=t[n+s]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(r)},{}],159:[function(e,t,i){"use strict";function n(e,t){if(65534>t&&(e.subarray&&s||!e.subarray&&a))return c.apply(null,r.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=c(e[o]);return n}var r=e("./common"),a=!0,s=!0;try{c.apply(null,[0])}catch(e){a=!1}try{c.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var o=new r.Buf8(256),l=0;256>l;l++)o[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;o[254]=o[254]=1,i.string2buf=function(e){var t=e.length,n=0,a,s,o,l,d;for(l=0;l<t;l++)s=e.charCodeAt(l),55296==(64512&s)&&l+1<t&&(o=e.charCodeAt(l+1),56320==(64512&o)&&(s=65536+(s-55296<<10)+(o-56320),l++)),n+=128>s?1:2048>s?2:65536>s?3:4;for(a=new r.Buf8(n),d=0,l=0;d<n;l++)s=e.charCodeAt(l),55296==(64512&s)&&l+1<t&&(o=e.charCodeAt(l+1),56320==(64512&o)&&(s=65536+(s-55296<<10)+(o-56320),l++)),128>s?a[d++]=s:2048>s?(a[d++]=192|s>>>6,a[d++]=128|63&s):65536>s?(a[d++]=224|s>>>12,a[d++]=128|63&s>>>6,a[d++]=128|63&s):(a[d++]=240|s>>>18,a[d++]=128|63&s>>>12,a[d++]=128|63&s>>>6,a[d++]=128|63&s);return a},i.buf2binstring=function(e){return n(e,e.length)},i.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},i.buf2string=function(e,t){var r=t||e.length,a=Array(2*r),s,i,l,d;for(i=0,s=0;s<r;){if(l=e[s++],128>l){a[i++]=l;continue}if(d=o[l],4<d){a[i++]=65533,s+=d-1;continue}for(l&=2===d?31:3===d?15:7;1<d&&s<r;)l=l<<6|63&e[s++],d--;if(1<d){a[i++]=65533;continue}65536>l?a[i++]=l:(l-=65536,a[i++]=55296|1023&l>>10,a[i++]=56320|1023&l)}return n(a,i)},i.utf8border=function(e,t){var i;for(t=t||e.length,t>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return 0>i?t:0===i?t:i+o[e[i]]>t?i:t}},{"./common":158}],160:[function(e,t){"use strict";t.exports=function(e,t,i,r){for(var a=0|65535&e,s=0|65535&e>>>16,o=0;0!==i;){o=2e3<i?2e3:i,i-=o;do a=0|a+t[r++],s=0|s+a;while(--o);a%=65521,s%=65521}return 0|(a|s<<16)}},{}],161:[function(e,t){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],162:[function(e,t){"use strict";var n=function(){for(var e=[],t=0,i;256>t;t++){i=t;for(var n=0;8>n;n++)i=1&i?3988292384^i>>>1:i>>>1;e[t]=i}return e}();t.exports=function(e,t,r,a){e^=-1;for(var s=a;s<a+r;s++)e=e>>>8^n[255&(e^t[s])];return-1^e}},{}],163:[function(e,t,i){"use strict";function n(e,t){return e.msg=E[t],t}function r(e){return(e<<1)-(4<e?9:0)}function a(e){for(var t=e.length;0<=--t;)e[t]=0}function o(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out);0===i||(w.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function l(e,t){v._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,o(e.strm)}function d(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=255&t>>>8,e.pending_buf[e.pending++]=255&t}function c(e,t,i,n){var r=e.avail_in;return(r>n&&(r=n),0===r)?0:(e.avail_in-=r,w.arraySet(t,e.input,e.next_in,r,i),1===e.state.wrap?e.adler=S(e.adler,t,r,i):2===e.state.wrap&&(e.adler=j(e.adler,t,r,i)),e.next_in+=r,e.total_in+=r,r)}function p(e,t){var i=e.max_chain_length,n=e.strstart,r=e.prev_length,a=e.nice_match,s=e.strstart>e.w_size-$?e.strstart-(e.w_size-$):0,o=e.window,l=e.w_mask,d=e.prev,u=e.strstart+Z,p=o[n+r-1],c=o[n+r],m,h;e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(m=t,o[m+r]!==c||o[m+r-1]!==p||o[m]!==o[n]||o[++m]!==o[n+1])continue;n+=2,m++;do;while(o[++n]===o[++m]&&o[++n]===o[++m]&&o[++n]===o[++m]&&o[++n]===o[++m]&&o[++n]===o[++m]&&o[++n]===o[++m]&&o[++n]===o[++m]&&o[++n]===o[++m]&&n<u);if(h=Z-(u-n),n=u-Z,h>r){if(e.match_start=t,r=h,h>=a)break;p=o[n+r-1],c=o[n+r]}}while((t=d[t&l])>s&&0!=--i);return r<=e.lookahead?r:e.lookahead}function m(e){var t=e.w_size,i,r,n,a,s;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-$)){w.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,i=r;do n=e.head[--i],e.head[i]=n>=t?n-t:0;while(--r);r=t,i=r;do n=e.prev[--i],e.prev[i]=n>=t?n-t:0;while(--r);a+=t}if(0===e.strm.avail_in)break;if(r=c(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=r,e.lookahead+e.insert>=V)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+V-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<V)););}while(e.lookahead<$&&0!==e.strm.avail_in)}function s(e,t){for(var i,n;;){if(e.lookahead<$){if(m(e),e.lookahead<$&&t===D)return ne;if(0===e.lookahead)break}if(i=0,e.lookahead>=V&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+V-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-$&&(e.match_length=p(e,i)),!(e.match_length>=V))n=v._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;else if(n=v._tr_tally(e,e.strstart-e.match_start,e.match_length-V),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=V){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+V-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;if(n&&(l(e,!1),0===e.strm.avail_out))return ne}return e.insert=e.strstart<V-1?e.strstart:V-1,t===A?(l(e,!0),0===e.strm.avail_out?ae:se):e.last_lit&&(l(e,!1),0===e.strm.avail_out)?ne:re}function h(e,t){for(var i,n,r;;){if(e.lookahead<$){if(m(e),e.lookahead<$&&t===D)return ne;if(0===e.lookahead)break}if(i=0,e.lookahead>=V&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+V-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=V-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-$&&(e.match_length=p(e,i),5>=e.match_length&&(e.strategy===R||e.match_length===V&&4096<e.strstart-e.match_start)&&(e.match_length=V-1)),e.prev_length>=V&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-V,n=v._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-V),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+V-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length);if(e.match_available=0,e.match_length=V-1,e.strstart++,n&&(l(e,!1),0===e.strm.avail_out))return ne}else if(!e.match_available)e.match_available=1,e.strstart++,e.lookahead--;else if(n=v._tr_tally(e,0,e.window[e.strstart-1]),n&&l(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ne}return e.match_available&&(n=v._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<V-1?e.strstart:V-1,t===A?(l(e,!0),0===e.strm.avail_out?ae:se):e.last_lit&&(l(e,!1),0===e.strm.avail_out)?ne:re}function g(e,t){for(var i=e.window,n,r,a,s;;){if(e.lookahead<=Z){if(m(e),e.lookahead<=Z&&t===D)return ne;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=V&&0<e.strstart&&(a=e.strstart-1,r=i[a],r===i[++a]&&r===i[++a]&&r===i[++a])){s=e.strstart+Z;do;while(r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&a<s);e.match_length=Z-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=V?(n=v._tr_tally(e,1,e.match_length-V),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=v._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(l(e,!1),0===e.strm.avail_out))return ne}return e.insert=0,t===A?(l(e,!0),0===e.strm.avail_out?ae:se):e.last_lit&&(l(e,!1),0===e.strm.avail_out)?ne:re}function f(e,t){for(var i;;){if(0===e.lookahead&&(m(e),0===e.lookahead)){if(t===D)return ne;break}if(e.match_length=0,i=v._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(l(e,!1),0===e.strm.avail_out))return ne}return e.insert=0,t===A?(l(e,!0),0===e.strm.avail_out?ae:se):e.last_lit&&(l(e,!1),0===e.strm.avail_out)?ne:re}function y(e,t,i,n,r){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=r}function b(e){e.window_size=2*e.w_size,a(e.head),e.max_lazy_match=oe[e.level].max_lazy,e.good_match=oe[e.level].good_length,e.nice_match=oe[e.level].nice_length,e.max_chain_length=oe[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=V-1,e.match_available=0,e.ins_h=0}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=M,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new w.Buf16(2*q),this.dyn_dtree=new w.Buf16(2*(2*B+1)),this.bl_tree=new w.Buf16(2*(2*Y+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new w.Buf16(W+1),this.heap=new w.Buf16(2*U+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new w.Buf16(2*U+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=L,t=e.state,t.pending=0,t.pending_out=0,0>t.wrap&&(t.wrap=-t.wrap),t.status=t.wrap?G:te,e.adler=2===t.wrap?0:1,t.last_flush=D,v._tr_init(t),I):n(e,H)}function k(e){var t=_(e);return t===I&&b(e.state),t}function C(e,t,i,r,a,o){if(!e)return H;var l=1;if(t===O&&(t=6),0>r?(l=0,r=-r):15<r&&(l=2,r-=16),1>a||a>X||i!==M||8>r||15<r||0>t||9<t||0>o||o>N)return n(e,H);8===r&&(r=9);var d=new x;return e.state=d,d.strm=e,d.wrap=l,d.gzhead=null,d.w_bits=r,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=a+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+V-1)/V),d.window=new w.Buf8(2*d.w_size),d.head=new w.Buf16(d.hash_size),d.prev=new w.Buf16(d.w_size),d.lit_bufsize=1<<a+6,d.pending_buf_size=4*d.lit_bufsize,d.pending_buf=new w.Buf8(d.pending_buf_size),d.d_buf=1*d.lit_bufsize,d.l_buf=3*d.lit_bufsize,d.level=t,d.strategy=o,d.method=i,k(e)}var w=e("../utils/common"),v=e("./trees"),S=e("./adler32"),j=e("./crc32"),E=e("./messages"),D=0,A=4,T=5,I=0,P=1,H=-2,F=-5,O=-1,R=1,z=2,N=4,L=2,M=8,X=9,U=256+1+29,B=30,Y=19,q=2*U+1,W=15,V=3,Z=258,$=Z+V+1,G=42,J=69,K=73,Q=91,ee=103,te=113,ie=666,ne=1,re=2,ae=3,se=4,oe;oe=[new y(0,0,0,0,function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(1>=e.lookahead){if(m(e),0===e.lookahead&&t===D)return ne;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+i;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,l(e,!1),0===e.strm.avail_out))return ne;if(e.strstart-e.block_start>=e.w_size-$&&(l(e,!1),0===e.strm.avail_out))return ne}return e.insert=0,t===A?(l(e,!0),0===e.strm.avail_out?ae:se):e.strstart>e.block_start&&(l(e,!1),0===e.strm.avail_out)?ne:ne}),new y(4,4,8,4,s),new y(4,5,16,8,s),new y(4,6,32,32,s),new y(4,4,16,16,h),new y(8,16,32,32,h),new y(8,16,128,128,h),new y(8,32,128,256,h),new y(32,128,258,1024,h),new y(32,258,258,4096,h)],i.deflateInit=function(e,t){return C(e,t,M,15,8,0)},i.deflateInit2=C,i.deflateReset=k,i.deflateResetKeep=_,i.deflateSetHeader=function(e,t){return e&&e.state?2===e.state.wrap?(e.state.gzhead=t,I):H:H},i.deflate=function(e,t){var i,l,s,p;if(!e||!e.state||t>T||0>t)return e?n(e,H):H;if(l=e.state,!e.output||!e.input&&0!==e.avail_in||l.status===ie&&t!==A)return n(e,0===e.avail_out?F:H);if(l.strm=e,i=l.last_flush,l.last_flush=t,l.status===G)if(2===l.wrap)e.adler=0,d(l,31),d(l,139),d(l,8),l.gzhead?(d(l,(l.gzhead.text?1:0)+(l.gzhead.hcrc?2:0)+(l.gzhead.extra?4:0)+(l.gzhead.name?8:0)+(l.gzhead.comment?16:0)),d(l,255&l.gzhead.time),d(l,255&l.gzhead.time>>8),d(l,255&l.gzhead.time>>16),d(l,255&l.gzhead.time>>24),d(l,9===l.level?2:l.strategy>=z||2>l.level?4:0),d(l,255&l.gzhead.os),l.gzhead.extra&&l.gzhead.extra.length&&(d(l,255&l.gzhead.extra.length),d(l,255&l.gzhead.extra.length>>8)),l.gzhead.hcrc&&(e.adler=j(e.adler,l.pending_buf,l.pending,0)),l.gzindex=0,l.status=J):(d(l,0),d(l,0),d(l,0),d(l,0),d(l,0),d(l,9===l.level?2:l.strategy>=z||2>l.level?4:0),d(l,3),l.status=te);else{var c=M+(l.w_bits-8<<4)<<8,m=-1;m=l.strategy>=z||2>l.level?0:6>l.level?1:6===l.level?2:3,c|=m<<6,0!==l.strstart&&(c|=32),c+=31-c%31,l.status=te,u(l,c),0!==l.strstart&&(u(l,e.adler>>>16),u(l,65535&e.adler)),e.adler=1}if(l.status===J)if(l.gzhead.extra){for(s=l.pending;l.gzindex<(65535&l.gzhead.extra.length)&&!(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>s&&(e.adler=j(e.adler,l.pending_buf,l.pending-s,s)),o(e),s=l.pending,l.pending===l.pending_buf_size));)d(l,255&l.gzhead.extra[l.gzindex]),l.gzindex++;l.gzhead.hcrc&&l.pending>s&&(e.adler=j(e.adler,l.pending_buf,l.pending-s,s)),l.gzindex===l.gzhead.extra.length&&(l.gzindex=0,l.status=K)}else l.status=K;if(l.status===K)if(l.gzhead.name){s=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>s&&(e.adler=j(e.adler,l.pending_buf,l.pending-s,s)),o(e),s=l.pending,l.pending===l.pending_buf_size)){p=1;break}p=l.gzindex<l.gzhead.name.length?255&l.gzhead.name.charCodeAt(l.gzindex++):0,d(l,p)}while(0!==p);l.gzhead.hcrc&&l.pending>s&&(e.adler=j(e.adler,l.pending_buf,l.pending-s,s)),0===p&&(l.gzindex=0,l.status=Q)}else l.status=Q;if(l.status===Q)if(l.gzhead.comment){s=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>s&&(e.adler=j(e.adler,l.pending_buf,l.pending-s,s)),o(e),s=l.pending,l.pending===l.pending_buf_size)){p=1;break}p=l.gzindex<l.gzhead.comment.length?255&l.gzhead.comment.charCodeAt(l.gzindex++):0,d(l,p)}while(0!==p);l.gzhead.hcrc&&l.pending>s&&(e.adler=j(e.adler,l.pending_buf,l.pending-s,s)),0===p&&(l.status=ee)}else l.status=ee;if(l.status===ee&&(l.gzhead.hcrc?(l.pending+2>l.pending_buf_size&&o(e),l.pending+2<=l.pending_buf_size&&(d(l,255&e.adler),d(l,255&e.adler>>8),e.adler=0,l.status=te)):l.status=te),0!==l.pending){if(o(e),0===e.avail_out)return l.last_flush=-1,I;}else if(0===e.avail_in&&r(t)<=r(i)&&t!==A)return n(e,F);if(l.status===ie&&0!==e.avail_in)return n(e,F);if(0!==e.avail_in||0!==l.lookahead||t!==D&&l.status!==ie){var h=l.strategy===z?f(l,t):l.strategy===3?g(l,t):oe[l.level].func(l,t);if((h===ae||h===se)&&(l.status=ie),h===ne||h===ae)return 0===e.avail_out&&(l.last_flush=-1),I;if(h===re&&(t===1?v._tr_align(l):t!==T&&(v._tr_stored_block(l,0,0,!1),t===3&&(a(l.head),0===l.lookahead&&(l.strstart=0,l.block_start=0,l.insert=0))),o(e),0===e.avail_out))return l.last_flush=-1,I}return t===A?0>=l.wrap?P:(2===l.wrap?(d(l,255&e.adler),d(l,255&e.adler>>8),d(l,255&e.adler>>16),d(l,255&e.adler>>24),d(l,255&e.total_in),d(l,255&e.total_in>>8),d(l,255&e.total_in>>16),d(l,255&e.total_in>>24)):(u(l,e.adler>>>16),u(l,65535&e.adler)),o(e),0<l.wrap&&(l.wrap=-l.wrap),0===l.pending?P:I):I},i.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status,t!==G&&t!==J&&t!==K&&t!==Q&&t!==ee&&t!==te&&t!==ie)?n(e,H):(e.state=null,t===te?n(e,-3):I):H},i.deflateSetDictionary=function(e,t){var i=t.length,r,s,o,n,l,d,u,p;if(!e||!e.state)return H;if(r=e.state,n=r.wrap,2===n||1===n&&r.status!==G||r.lookahead)return H;for(1===n&&(e.adler=S(e.adler,t,i,0)),r.wrap=0,i>=r.w_size&&(0===n&&(a(r.head),r.strstart=0,r.block_start=0,r.insert=0),p=new w.Buf8(r.w_size),w.arraySet(p,t,i-r.w_size,r.w_size,0),t=p,i=r.w_size),l=e.avail_in,d=e.next_in,u=e.input,e.avail_in=i,e.next_in=0,e.input=t,m(r);r.lookahead>=V;){s=r.strstart,o=r.lookahead-(V-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[s+V-1])&r.hash_mask,r.prev[s&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=s,s++;while(--o);r.strstart=s,r.lookahead=V-1,m(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=V-1,r.match_available=0,e.next_in=d,e.input=u,e.avail_in=l,r.wrap=n,I},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":158,"./adler32":160,"./crc32":162,"./messages":168,"./trees":169}],164:[function(e,t){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],165:[function(e,t){"use strict";var i=30;t.exports=function(e,t){var n,r,a,s,o,l,d,u,p,c,m,h,g,f,y,b,x,_,k,C,w,v,S,j,E;n=e.state,r=e.next_in,j=e.input,a=r+(e.avail_in-5),s=e.next_out,E=e.output,o=s-(t-e.avail_out),l=s+(e.avail_out-257),d=n.dmax,u=n.wsize,p=n.whave,c=n.wnext,m=n.window,h=n.hold,g=n.bits,f=n.lencode,y=n.distcode,b=(1<<n.lenbits)-1,x=(1<<n.distbits)-1;top:do{15>g&&(h+=j[r++]<<g,g+=8,h+=j[r++]<<g,g+=8),_=f[h&b];dolen:for(;;){if(k=_>>>24,h>>>=k,g-=k,k=255&_>>>16,0===k)E[s++]=65535&_;else if(16&k){C=65535&_,k&=15,k&&(g<k&&(h+=j[r++]<<g,g+=8),C+=h&(1<<k)-1,h>>>=k,g-=k),15>g&&(h+=j[r++]<<g,g+=8,h+=j[r++]<<g,g+=8),_=y[h&x];dodist:for(;;){if(k=_>>>24,h>>>=k,g-=k,k=255&_>>>16,16&k){if(w=65535&_,k&=15,g<k&&(h+=j[r++]<<g,g+=8,g<k&&(h+=j[r++]<<g,g+=8)),w+=h&(1<<k)-1,w>d){e.msg="invalid distance too far back",n.mode=i;break top}if(h>>>=k,g-=k,k=s-o,w>k){if(k=w-k,k>p&&n.sane){e.msg="invalid distance too far back",n.mode=i;break top}if(v=0,S=m,0===c){if(v+=u-k,k<C){C-=k;do E[s++]=m[v++];while(--k);v=s-w,S=E}}else if(c<k){if(v+=u+c-k,k-=c,k<C){C-=k;do E[s++]=m[v++];while(--k);if(v=0,c<C){k=c,C-=k;do E[s++]=m[v++];while(--k);v=s-w,S=E}}}else if(v+=c-k,k<C){C-=k;do E[s++]=m[v++];while(--k);v=s-w,S=E}for(;2<C;)E[s++]=S[v++],E[s++]=S[v++],E[s++]=S[v++],C-=3;C&&(E[s++]=S[v++],1<C&&(E[s++]=S[v++]))}else{v=s-w;do E[s++]=E[v++],E[s++]=E[v++],E[s++]=E[v++],C-=3;while(2<C);C&&(E[s++]=E[v++],1<C&&(E[s++]=E[v++]))}}else if(0==(64&k)){_=y[(65535&_)+(h&(1<<k)-1)];continue dodist}else{e.msg="invalid distance code",n.mode=i;break top}break}}else if(0==(64&k)){_=f[(65535&_)+(h&(1<<k)-1)];continue dolen}else if(32&k){n.mode=12;break top}else{e.msg="invalid literal/length code",n.mode=i;break top}break}}while(r<a&&s<l);return C=g>>3,r-=C,g-=C<<3,h&=(1<<g)-1,e.next_in=r,e.next_out=s,e.avail_in=r<a?5+(a-r):5-(r-a),e.avail_out=s<l?257+(l-s):257-(s-l),n.hold=h,void(n.bits=g)}},{}],166:[function(e,t,i){"use strict";function r(e){return(255&e>>>24)+(65280&e>>>8)+((65280&e)<<8)+((255&e)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=j,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new p.Buf32(ne),t.distcode=t.distdyn=new p.Buf32(re),t.sane=1,t.back=-1,k):C}function s(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,a(e)):C}function o(e,t){var i,n;return e&&e.state?(n=e.state,0>t?(i=0,t=-t):(i=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||15<t))?C:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,s(e)):C}function l(e,t){var i,r;return e?(r=new n,e.state=r,r.window=null,i=o(e,t),i!==k&&(e.state=null),i):C}function d(e){if(ae){var t;for(se=new p.Buf32(512),oe=new p.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(f(y,e.lens,0,288,se,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;f(b,e.lens,0,32,oe,0,e.work,{bits:5}),ae=!1}e.lencode=se,e.lenbits=9,e.distcode=oe,e.distbits=5}function u(e,t,i,n){var r=e.state,a;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new p.Buf8(r.wsize)),n>=r.wsize?(p.arraySet(r.window,t,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(a=r.wsize-r.wnext,a>n&&(a=n),p.arraySet(r.window,t,i-n,a,r.wnext),n-=a,n?(p.arraySet(r.window,t,i-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=a,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=a))),0}var p=e("../utils/common"),m=e("./adler32"),h=e("./crc32"),g=e("./inffast"),f=e("./inftrees"),y=1,b=2,x=4,_=6,k=0,C=-2,w=-3,v=-4,S=8,j=1,E=2,D=3,A=4,T=5,I=6,P=7,H=8,F=9,O=10,R=11,z=12,N=13,L=14,M=15,X=16,U=17,B=18,Y=19,q=20,W=21,V=22,Z=23,$=24,G=25,J=26,K=27,Q=28,ee=29,te=30,ie=31,ne=852,re=592,ae=!0,se,oe;i.inflateReset=s,i.inflateReset2=o,i.inflateResetKeep=a,i.inflateInit=function(e){return l(e,15)},i.inflateInit2=l,i.inflate=function(e,t){var i=0,a=new p.Buf8(4),s=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],o,l,ne,re,ae,se,oe,le,de,ue,pe,ce,me,he,ge,fe,ye,be,xe,_e,ke,Ce,we,ve;if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return C;o=e.state,o.mode===z&&(o.mode=N),ae=e.next_out,ne=e.output,oe=e.avail_out,re=e.next_in,l=e.input,se=e.avail_in,le=o.hold,de=o.bits,ue=se,pe=oe,Ce=k;inf_leave:for(;;)switch(o.mode){case j:if(0===o.wrap){o.mode=N;break}for(;16>de;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}if(2&o.wrap&&35615===le){o.check=0,a[0]=255&le,a[1]=255&le>>>8,o.check=h(o.check,a,2,0),le=0,de=0,o.mode=E;break}if(o.flags=0,o.head&&(o.head.done=!1),!(1&o.wrap)||(((255&le)<<8)+(le>>8))%31){e.msg="incorrect header check",o.mode=te;break}if((15&le)!=S){e.msg="unknown compression method",o.mode=te;break}if(le>>>=4,de-=4,ke=(15&le)+8,0===o.wbits)o.wbits=ke;else if(ke>o.wbits){e.msg="invalid window size",o.mode=te;break}o.dmax=1<<ke,e.adler=o.check=1,o.mode=512&le?O:z,le=0,de=0;break;case E:for(;16>de;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}if(o.flags=le,(255&o.flags)!=S){e.msg="unknown compression method",o.mode=te;break}if(57344&o.flags){e.msg="unknown header flags set",o.mode=te;break}o.head&&(o.head.text=1&le>>8),512&o.flags&&(a[0]=255&le,a[1]=255&le>>>8,o.check=h(o.check,a,2,0)),le=0,de=0,o.mode=D;case D:for(;32>de;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}o.head&&(o.head.time=le),512&o.flags&&(a[0]=255&le,a[1]=255&le>>>8,a[2]=255&le>>>16,a[3]=255&le>>>24,o.check=h(o.check,a,4,0)),le=0,de=0,o.mode=A;case A:for(;16>de;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}o.head&&(o.head.xflags=255&le,o.head.os=le>>8),512&o.flags&&(a[0]=255&le,a[1]=255&le>>>8,o.check=h(o.check,a,2,0)),le=0,de=0,o.mode=T;case T:if(1024&o.flags){for(;16>de;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}o.length=le,o.head&&(o.head.extra_len=le),512&o.flags&&(a[0]=255&le,a[1]=255&le>>>8,o.check=h(o.check,a,2,0)),le=0,de=0}else o.head&&(o.head.extra=null);o.mode=I;case I:if(1024&o.flags&&(ce=o.length,ce>se&&(ce=se),ce&&(o.head&&(ke=o.head.extra_len-o.length,!o.head.extra&&(o.head.extra=Array(o.head.extra_len)),p.arraySet(o.head.extra,l,re,ce,ke)),512&o.flags&&(o.check=h(o.check,l,ce,re)),se-=ce,re+=ce,o.length-=ce),o.length))break inf_leave;o.length=0,o.mode=P;case P:if(2048&o.flags){if(0===se)break inf_leave;ce=0;do ke=l[re+ce++],o.head&&ke&&65536>o.length&&(o.head.name+=c(ke));while(ke&&ce<se);if(512&o.flags&&(o.check=h(o.check,l,ce,re)),se-=ce,re+=ce,ke)break inf_leave}else o.head&&(o.head.name=null);o.length=0,o.mode=H;case H:if(4096&o.flags){if(0===se)break inf_leave;ce=0;do ke=l[re+ce++],o.head&&ke&&65536>o.length&&(o.head.comment+=c(ke));while(ke&&ce<se);if(512&o.flags&&(o.check=h(o.check,l,ce,re)),se-=ce,re+=ce,ke)break inf_leave}else o.head&&(o.head.comment=null);o.mode=F;case F:if(512&o.flags){for(;16>de;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}if(le!==(65535&o.check)){e.msg="header crc mismatch",o.mode=te;break}le=0,de=0}o.head&&(o.head.hcrc=1&o.flags>>9,o.head.done=!0),e.adler=o.check=0,o.mode=z;break;case O:for(;32>de;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}e.adler=o.check=r(le),le=0,de=0,o.mode=R;case R:if(0===o.havedict)return e.next_out=ae,e.avail_out=oe,e.next_in=re,e.avail_in=se,o.hold=le,o.bits=de,2;e.adler=o.check=1,o.mode=z;case z:if(t===5||t===_)break inf_leave;case N:if(o.last){le>>>=7&de,de-=7&de,o.mode=K;break}for(;3>de;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}switch(o.last=1&le,le>>>=1,de-=1,3&le){case 0:o.mode=L;break;case 1:if(d(o),o.mode=q,t===_){le>>>=2,de-=2;break inf_leave}break;case 2:o.mode=U;break;case 3:e.msg="invalid block type",o.mode=te;}le>>>=2,de-=2;break;case L:for(le>>>=7&de,de-=7&de;32>de;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}if((65535&le)!=(65535^le>>>16)){e.msg="invalid stored block lengths",o.mode=te;break}if(o.length=65535&le,le=0,de=0,o.mode=M,t===_)break inf_leave;case M:o.mode=X;case X:if(ce=o.length,ce){if(ce>se&&(ce=se),ce>oe&&(ce=oe),0===ce)break inf_leave;p.arraySet(ne,l,re,ce,ae),se-=ce,re+=ce,oe-=ce,ae+=ce,o.length-=ce;break}o.mode=z;break;case U:for(;14>de;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}if(o.nlen=(31&le)+257,le>>>=5,de-=5,o.ndist=(31&le)+1,le>>>=5,de-=5,o.ncode=(15&le)+4,le>>>=4,de-=4,286<o.nlen||30<o.ndist){e.msg="too many length or distance symbols",o.mode=te;break}o.have=0,o.mode=B;case B:for(;o.have<o.ncode;){for(;3>de;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}o.lens[s[o.have++]]=7&le,le>>>=3,de-=3}for(;19>o.have;)o.lens[s[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,we={bits:o.lenbits},Ce=f(0,o.lens,0,19,o.lencode,0,o.work,we),o.lenbits=we.bits,Ce){e.msg="invalid code lengths set",o.mode=te;break}o.have=0,o.mode=Y;case Y:for(;o.have<o.nlen+o.ndist;){for(;;){if(i=o.lencode[le&(1<<o.lenbits)-1],ge=i>>>24,fe=255&i>>>16,ye=65535&i,ge<=de)break;if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}if(16>ye)le>>>=ge,de-=ge,o.lens[o.have++]=ye;else{if(16===ye){for(ve=ge+2;de<ve;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}if(le>>>=ge,de-=ge,0===o.have){e.msg="invalid bit length repeat",o.mode=te;break}ke=o.lens[o.have-1],ce=3+(3&le),le>>>=2,de-=2}else if(17===ye){for(ve=ge+3;de<ve;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}le>>>=ge,de-=ge,ke=0,ce=3+(7&le),le>>>=3,de-=3}else{for(ve=ge+7;de<ve;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}le>>>=ge,de-=ge,ke=0,ce=11+(127&le),le>>>=7,de-=7}if(o.have+ce>o.nlen+o.ndist){e.msg="invalid bit length repeat",o.mode=te;break}for(;ce--;)o.lens[o.have++]=ke}}if(o.mode===te)break;if(0===o.lens[256]){e.msg="invalid code -- missing end-of-block",o.mode=te;break}if(o.lenbits=9,we={bits:o.lenbits},Ce=f(y,o.lens,0,o.nlen,o.lencode,0,o.work,we),o.lenbits=we.bits,Ce){e.msg="invalid literal/lengths set",o.mode=te;break}if(o.distbits=6,o.distcode=o.distdyn,we={bits:o.distbits},Ce=f(b,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,we),o.distbits=we.bits,Ce){e.msg="invalid distances set",o.mode=te;break}if(o.mode=q,t===_)break inf_leave;case q:o.mode=W;case W:if(6<=se&&258<=oe){e.next_out=ae,e.avail_out=oe,e.next_in=re,e.avail_in=se,o.hold=le,o.bits=de,g(e,pe),ae=e.next_out,ne=e.output,oe=e.avail_out,re=e.next_in,l=e.input,se=e.avail_in,le=o.hold,de=o.bits,o.mode===z&&(o.back=-1);break}for(o.back=0;;){if(i=o.lencode[le&(1<<o.lenbits)-1],ge=i>>>24,fe=255&i>>>16,ye=65535&i,ge<=de)break;if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}if(fe&&0==(240&fe)){for(be=ge,xe=fe,_e=ye;;){if(i=o.lencode[_e+((le&(1<<be+xe)-1)>>be)],ge=i>>>24,fe=255&i>>>16,ye=65535&i,be+ge<=de)break;if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}le>>>=be,de-=be,o.back+=be}if(le>>>=ge,de-=ge,o.back+=ge,o.length=ye,0===fe){o.mode=J;break}if(32&fe){o.back=-1,o.mode=z;break}if(64&fe){e.msg="invalid literal/length code",o.mode=te;break}o.extra=15&fe,o.mode=V;case V:if(o.extra){for(ve=o.extra;de<ve;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}o.length+=le&(1<<o.extra)-1,le>>>=o.extra,de-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=Z;case Z:for(;;){if(i=o.distcode[le&(1<<o.distbits)-1],ge=i>>>24,fe=255&i>>>16,ye=65535&i,ge<=de)break;if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}if(0==(240&fe)){for(be=ge,xe=fe,_e=ye;;){if(i=o.distcode[_e+((le&(1<<be+xe)-1)>>be)],ge=i>>>24,fe=255&i>>>16,ye=65535&i,be+ge<=de)break;if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}le>>>=be,de-=be,o.back+=be}if(le>>>=ge,de-=ge,o.back+=ge,64&fe){e.msg="invalid distance code",o.mode=te;break}o.offset=ye,o.extra=15&fe,o.mode=$;case $:if(o.extra){for(ve=o.extra;de<ve;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}o.offset+=le&(1<<o.extra)-1,le>>>=o.extra,de-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){e.msg="invalid distance too far back",o.mode=te;break}o.mode=G;case G:if(0===oe)break inf_leave;if(ce=pe-oe,o.offset>ce){if(ce=o.offset-ce,ce>o.whave&&o.sane){e.msg="invalid distance too far back",o.mode=te;break}ce>o.wnext?(ce-=o.wnext,me=o.wsize-ce):me=o.wnext-ce,ce>o.length&&(ce=o.length),he=o.window}else he=ne,me=ae-o.offset,ce=o.length;ce>oe&&(ce=oe),oe-=ce,o.length-=ce;do ne[ae++]=he[me++];while(--ce);0===o.length&&(o.mode=W);break;case J:if(0===oe)break inf_leave;ne[ae++]=o.length,oe--,o.mode=W;break;case K:if(o.wrap){for(;32>de;){if(0===se)break inf_leave;se--,le|=l[re++]<<de,de+=8}if(pe-=oe,e.total_out+=pe,o.total+=pe,pe&&(e.adler=o.check=o.flags?h(o.check,ne,pe,ae-pe):m(o.check,ne,pe,ae-pe)),pe=oe,(o.flags?le:r(le))!==o.check){e.msg="incorrect data check",o.mode=te;break}le=0,de=0}o.mode=Q;case Q:if(o.wrap&&o.flags){for(;32>de;){if(0===se)break inf_leave;se--,le+=l[re++]<<de,de+=8}if(le!==(4294967295&o.total)){e.msg="incorrect length check",o.mode=te;break}le=0,de=0}o.mode=ee;case ee:Ce=1;break inf_leave;case te:Ce=w;break inf_leave;case ie:return v;case 32:default:return C;}return(e.next_out=ae,e.avail_out=oe,e.next_in=re,e.avail_in=se,o.hold=le,o.bits=de,(o.wsize||pe!==e.avail_out&&o.mode<te&&(o.mode<K||t!==x))&&u(e,e.output,e.next_out,pe-e.avail_out))?(o.mode=ie,v):(ue-=e.avail_in,pe-=e.avail_out,e.total_in+=ue,e.total_out+=pe,o.total+=pe,o.wrap&&pe&&(e.adler=o.check=o.flags?h(o.check,ne,pe,e.next_out-pe):m(o.check,ne,pe,e.next_out-pe)),e.data_type=o.bits+(o.last?64:0)+(o.mode===z?128:0)+(o.mode===q||o.mode===M?256:0),(0===ue&&0===pe||t===x)&&Ce===k&&(Ce=-5),Ce)},i.inflateEnd=function(e){if(!e||!e.state)return C;var t=e.state;return t.window&&(t.window=null),e.state=null,k},i.inflateGetHeader=function(e,t){var i;return e&&e.state?(i=e.state,0==(2&i.wrap))?C:(i.head=t,t.done=!1,k):C},i.inflateSetDictionary=function(e,t){var i=t.length,n,r,a;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==R)?C:n.mode===R&&(r=1,r=m(r,t,i,0),r!==n.check)?w:(a=u(e,t,i,i),a)?(n.mode=ie,v):(n.havedict=1,k):C},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":158,"./adler32":160,"./crc32":162,"./inffast":165,"./inftrees":167}],167:[function(e,t){"use strict";var i=e("../utils/common"),n=15,r=852,a=592,s=0,o=1,l=2,d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,m,h,g,f,y,b){var x=b.bits,_=0,k=0,C=0,w=0,v=0,S=0,j=0,E=0,D=0,A=0,T=null,I=0,P=new i.Buf16(n+1),H=new i.Buf16(n+1),F=null,O=0,R,z,N,L,M,X,U,B,Y;for(_=0;_<=n;_++)P[_]=0;for(k=0;k<h;k++)P[t[m+k]]++;for(v=x,w=n;1<=w&&0===P[w];w--);if(v>w&&(v=w),0==w)return g[f++]=20971520,g[f++]=20971520,b.bits=1,0;for(C=1;C<w&&0===P[C];C++);for(v<C&&(v=C),E=1,_=1;_<=n;_++)if(E<<=1,E-=P[_],0>E)return-1;if(0<E&&(e===s||1!=w))return-1;for(H[1]=0,_=1;_<n;_++)H[_+1]=H[_]+P[_];for(k=0;k<h;k++)0!==t[m+k]&&(y[H[t[m+k]]++]=k);if(e===s?(T=F=y,X=19):e===o?(T=d,I-=257,F=u,O-=257,X=256):(T=p,F=c,X=-1),A=0,k=0,_=C,M=f,S=v,j=0,N=-1,D=1<<v,L=D-1,e===o&&D>r||e===l&&D>a)return 1;for(;;){U=_-j,y[k]<X?(B=0,Y=y[k]):y[k]>X?(B=F[O+y[k]],Y=T[I+y[k]]):(B=96,Y=0),R=1<<_-j,z=1<<S,C=z;do z-=R,g[M+(A>>j)+z]=0|(U<<24|B<<16|Y);while(0!==z);for(R=1<<_-1;A&R;)R>>=1;if(0===R?A=0:(A&=R-1,A+=R),k++,0==--P[_]){if(_==w)break;_=t[m+y[k]]}if(_>v&&(A&L)!==N){for(0==j&&(j=v),M+=C,S=_-j,E=1<<S;S+j<w&&(E-=P[S+j],!(0>=E));)S++,E<<=1;if(D+=1<<S,e===o&&D>r||e===l&&D>a)return 1;N=A&L,g[N]=0|(v<<24|S<<16|M-f)}}return 0!==A&&(g[M+A]=0|(4194304|_-j<<24)),b.bits=v,0}},{"../utils/common":158}],168:[function(e,t){"use strict";t.exports={0:"",1:"stream end",2:"need dictionary","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],169:[function(e,t,i){"use strict";function n(e){for(var t=e.length;0<=--t;)e[t]=0}function r(e,t,i,n,r){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=e&&e.length}function a(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function o(e){return 256>e?K[e]:K[256+(e>>>7)]}function l(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=255&t>>>8}function d(e,t,i){e.bi_valid>M-i?(e.bi_buf|=65535&t<<e.bi_valid,l(e,e.bi_buf),e.bi_buf=t>>M-e.bi_valid,e.bi_valid+=i-M):(e.bi_buf|=65535&t<<e.bi_valid,e.bi_valid+=i)}function u(e,t,i){d(e,i[2*t],i[2*t+1])}function s(e,t){var i=0;do i|=1&e,e>>>=1,i<<=1;while(0<--t);return i>>>1}function p(e){16===e.bi_valid?(l(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function c(e,t){var i=t.dyn_tree,r=t.max_code,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,d=t.stat_desc.max_length,u=0,p,c,n,m,h,g;for(m=0;m<=L;m++)e.bl_count[m]=0;for(i[2*e.heap[e.heap_max]+1]=0,p=e.heap_max+1;p<N;p++)(c=e.heap[p],m=i[2*i[2*c+1]+1]+1,m>d&&(m=d,u++),i[2*c+1]=m,!(c>r))&&(e.bl_count[m]++,h=0,c>=l&&(h=o[c-l]),g=i[2*c],e.opt_len+=g*(m+h),s&&(e.static_len+=g*(a[2*c+1]+h)));if(0!=u){do{for(m=d-1;0===e.bl_count[m];)m--;e.bl_count[m]--,e.bl_count[m+1]+=2,e.bl_count[d]--,u-=2}while(0<u);for(m=d;0!==m;m--)for(c=e.bl_count[m];0!==c;)(n=e.heap[--p],!(n>r))&&(i[2*n+1]!==m&&(e.opt_len+=(m-i[2*n+1])*i[2*n],i[2*n+1]=m),c--)}}function h(e,t,i){var r=Array(L+1),a=0,o,l;for(o=1;o<=L;o++)r[o]=a=a+i[o-1]<<1;for(l=0;l<=t;l++){var n=e[2*l+1];0!==n&&(e[2*l]=s(r[n]++,n))}}function m(){var e=Array(L+1),t,i,n,a,o;for(n=0,a=0;a<H-1;a++)for(ee[a]=n,t=0;t<1<<W[a];t++)Q[n++]=a;for(Q[n-1]=a,o=0,a=0;16>a;a++)for(te[a]=o,t=0;t<1<<V[a];t++)K[o++]=a;for(o>>=7;a<R;a++)for(te[a]=o<<7,t=0;t<1<<V[a]-7;t++)K[256+o++]=a;for(i=0;i<=L;i++)e[i]=0;for(t=0;143>=t;)G[2*t+1]=8,t++,e[8]++;for(;255>=t;)G[2*t+1]=9,t++,e[9]++;for(;279>=t;)G[2*t+1]=7,t++,e[7]++;for(;287>=t;)G[2*t+1]=8,t++,e[8]++;for(h(G,O+1,e),t=0;t<R;t++)J[2*t+1]=5,J[2*t]=s(t,5);ne=new r(G,W,F+1,O,L),re=new r(J,V,0,R,L),ae=new r([],Z,0,z,X)}function g(e){var t;for(t=0;t<O;t++)e.dyn_ltree[2*t]=0;for(t=0;t<R;t++)e.dyn_dtree[2*t]=0;for(t=0;t<z;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*U]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function f(e){8<e.bi_valid?l(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function y(e,t,i,n){f(e),n&&(l(e,i),l(e,~i)),D.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}function b(e,t,i,n){var r=2*t,a=2*i;return e[r]<e[a]||e[r]===e[a]&&n[t]<=n[i]}function x(e,t,i){for(var n=e.heap[i],r=i<<1;r<=e.heap_len&&(r<e.heap_len&&b(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!b(t,n,e.heap[r],e.depth));)e.heap[i]=e.heap[r],i=r,r<<=1;e.heap[i]=n}function _(e,t,i){var n=0,r,a,s,l;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*n]<<8|e.pending_buf[e.d_buf+2*n+1],a=e.pending_buf[e.l_buf+n],n++,0===r?u(e,a,t):(s=Q[a],u(e,s+F+1,t),l=W[s],0!==l&&(a-=ee[s],d(e,a,l)),r--,s=o(r),u(e,s,i),l=V[s],0!==l&&(r-=te[s],d(e,r,l)));while(n<e.last_lit);u(e,U,t)}function k(e,t){var i=t.dyn_tree,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.elems,o=-1,l,n,d;for(e.heap_len=0,e.heap_max=N,l=0;l<s;l++)0===i[2*l]?i[2*l+1]=0:(e.heap[++e.heap_len]=o=l,e.depth[l]=0);for(;2>e.heap_len;)d=e.heap[++e.heap_len]=2>o?++o:0,i[2*d]=1,e.depth[d]=0,e.opt_len--,a&&(e.static_len-=r[2*d+1]);for(t.max_code=o,l=e.heap_len>>1;1<=l;l--)x(e,i,l);d=s;do l=e.heap[1],e.heap[1]=e.heap[e.heap_len--],x(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=l,e.heap[--e.heap_max]=n,i[2*d]=i[2*l]+i[2*n],e.depth[d]=(e.depth[l]>=e.depth[n]?e.depth[l]:e.depth[n])+1,i[2*l+1]=i[2*n+1]=d,e.heap[1]=d++,x(e,i,1);while(2<=e.heap_len);e.heap[--e.heap_max]=e.heap[1],c(e,t),h(i,o,e.bl_count)}function C(e,t,i){var r=-1,a=t[1],s=0,o=7,l=4,d,n;for(0===a&&(o=138,l=3),t[2*(i+1)+1]=65535,d=0;d<=i;d++){if(n=a,a=t[2*(d+1)+1],++s<o&&n===a)continue;else s<l?e.bl_tree[2*n]+=s:0===n?10>=s?e.bl_tree[2*Y]++:e.bl_tree[2*q]++:(n!==r&&e.bl_tree[2*n]++,e.bl_tree[2*B]++);s=0,r=n,0===a?(o=138,l=3):n===a?(o=6,l=3):(o=7,l=4)}}function w(e,t,i){var r=-1,a=t[1],s=0,o=7,l=4,p,n;for(0===a&&(o=138,l=3),p=0;p<=i;p++){if(n=a,a=t[2*(p+1)+1],++s<o&&n===a)continue;else if(s<l)do u(e,n,e.bl_tree);while(0!=--s);else 0===n?10>=s?(u(e,Y,e.bl_tree),d(e,s-3,3)):(u(e,q,e.bl_tree),d(e,s-11,7)):(n!==r&&(u(e,n,e.bl_tree),s--),u(e,B,e.bl_tree),d(e,s-3,2));s=0,r=n,0===a?(o=138,l=3):n===a?(o=6,l=3):(o=7,l=4)}}function v(e){var t;for(C(e,e.dyn_ltree,e.l_desc.max_code),C(e,e.dyn_dtree,e.d_desc.max_code),k(e,e.bl_desc),t=z-1;3<=t&&0===e.bl_tree[2*$[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function S(e,t,i,n){var r;for(d(e,t-257,5),d(e,i-1,5),d(e,n-4,4),r=0;r<n;r++)d(e,e.bl_tree[2*$[r]+1],3);w(e,e.dyn_ltree,t-1),w(e,e.dyn_dtree,i-1)}function j(e){var t=4093624447,i;for(i=0;31>=i;i++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*i])return A;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return T;for(i=32;i<F;i++)if(0!==e.dyn_ltree[2*i])return T;return A}function E(e,t,i,n){d(e,(I<<1)+(n?1:0),3),y(e,t,i,!0)}var D=e("../utils/common"),A=0,T=1,I=0,P=1,H=29,F=256,O=F+1+H,R=30,z=19,N=2*O+1,L=15,M=16,X=7,U=256,B=16,Y=17,q=18,W=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],V=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=Array(2*(O+2));n(G);var J=Array(2*R);n(J);var K=Array(512);n(K);var Q=Array(258-3+1);n(Q);var ee=Array(H);n(ee);var te=Array(R);n(te);var ie=!1,ne,re,ae;i._tr_init=function(e){ie||(m(),ie=!0),e.l_desc=new a(e.dyn_ltree,ne),e.d_desc=new a(e.dyn_dtree,re),e.bl_desc=new a(e.bl_tree,ae),e.bi_buf=0,e.bi_valid=0,g(e)},i._tr_stored_block=E,i._tr_flush_block=function(e,t,i,n){var r=0,a,s;0<e.level?(e.strm.data_type===2&&(e.strm.data_type=j(e)),k(e,e.l_desc),k(e,e.d_desc),r=v(e),a=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=a&&(a=s)):a=s=i+5,i+4<=a&&-1!==t?E(e,t,i,n):e.strategy===4||s===a?(d(e,(P<<1)+(n?1:0),3),_(e,G,J)):(d(e,(2<<1)+(n?1:0),3),S(e,e.l_desc.max_code+1,e.d_desc.max_code+1,r+1),_(e,e.dyn_ltree,e.dyn_dtree)),g(e),n&&f(e)},i._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=255&t>>>8,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(Q[i]+F+1)]++,e.dyn_dtree[2*o(t)]++),e.last_lit===e.lit_bufsize-1},i._tr_align=function(e){d(e,P<<1,3),u(e,U,G),p(e)}},{"../utils/common":158}],170:[function(e,t){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],171:[function(e,t){(function(e){"use strict";t.exports=e.version&&0!==e.version.indexOf("v0.")&&(0!==e.version.indexOf("v1.")||0===e.version.indexOf("v1.8."))?e:{nextTick:function(t,n,r,a){if("function"!=typeof t)throw new TypeError("\"callback\" argument must be a function");var s=arguments.length,o,l;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,a)});default:for(o=Array(s-1),l=0;l<o.length;)o[l++]=arguments[l];return e.nextTick(function(){t.apply(null,o)});}}}}).call(this,e("_process"))},{_process:172}],172:[function(e,t){"use strict";function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(e){if(p===setTimeout)return setTimeout(e,0);if((p===i||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function a(e){if(c===clearTimeout)return clearTimeout(e);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function s(){h&&f&&(h=!1,f.length?m=f.concat(m):g=-1,m.length&&o())}function o(){if(!h){var e=r(s);h=!0;for(var t=m.length;t;){for(f=m,m=[];++g<t;)f&&f[g].run();g=-1,t=m.length}f=null,h=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function d(){}var u=t.exports={},p,c;(function(){try{p="function"==typeof setTimeout?setTimeout:i}catch(t){p=i}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(t){c=n}})();var m=[],h=!1,g=-1,f;u.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new l(e,t)),1!==m.length||h||r(o)},l.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=d,u.addListener=d,u.once=d,u.off=d,u.removeListener=d,u.removeAllListeners=d,u.emit=d,u.prependListener=d,u.prependOnceListener=d,u.listeners=function(){return[]},u.binding=function(){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],173:[function(e,t){"use strict";t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":174}],174:[function(e,t){"use strict";function i(e){return this instanceof i?void(l.call(this,e),d.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",n)):new i(e)}function n(){this.allowHalfOpen||this._writableState.ended||a.nextTick(r,this)}function r(e){e.end()}var a=e("process-nextick-args"),s=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t};t.exports=i;var o=e("core-util-is");o.inherits=e("inherits");var l=e("./_stream_readable"),d=e("./_stream_writable");o.inherits(i,l);for(var u=s(d.prototype),p=0,c;p<u.length;p++)c=u[p],i.prototype[c]||(i.prototype[c]=d.prototype[c]);Object.defineProperty(i.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(i.prototype,"destroyed",{get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),i.prototype._destroy=function(e,t){this.push(null),this.end(),a.nextTick(t,e)}},{"./_stream_readable":176,"./_stream_writable":178,"core-util-is":8,inherits:19,"process-nextick-args":171}],175:[function(e,t){"use strict";function i(e){return this instanceof i?void n.call(this,e):new i(e)}t.exports=i;var n=e("./_stream_transform"),r=e("core-util-is");r.inherits=e("inherits"),r.inherits(i,n),i.prototype._transform=function(e,t,i){i(null,e)}},{"./_stream_transform":177,"core-util-is":8,inherits:19}],176:[function(e,t){(function(i,n){"use strict";function r(e){return L.from(e)}function a(e){return L.isBuffer(e)||e instanceof M}function s(e,t,i){return"function"==typeof e.prependListener?e.prependListener(t,i):void(e._events&&e._events[t]?F(e._events[t])?e._events[t].unshift(i):e._events[t]=[i,e._events[t]]:e.on(t,i))}function o(t,i){O=O||e("./_stream_duplex"),t=t||{};var n=i instanceof O;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(a||0===a)?a:s,this.highWaterMark=p(this.highWaterMark),this.buffer=new Y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!W&&(W=e("string_decoder/").StringDecoder),this.decoder=new W(t.encoding),this.encoding=t.encoding)}function l(t){return O=O||e("./_stream_duplex"),this instanceof l?void(this._readableState=new o(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),N.call(this)):new l(t)}function d(e,t,i,n,a){var s=e._readableState;if(null===t)s.reading=!1,f(e,s);else{var o;a||(o=c(s,t)),o?e.emit("error",o):s.objectMode||t&&0<t.length?("string"!=typeof t&&!s.objectMode&&Object.getPrototypeOf(t)!==L.prototype&&(t=r(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):u(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!i?(t=s.decoder.write(t),s.objectMode||0!==t.length?u(e,s,t,!1):x(e,s)):u(e,s,t,!1))):!n&&(s.reading=!1)}return m(s)}function u(e,t,i,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",i),e.read(0)):(t.length+=t.objectMode?1:i.length,n?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&y(e)),x(e,t)}function c(e,t){var i;return a(t)||"string"==typeof t||void 0===t||e.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i}function m(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function h(e){return e>=Z?e=Z:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function g(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e===e?(e>t.highWaterMark&&(t.highWaterMark=h(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function f(e,t){if(!t.ended){if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,y(e)}}function y(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(B("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?H.nextTick(b,e):b(e))}function b(e){B("emit readable"),e.emit("readable"),S(e)}function x(e,t){t.readingMore||(t.readingMore=!0,H.nextTick(_,e,t))}function _(e,t){for(var i=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(B("maybeReadMore read 0"),e.read(0),i!==t.length);)i=t.length;t.readingMore=!1}function k(e){return function(){var t=e._readableState;B("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&z(e,"data")&&(t.flowing=!0,S(e))}}function C(e){B("readable nexttick read 0"),e.read(0)}function w(e,t){t.resumeScheduled||(t.resumeScheduled=!0,H.nextTick(v,e,t))}function v(e,t){t.reading||(B("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),S(e),t.flowing&&!t.reading&&e.read(0)}function S(e){var t=e._readableState;for(B("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){if(0===t.length)return null;var i;return t.objectMode?i=t.buffer.shift():!e||e>=t.length?(i=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):i=E(e,t.buffer,t.decoder),i}function E(e,t,i){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=i?D(e,t):A(e,t),n}function D(e,t){var i=t.head,n=1,r=i.data;for(e-=r.length;i=i.next;){var a=i.data,s=e>a.length?a.length:e;if(r+=s===a.length?a:a.slice(0,e),e-=s,0===e){s===a.length?(++n,t.head=i.next?i.next:t.tail=null):(t.head=i,i.data=a.slice(s));break}++n}return t.length-=n,r}function A(e,t){var i=L.allocUnsafe(e),n=t.head,r=1;for(n.data.copy(i),e-=n.data.length;n=n.next;){var a=n.data,s=e>a.length?a.length:e;if(a.copy(i,i.length-e,0,s),e-=s,0===e){s===a.length?(++r,t.head=n.next?n.next:t.tail=null):(t.head=n,n.data=a.slice(s));break}++r}return t.length-=r,i}function T(e){var t=e._readableState;if(0<t.length)throw new Error("\"endReadable()\" called on non-empty stream");t.endEmitted||(t.ended=!0,H.nextTick(I,t,e))}function I(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}var H=e("process-nextick-args");t.exports=l;var F=e("isarray"),O;l.ReadableState=o;var R=e("events").EventEmitter,z=function(e,t){return e.listeners(t).length},N=e("./internal/streams/stream"),L=e("safe-buffer").Buffer,M=n.Uint8Array||function(){},X=e("core-util-is");X.inherits=e("inherits");var U=e("util"),B=void 0;B=U&&U.debuglog?U.debuglog("stream"):function(){};var Y=e("./internal/streams/BufferList"),q=e("./internal/streams/destroy"),W;X.inherits(l,N);var V=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),l.prototype.destroy=q.destroy,l.prototype._undestroy=q.undestroy,l.prototype._destroy=function(e,t){this.push(null),t(e)},l.prototype.push=function(e,t){var i=this._readableState,n;return i.objectMode?n=!0:"string"==typeof e&&(t=t||i.defaultEncoding,t!==i.encoding&&(e=L.from(e,t),t=""),n=!0),d(this,e,t,!1,n)},l.prototype.unshift=function(e){return d(this,e,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(t){return W||(W=e("string_decoder/").StringDecoder),this._readableState.decoder=new W(t),this._readableState.encoding=t,this};var Z=8388608;l.prototype.read=function(e){B("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return B("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?T(this):y(this),null;if(e=g(e,t),0===e&&t.ended)return 0===t.length&&T(this),null;var n=t.needReadable;B("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,B("length less than watermark",n)),t.ended||t.reading?(n=!1,B("reading or ended",n)):n&&(B("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=g(i,t)));var r;return r=0<e?j(e,t):null,null===r?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(!t.ended&&(t.needReadable=!0),i!==e&&t.ended&&T(this)),null!==r&&this.emit("data",r),r},l.prototype._read=function(){this.emit("error",new Error("_read() is not implemented"))},l.prototype.pipe=function(e,t){function n(e,t){B("onunpipe"),e===c&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,a())}function r(){B("onend"),e.end()}function a(){B("cleanup"),e.removeListener("close",d),e.removeListener("finish",u),e.removeListener("drain",f),e.removeListener("error",l),e.removeListener("unpipe",n),c.removeListener("end",r),c.removeListener("end",p),c.removeListener("data",o),y=!0,m.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&f()}function o(t){B("ondata"),b=!1;var i=e.write(t);!1!==i||b||((1===m.pipesCount&&m.pipes===e||1<m.pipesCount&&-1!==P(m.pipes,e))&&!y&&(B("false write response, pause",c._readableState.awaitDrain),c._readableState.awaitDrain++,b=!0),c.pause())}function l(t){B("onerror",t),p(),e.removeListener("error",l),0===z(e,"error")&&e.emit("error",t)}function d(){e.removeListener("finish",u),p()}function u(){B("onfinish"),e.removeListener("close",d),p()}function p(){B("unpipe"),c.unpipe(e)}var c=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=e;break;case 1:m.pipes=[m.pipes,e];break;default:m.pipes.push(e);}m.pipesCount+=1,B("pipe count=%d opts=%j",m.pipesCount,t);var h=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr,g=h?r:p;m.endEmitted?H.nextTick(g):c.once("end",g),e.on("unpipe",n);var f=k(c);e.on("drain",f);var y=!1,b=!1;return c.on("data",o),s(e,"error",l),e.once("close",d),e.once("finish",u),e.emit("pipe",c),m.flowing||(B("pipe resume"),c.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<a;s++)r[s].emit("unpipe",this,n);return this}var i=P(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},l.prototype.on=function(e,t){var i=N.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&y(this):H.nextTick(C,this))}return i},l.prototype.addListener=l.prototype.on,l.prototype.resume=function(){var e=this._readableState;return e.flowing||(B("resume"),e.flowing=!0,w(this,e)),this},l.prototype.pause=function(){return B("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(B("pause"),this._readableState.flowing=!1,this.emit("pause")),this},l.prototype.wrap=function(e){var t=this,r=this._readableState,a=!1;for(var s in e.on("end",function(){if(B("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){if((B("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!(r.objectMode&&(null===i||void 0===i)))&&(r.objectMode||i&&i.length)){var n=t.push(i);n||(a=!0,e.pause())}}),e)void 0===this[s]&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var i=0;i<V.length;i++)e.on(V[i],this.emit.bind(this,V[i]));return this._read=function(t){B("wrapped _read",t),a&&(a=!1,e.resume())},this},Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),l._fromList=j}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./_stream_duplex":174,"./internal/streams/BufferList":179,"./internal/streams/destroy":180,"./internal/streams/stream":181,_process:172,"core-util-is":8,events:9,inherits:19,isarray:23,"process-nextick-args":171,"safe-buffer":186,"string_decoder/":195,util:4}],177:[function(e,t){"use strict";function i(e,t){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=t&&this.push(t),n(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function n(e){return this instanceof n?void(s.call(this,e),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",r)):new n(e)}function r(){var e=this;"function"==typeof this._flush?this._flush(function(t,i){a(e,t,i)}):a(this,null,null)}function a(e,t,i){if(t)return e.emit("error",t);if(null!=i&&e.push(i),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=n;var s=e("./_stream_duplex"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,s),n.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},n.prototype._transform=function(){throw new Error("_transform() is not implemented")},n.prototype._write=function(e,t,i){var n=this._transformState;if(n.writecb=i,n.writechunk=e,n.writeencoding=t,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},n.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},n.prototype._destroy=function(e,t){var i=this;s.prototype._destroy.call(this,e,function(e){t(e),i.emit("close")})}},{"./_stream_duplex":174,"core-util-is":8,inherits:19}],178:[function(e,t){(function(i,n,r){"use strict";function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){D(t,e)}}function s(e){return O.from(e)}function o(e){return O.isBuffer(e)||e instanceof R}function l(){}function d(t,i){I=I||e("./_stream_duplex"),t=t||{};var n=i instanceof I;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,s=t.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(s||0===s)?s:o,this.highWaterMark=p(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===t.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){x(i,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function u(t){return I=I||e("./_stream_duplex"),N.call(u,this)||this instanceof I?void(this._writableState=new d(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),F.call(this)):new u(t)}function c(e,t){var i=new Error("write after end");e.emit("error",i),A.nextTick(t,i)}function m(e,t,i,n){var r=!0,a=!1;return null===i?a=new TypeError("May not write null values to stream"):"string"!=typeof i&&void 0!==i&&!t.objectMode&&(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),A.nextTick(n,a),r=!1),r}function h(e,t,i){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=O.from(t,i)),t}function g(e,t,i,n,r,a){if(!i){var s=h(t,n,r);n!==s&&(i=!0,r="buffer",n=s)}var o=t.objectMode?1:n.length;t.length+=o;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:r,isBuf:i,callback:a,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else f(e,t,!1,o,n,r,a);return l}function f(e,t,i,n,r,a,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,i?e._writev(r,t.onwrite):e._write(r,a,t.onwrite),t.sync=!1}function y(e,t,i,n,r){--t.pendingcb,i?(A.nextTick(r,n),A.nextTick(j,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(r(n),e._writableState.errorEmitted=!0,e.emit("error",n),j(e,t))}function b(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function x(e,t){var i=e._writableState,n=i.sync,r=i.writecb;if(b(i),t)y(e,i,n,t,r);else{var a=w(i);a||i.corked||i.bufferProcessing||!i.bufferedRequest||C(e,i),n?T(_,e,i,a,r):_(e,i,a,r)}}function _(e,t,i,n){i||k(e,t),t.pendingcb--,n(),j(e,t)}function k(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function C(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var n=t.bufferedRequestCount,r=Array(n),s=t.corkedRequestsFree;s.entry=i;for(var o=0,l=!0;i;)r[o]=i,i.isBuf||(l=!1),i=i.next,o+=1;r.allBuffers=l,f(e,t,!0,t.length,r,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;i;){var d=i.chunk,u=i.encoding,p=i.callback,c=t.objectMode?1:d.length;if(f(e,t,!1,c,d,u,p),i=i.next,t.bufferedRequestCount--,t.writing)break}null===i&&(t.lastBufferedRequest=null)}t.bufferedRequest=i,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function v(e,t){e._final(function(i){t.pendingcb--,i&&e.emit("error",i),t.prefinished=!0,e.emit("prefinish"),j(e,t)})}function S(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,A.nextTick(v,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function j(e,t){var i=w(t);return i&&(S(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),i}function E(e,t,i){t.ending=!0,j(e,t),i&&(t.finished?A.nextTick(i):e.once("finish",i)),t.ended=!0,e.writable=!1}function D(e,t,i){var n=e.entry;for(e.entry=null;n;){var r=n.callback;t.pendingcb--,r(i),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var A=e("process-nextick-args");t.exports=u;var T=!i.browser&&-1<["v0.10","v0.9."].indexOf(i.version.slice(0,5))?r:A.nextTick,I;u.WritableState=d;var P=e("core-util-is");P.inherits=e("inherits");var H={deprecate:e("util-deprecate")},F=e("./internal/streams/stream"),O=e("safe-buffer").Buffer,R=n.Uint8Array||function(){},z=e("./internal/streams/destroy");P.inherits(u,F),d.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(d.prototype,"buffer",{get:H.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var N;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(e){return!!N.call(this,e)||!(this!==u)&&e&&e._writableState instanceof d}})):N=function(e){return e instanceof this},u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},u.prototype.write=function(e,t,i){var n=this._writableState,r=!1,a=!n.objectMode&&o(e);return a&&!O.isBuffer(e)&&(e=s(e)),"function"==typeof t&&(i=t,t=null),a?t="buffer":!t&&(t=n.defaultEncoding),"function"!=typeof i&&(i=l),n.ended?c(this,i):(a||m(this,n,e,i))&&(n.pendingcb++,r=g(this,n,a,e,t,i)),r},u.prototype.cork=function(){var e=this._writableState;e.corked++},u.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&C(this,e))},u.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),u.prototype._write=function(e,t,i){i(new Error("_write() is not implemented"))},u.prototype._writev=null,u.prototype.end=function(e,t,i){var n=this._writableState;"function"==typeof e?(i=e,e=null,t=null):"function"==typeof t&&(i=t,t=null),null!==e&&e!==void 0&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||E(this,n,i)},Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),u.prototype.destroy=z.destroy,u.prototype._undestroy=z.undestroy,u.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,e("timers").setImmediate)},{"./_stream_duplex":174,"./internal/streams/destroy":180,"./internal/streams/stream":181,_process:172,"core-util-is":8,inherits:19,"process-nextick-args":171,"safe-buffer":186,timers:196,"util-deprecate":198}],179:[function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,i){e.copy(t,i)}var a=e("safe-buffer").Buffer,n=e("util");t.exports=function(){function e(){i(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i},e.prototype.concat=function(e){if(0===this.length)return a.alloc(0);if(1===this.length)return this.head.data;for(var t=a.allocUnsafe(e>>>0),n=this.head,s=0;n;)r(n.data,t,s),s+=n.data.length,n=n.next;return t},e}(),n&&n.inspect&&n.inspect.custom&&(t.exports.prototype[n.inspect.custom]=function(){var e=n.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":186,util:4}],180:[function(e,t){"use strict";function i(e,t){e.emit("error",t)}var n=e("process-nextick-args");t.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&n.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":171}],181:[function(e,t){"use strict";t.exports=e("events").EventEmitter},{events:9}],182:[function(e,t){"use strict";t.exports=e("./readable").PassThrough},{"./readable":183}],183:[function(e,t,i){"use strict";i=t.exports=e("./lib/_stream_readable.js"),i.Stream=i,i.Readable=i,i.Writable=e("./lib/_stream_writable.js"),i.Duplex=e("./lib/_stream_duplex.js"),i.Transform=e("./lib/_stream_transform.js"),i.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":174,"./lib/_stream_passthrough.js":175,"./lib/_stream_readable.js":176,"./lib/_stream_transform.js":177,"./lib/_stream_writable.js":178}],184:[function(e,t){"use strict";t.exports=e("./readable").Transform},{"./readable":183}],185:[function(e,t){"use strict";t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":178}],186:[function(e,t,i){"use strict";function n(e,t){for(var i in e)t[i]=e[i]}function r(e,t,i){return s(e,t,i)}var a=e("buffer"),s=a.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=a:(n(a,i),i.Buffer=r),n(s,r),r.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,i)},r.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=s(e);return void 0===t?n.fill(0):"string"==typeof i?n.fill(t,i):n.fill(t),n},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a.SlowBuffer(e)}},{buffer:7}],187:[function(e,t){(function(e){"use strict";t.exports="function"==typeof e?e:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}}).call(this,e("timers").setImmediate)},{timers:196}],188:[function(e,t,i){"use strict";function n(e,t){var i=r(t);0===i.length&&(i="\u03B4 ");var n=[];for(var s of e)a(s,n,t);return 0<n.length?i+n.join(", "):""}function r(e){var t=[],i=`${p(e.nucleus)} NMR`;return e.solvent&&t.push(u(e.solvent)),e.frequencyObserved&&t.push(`${(1*e.frequencyObserved).toFixed(0)} MHz`),i+=0<t.length?` (${t.join(", ")}): δ `:": \u03B4 ",i}function a(e,t,i){var n="",r=[],a=[e.from,e.to];if(Array.isArray(e.signal)&&0<e.signal.length){var o=e.signal;if(1<o.length){!0===i.ascending&&o.sort((e,t)=>{return e.delta-t.delta}),n+=`${w(...a).toFixed(i.nbDecimalDelta)}-${C(...a).toFixed(i.nbDecimalDelta)}`,n+=` (${s(e,i)}`;for(var l of o)r=[],void 0!==l.delta&&(n=c(n),n+=l.delta.toFixed(i.nbDecimalDelta)),d({},l,r,i),0<r.length&&(n+=` (${r.join(", ")})`);n+=")"}else r=[],void 0===o[0].delta?(n+=`${w(...a).toFixed(i.nbDecimalDelta)}-${C(...a).toFixed(i.nbDecimalDelta)}`,d(e,o[0],r,i),0<r.length&&(n+=` (${r})`)):(n+=o[0].delta.toFixed(i.nbDecimalDelta),d(e,o[0],r,i),0<r.length&&(n+=` (${r.join(", ")})`))}else n+=`${w(...a).toFixed(i.nbDecimalDelta)}-${C(...a).toFixed(i.nbDecimalDelta)}`,d(e,[],r,i),0<r.length&&(n+=` (${r.join(", ")})`);t.push(n)}function s(e,t){var i="";return e.pubIntegral?i=e.pubIntegral:e.integral&&(i=e.integral.toFixed(0)+t.nucleus[t.nucleus.length-1]),i}function o(e,t,i){var n=s(e,i);0<n.length&&t.push(n)}function l(e,t){var i=e.multiplicity||(0,f.joinCoupling)(e,0.05);0<i.length&&t.push(i)}function d(e,t,i,n){for(var r of n.format)switch(r.toUpperCase()){case"I":o(e,i,n);break;case"M":l(t,i);break;case"A":g(t,i);break;case"J":h(t,i,n);break;default:throw new Error(`Unknow format letter: ${r}`);}}function u(e){return e.replace(/([0-9]+)/g,"<sub>$1</sub>")}function p(e){return e.replace(/([0-9]+)/g,"<sup>$1</sup>")}function c(e){return!(0<e.length)||e.match(/ $/)||e.match(/\($/)||(e+=", "),e}function m(e){return e=e.replace(/([0-9]+)/g,"<sub>$1</sub>"),e=e.replace(/"([^"]*)"/g,"<i>$1</i>"),e}function h(e,t,i){if(Array.isArray(e.j)&&0<e.j.length){e.j.sort(function(e,t){return t.coupling-e.coupling});var n=[];for(var r of e.j)void 0!==r.coupling&&n.push(r.coupling.toFixed(i.nbDecimalJ));0<n.length&&t.push(`<i>J</i> = ${n.join(", ")} Hz`)}}function g(e,t){e.pubAssignment?t.push(m(e.pubAssignment)):e.assignment&&t.push(m(e.assignment))}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t={}){t.nucleus||(t.nucleus="1H");var i=t.nucleus.toLowerCase().replace(/[0-9]/g,""),r=y[i];t=Object.assign({},r,{ascending:!1,format:"IMJA"},t),e=JSON.parse(JSON.stringify(e)),!0===t.ascending&&e.sort((e,t)=>{var i=w(e.from,e.to),n=w(t.from,t.to);return i-n});var a=n(e,t);return 0<a.length&&(a+="."),a};var f=e("spectra-nmr-utilities"),y={h:{nucleus:"1H",nbDecimalDelta:2,nbDecimalJ:1,observedFrequency:400},c:{nucleus:"13C",nbDecimalDelta:1,nbDecimalJ:1,observedFrequency:100},f:{nucleus:"19F",nbDecimalDelta:2,nbDecimalJ:1,observedFrequency:400}}},{"spectra-nmr-utilities":193}],189:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var r=e("./range/Ranges");Object.defineProperty(i,"Ranges",{enumerable:!0,get:function(){return n(r).default}});var a=e("./acs/acs.js");Object.defineProperty(i,"getACS",{enumerable:!0,get:function(){return n(a).default}})},{"./acs/acs.js":188,"./range/Ranges":190}],190:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var r=e("spectra-nmr-utilities"),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(r),s=e("ml-stat"),o=e("lodash.round"),l=n(o),d=e("../acs/acs"),u=n(d),p=e("./peak2Vector"),c=n(p);class m extends Array{constructor(e){if(Array.isArray(e)){super(e.length);for(var t=0;t<e.length;t++)this[t]=e[t]}else"number"==typeof e?super(e):super()}static fromSignals(e,t){t=Object.assign({},{lineWidth:1,frequency:400,nucleus:"1H"},t),e=a.group(e,t);var n=e.length,r=Array(n),s,i,o,l,d,u;for(s=0;s<n;s++){if(o=e[s],l=0,u=o.j,u)for(i=0;i<u.length;i++)l+=u[i].coupling;l+=2*t.lineWidth,l/=t.frequency,r[s]={from:o.delta-l,to:o.delta+l,integral:o.nbAtoms,signal:[o]}}for(s=0;s<r.length;s++)for(d=(r[s].from+r[s].to)/2,l=_(r[s].from-r[s].to),i=r.length-1;i>s;i--)_(d-(r[i].from+r[i].to)/2)<=_(l+_(r[i].from-r[i].to))/2&&(r[s].from=w(r[s].from,r[i].from),r[s].to=C(r[s].to,r[i].to),r[s].integral+=r[i].integral,r[i].signal.forEach((e)=>{r[s].signal.push(e)}),r.splice(i,1),i=r.length-1,d=(r[s].from+r[s].to)/2,l=_(r[s].from-r[s].to));return r.sort((e,t)=>{return e.from-t.from}),new m(r)}static fromSpectrum(e,t={}){return e.getRanges(t)}static shouldIntegrate(e){return!e.kind||"solvent"!==e.kind+""&&"reference"!==e.kind+""&&"impurity"!==e.kind+""&&"standard"!==e.kind+""}sumOfIntegrals(e={}){var t=e.sumAll,i=0;for(var n of this)(t!==void 0&&t||m.shouldIntegrate(n))&&(i+=n.integral);return i}updateIntegrals(e={}){var t=e.factor||1,n;if(e.sum){var i=e.sum||1,r=this.sumOfIntegrals();t=i/(r||1)}for(n=0;n<this.length;n++)this[n].integral=(0,l.default)(this[n].integral*t,5);return this}getVector(e){if(this[0].signal[0].peak)return(0,c.default)(this.getPeakList(),e);throw Error("This method is only for signals with peaks")}getPeakList(){if(this[0].signal[0].peak){for(var e=[],t=0,i;t<this.length;t++){i=this[t];for(var n=0;n<i.signal.length;n++)e=e.concat(i.signal[n].peak)}return e}throw Error("This method is only for signals with peaks")}getACS(e){return(0,u.default)(this,e)}toIndex(e={}){var t=[];e.joinCouplings&&this.joinCouplings(e);for(var n of this)if(Array.isArray(n.signal)&&0<n.signal.length){for(var r=n.signal.length,o=Array(r),l=0;l<r;l++)o[l]=n.signal[l].delta;t.push({multiplicity:1<r?"m":n.signal[0].multiplicity||a.joinCoupling(n.signal[0],e.tolerance),delta:s.array.arithmeticMean(o)||0.5*(n.to+n.from),integral:n.integral})}else t.push({delta:0.5*(n.to+n.from),multiplicity:"m"});return t}joinCouplings(e={}){this.forEach((t)=>{t.signal.forEach((t)=>{t.multiplicity=a.joinCoupling(t,e.tolerance)})})}updateMultiplicity(e={}){this.forEach((t)=>{if(t.signal){var i=t.signal;1===i.length?i[0].multiplicity=a.joinCoupling(i[0],e.tolerance):i.forEach((e)=>{e.multiplicity="m"})}})}clone(){var e=JSON.parse(JSON.stringify(this));return new m(e)}}i.default=m},{"../acs/acs":188,"./peak2Vector":191,"lodash.round":61,"ml-stat":127,"spectra-nmr-utilities":193}],191:[function(e,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n={}){function r(e,t,i,n){var r=e*f(i,2)/4;return r/(f(n-t,2)+f(i/2,2))}function a(e,t,i,n){return e*d(-0.5*f((n-t)/(i/2),2))}var o=n.from,u=o===void 0?null:o,p=n.to,c=p===void 0?null:p,m=n.nbPoints,h=m===void 0?1024:m,g=n.functionName,b=g===void 0?"":g,_=n.nWidth,k=_===void 0?4:_,C;if(null===u){u=s;for(var v=0;v<e.length;v++)C=e[v].x-e[v].width*k,C<u&&(u=C)}if(null===c){c=l;for(var i=0;i<e.length;i++)C=e[i].x+e[i].width*k,C>c&&(c=C)}for(var S=Array(h),E=Array(h),D=(c-u)/(h-1),A=0;A<h;A++)S[A]=u+A*D,E[A]=0;var T=e[0].y?"y":"intensity",I;switch(b.toLowerCase()){case"lorentzian":I=r;break;default:I=a;}for(var P=0,H;P<e.length;P++)if(H=e[P],H.x>u&&H.x<c)for(var F=t((H.x-u)/D),O=t(H.width*k/D),w=F-O;w<F+O;w++)0<=w&&w<h&&(E[w]+=I(H[T],S[w],H.width,H.x));return{x:S,y:E}}},{}],192:[function(i,n,a){"use strict";function l(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function d(e,t,i,n){return"FIX"===n?c(e,t,i):"SQZ"===n?h(e,t,i):"DIF"===n?y(e,t,i):"DIFDUP"===n?g(e,t,i):"CSV"===n?u(e,t,i):"PAC"===n?m(e,t,i):y(e,t,i)}function u(e,t,i){return c(e,t,i,",")}function c(t,n,r,a){a||(a=" ");for(var s="",o=0,l=t.length,d=void 0;o<l-7;){for(s+=e(n+o*r),d=0;8>d;d++)s+=a+t[o++];s+=ke}if(o<l)for(s+=e(n+o*r),d=o;d<l;d++)s+=a+t[d];return s}function m(t,n,r){for(var a="",s=0,o=t.length,l=void 0;s<o-7;){for(a+=e(n+s*r),l=0;8>l;l++)a+=0>t[s]?`-${t[s++]}`:`+${t[s++]}`;a+=ke}if(s<o)for(a+=e(n+s*r),l=s;l<o;l++)a+=0>t[l]?`-${t[l]}`:`+${t[l]}`;return a}function h(t,n,r){for(var a="",s=0,o=t.length,l=void 0;s<o-10;){for(a+=e(n+s*r),l=0;10>l;l++)a+=b(t[s++].toString());a+=ke}if(s<o)for(a+=e(n+s*r),l=s;l<o;l++)a+=b(t[l].toString());return a}function g(t,n,r){var a=0,s=0,o=0,l=void 0,i="",d="",u="",p=Array(t.length-1);for(l=0;l<p.length;l++)p[l]=t[l+1]-t[l];for(var c=p.length;s<c;)0==o?(d=e(n+s*r)+b(t[s].toString())+x(p[s].toString()),i+=d,o+=d.length):p[s-1]===p[s]?a++:0<a?(a++,d=k(a.toString()),i+=d,o+=d.length,a=0,s--):(d=x(p[s].toString()),d.length+o<De?(i+=d,o+=d.length):(i+=ke,u=e(n+s*r)+b(t[s].toString())+d,i+=u,o=u.length)),s++;return 0<a&&(i+=k((a+1).toString())),i+=ke+e(n+s*r)+b(t[s].toString()),i}function y(t,n,r){var a=0,s=0,o=void 0,i="",l="",d="",u=Array(t.length-1);for(o=0;o<u.length;o++)u[o]=t[o+1]-t[o];for(var p=u.length;a<p;)0==s?(l=e(n+a*r)+b(t[a].toString())+x(u[a].toString()),i+=l,s+=l.length):(l=x(u[a].toString()),l.length+s<De?(i+=l,s+=l.length):(i+=ke,d=e(n+a*r)+b(t[a].toString())+l,i+=d,s=d.length)),a++;return i+=ke+e(n+a*r)+b(t[a].toString()),i}function b(e){var t="";return"-"===e.charAt(0)?(t+=Ce[ve][e.charAt(1)],2<e.length&&(t+=e.substring(2))):(t+=Ce[we][e.charAt(0)],1<e.length&&(t+=e.substring(1))),t}function x(e){var t="";return"-"===e.charAt(0)?(t+=Ce[je][e.charAt(1)],2<e.length&&(t+=e.substring(2))):(t+=Ce[Se][e.charAt(0)],1<e.length&&(t+=e.substring(1))),t}function k(e){var t="";return t+=Ce[Ee][e.charAt(0)],1<e.length&&(t+=e.substring(1)),t}function v(e,n,r,a,s){var o="",l=e.getSpectraVariable(0),u=e.getSpectraVariable(1),c=e.getSpectraVariable(2);o+=`##DATA CLASS= NTUPLES${Ae}`,o+=`##NUM DIM= 2${Ae}`;var m=e.getDataType().trim(),h={},g=void 0;for(g=0;g<e.getNbSubSpectra();g++)e.setActiveElement(g),h[e.getXUnits()]?h[e.getXUnits()].value++:h[e.getXUnits()]={value:1,index:g};var f=Object.keys(h),y=f[0],b=0;for(g=1;g<f.length;g++)h[f[g]].value>h[y].value&&(y=f[g],b=h[f[g]].index);var x=!1;e.setActiveElement(b);var _=0<=e.getDataType().indexOf("NMR");_&&(o+=`##.OBSERVE FREQUENCY= ${e.getParamDouble("observefrequency",0)}${Ae}`,o+=`##.OBSERVE NUCLEUS= ^${e.getNucleus()}${Ae}`,o+=`##$DECIM= ${e.getParamDouble("$DECIM",0)}${Ae}`,o+=`##$DSPFVS= ${e.getParamDouble("$DSPFVS",0)}${Ae}`,o+=`##$FCOR= ${p(e.getParamDouble("$FCOR",0))}${Ae}`,e.containsParam("$SW_h")?o+=`##$SW_h= ${e.getParamDouble("$SW_h",0)}${Ae}`:e.containsParam("$SW_p")&&(o+=`##$SW_p= ${e.getParamDouble("$SW_p",0)}${Ae}`),o+=`##$SW= ${e.getParamDouble("$SW",0)}${Ae}`,o+=`##$TD= ${p(e.getParamDouble("$TD",0))}${Ae}`,o+=`##$BF1= ${e.getParamDouble("$BF1",0)}${Ae}`,o+=`##$GRPDLY= ${e.getParamDouble("$GRPDLY",0)}${Ae}`,o+=`##.DIGITISER RES= ${e.getParamInt(".DIGITISER RES",0)}${Ae}`,o+=`##.PULSE SEQUENCE= ${e.getParamString(".PULSE SEQUENCE","")}${Ae}`,o+=`##.SOLVENT NAME= ${e.getSolventName()}${Ae}`,o+=`##$NUC1= <${e.getNucleus()}>${Ae}`,o+=e.containsParam("2D_X_FREQUENCY")?`##$SFO1= ${e.getParamDouble("2D_X_FREQUENCY",0)}${Ae}`:`##$SFO1= ${e.getParamDouble("$SFO1",0)}${Ae}`,e.containsParam("2D_X_OFFSET")&&(o+=`##$OFFSET= ${e.getParamDouble("2D_X_OFFSET",0)}${Ae}`),e.is2D()&&(o+=`$$Parameters for 2D NMR Spectrum${Ae}`,o+=`##$NUC1= <${e.getNucleus(2)}>${Ae}`,e.containsParam("2D_Y_FREQUENCY")&&(o+=`##$SFO1= ${e.getParamDouble("2D_Y_FREQUENCY",0)}${Ae}`,o+=`##$SFO2= ${e.getParamDouble("2D_Y_FREQUENCY",0)}${Ae}`,o+=`##$BF2= ${e.getParamDouble("2D_Y_FREQUENCY",0)}${Ae}`),e.containsParam("2D_Y_OFFSET")&&(o+=`##$OFFSET= ${e.getParamDouble("2D_Y_OFFSET",0)}${Ae}`),o+=`$$End of Parameters for 2D NMR Spectrum${Ae}`)),o+=`##NTUPLES=\t${m}${Ae}`;var k=1,C=1;if(!e.is2D()&&1<e.getNbSubSpectra()&&_&&(x=!0),x?(o+=`##VAR_NAME=\t${e.getXUnits()},\t${m.substring(4)}/REAL,\t${m.substring(4)}/IMAG${Ae}`,o+=`##SYMBOL=\tX,\tR,\tI${Ae}`,o+=`##VAR_TYPE=\tINDEPENDENT,\tDEPENDENT,\tDEPENDENT${Ae}`,o+="CSV"!==a||"PAC"!==a?`##VAR_FORM=\tAFFN,\tASDF,\tASDF${Ae}`:`##VAR_FORM=\tAFFN,\tAFFN,\tAFFN${Ae}`,o+=`##VAR_DIM=\t${e.getNbPoints()},\t${e.getNbPoints()},\t${e.getNbPoints()}${Ae}`,o+=`##UNITS=\tHZ,\t${e.getYUnits()},\t${c.units}${Ae}`,o+=`##FACTOR=\t${1/r},\t${1/n},\t${1/n}${Ae}`,"PPM"===e.getXUnits()&&(k=e.observeFrequencyX()),o+=`##FIRST=\t${e.getFirstX()*k},\t${e.getY(0)},\t0${Ae}`,o+=`##LAST=\t${e.getLastX()*k},\t${e.getLastY()},\t0${Ae}`):(k=1,e.is2D()?(o+=`##VAR_NAME=\tFREQUENCY1,\tFREQUENCY2,\tSPECTRUM${Ae}`,o+=`##SYMBOL=\tF1,\tF2,\tY${Ae}`,o+=`##.NUCLEUS=\t${e.getNucleus(2)},\t${e.getNucleus(1)}${Ae}`,o+=`##VAR_TYPE=\tINDEPENDENT,\tINDEPENDENT,\tDEPENDENT${Ae}`,o+="CSV"!==a||"PAC"!==a?`##VAR_FORM=\tAFFN,\tAFFN,\tASDF${Ae}`:`##VAR_FORM=\tAFFN,\tAFFN,\tASDF${Ae}`,o+=`##VAR_DIM=\t${e.getNbSubSpectra()},\t${e.getNbPoints()},\t${e.getNbPoints()}${Ae}`,o+=`##UNITS=\tHZ,\tHZ,\t${e.getZUnits()}${Ae}`,"PPM"===e.getXUnits()&&(k=e.getParamDouble("2D_Y_FREQUENCY",1)),"PPM"===e.getYUnits()&&(C=e.getParamDouble("2D_X_FREQUENCY",1)),o+=`##FACTOR=\t1,\t${C/r},\t${1/n}${Ae}`,o+=`##FIRST=\t${e.getParamDouble("firstY",0)*k},\t${e.getFirstX()*C},\t${e.getY(0)}${Ae}`,o+=`##LAST=\t${e.getParamDouble("lastY",0)*k},\t${e.getLastX()*C},\t${e.getY(e.getNbPoints()-1)}${Ae}`):(o+=`##VAR_NAME=\t${l.varname},\t${u.varname},\t${l.varname}${Ae}`,o+=`##SYMBOL=\t${l.symbol},\t${u.symbol},\t${c.symbol}${Ae}`,o+=`##VAR_TYPE=\t${l.vartype},\t${u.vartype},\t${c.vartype}${Ae}`,o+="CSV"!==a||"PAC"!==a?`##VAR_FORM=\tAFFN,\tASDF,\tASDF${Ae}`:`##VAR_FORM=\tAFFN,\tAFFN,\tAFFN${Ae}`,o+=`##VAR_DIM=\t${l.vardim},\t${u.vardim},\t${c.vardim}${Ae}`,o+=`##UNITS=\tHZ,\t${e.getYUnits()},\t${c.units}${Ae}`,"PPM"===e.getXUnits()&&(k=e.observeFrequencyX()),o+=`##FACTOR=\t${1/r},\t${1/n}${Ae}`,o+=`##FIRST=\t${l.first*k},\t${u.first},\t${c.first}${Ae}`,o+=`##LAST=\t${l.last*k},\t${u.last},\t${c.last}${Ae}`)),null!==s)for(var w=s.length-1;0<=w;w--)e.containsParam(s[w])&&(o+=`##${s[w]}= ${e.getParam(s[w],"")}${Ae}`);var i=0,v=0,S=1;for(e.is2D()&&_&&(i=e.getParamDouble("firstY",0)*k,v=e.getParamDouble("lastY",0)*k,S=(v-i)/(e.getNbSubSpectra()-1)),g=0;g<e.getNbSubSpectra();g++)if(e.setActiveElement(g),i=e.getParamDouble("firstY",0)*k+S*g,o+=`##PAGE= ${i}${Ae}`,e.is2D()&&_&&(o+=`##FIRST=\t${e.getParamDouble("firstY",0)*k},\t${e.getFirstX()*C},\t${e.getY(0)}${Ae}`),o+="##DATA TABLE= ",e.isDataClassPeak()){o+=`(XY..XY), PEAKS${Ae}`;for(var j=0;j<e.getNbPoints();j++)o+=`${e.getX(j)}, ${e.getY(j)}${Ae}`}else if(e.isDataClassXY()){o+=_?e.is2D()?`(F2++(Y..Y)), PROFILE${Ae}`:0==g%2?`(X++(R..R)), XYDATA${Ae}`:`(X++(I..I)), XYDATA${Ae}`:`(X++(Y..Y)), XYDATA${Ae}`;for(var E="",D=Array(e.getNbPoints()),A=D.length-1;0<=A;A--)D[A]=t(e.getY(A)*n);E+=d(D,e.getFirstX()*r,e.getDeltaX()*r,a),o+=E+Ae}return o+=`##END NTUPLES= ${m}${Ae}`,o+="##END= ",e.setActiveElement(0),o}function S(e,n,r,a,s){var o="";if(e.isDataClassPeak()&&(o+=`##DATA CLASS= PEAK TABLE${Ae}`),e.isDataClassXY()&&(o+=`##DATA CLASS= XYDATA${Ae}`),e.setActiveElement(0),0<=e.getDataType().indexOf("NMR")&&(o+=`##.OBSERVE FREQUENCY= ${e.getParamDouble("observefrequency",0)}${Ae}`,o+=`##.OBSERVE NUCLEUS= ^${e.getNucleus()}${Ae}`,o+=`##$DECIM= ${t(e.getParamDouble("$DECIM",0))}${Ae}`,o+=`##$DSPFVS= ${t(e.getParamDouble("$DSPFVS",0))}${Ae}`,o+=`##$FCOR= ${t(e.getParamDouble("$FCOR",0))}${Ae}`,o+=`##$SW_h= ${e.getParamDouble("$SW_h",0)}${Ae}`,o+=`##$SW= ${e.getParamDouble("$SW",0)}${Ae}`,o+=`##$TD= ${t(e.getParamDouble("$TD",0))}${Ae}`,o+=`##$GRPDLY= ${e.getParamDouble("$GRPDLY",0)}${Ae}`,o+=`##$BF1= ${e.getParamDouble("$BF1",0)}${Ae}`,o+=`##$SFO1= ${e.getParamDouble("$SFO1",0)}${Ae}`,o+=`##$NUC1= <${e.getNucleus()}>${Ae}`,o+=`##.SOLVENT NAME= ${e.getSolventName()}${Ae}`),o+=`##XUNITS=\t${e.getXUnits()}${Ae}`,o+=`##YUNITS=\t${e.getYUnits()}${Ae}`,o+=`##NPOINTS=\t${e.getNbPoints()}${Ae}`,o+=`##FIRSTX=\t${e.getFirstX()}${Ae}`,o+=`##LASTX=\t${e.getLastX()}${Ae}`,o+=`##FIRSTY=\t${e.getFirstY()}${Ae}`,o+=`##LASTY=\t${e.getLastY()}${Ae}`,e.isDataClassPeak()?(o+=`##XFACTOR=1${Ae}`,o+=`##YFACTOR=1${Ae}`):e.isDataClassXY()&&(o+=`##XFACTOR= ${1/r}${Ae}`,o+=`##YFACTOR= ${1/n}${Ae}`),o+=`##MAXY= ${e.getMaxY()}${Ae}`,o+=`##MINY= ${e.getMinY()}${Ae}`,null!==s)for(var l=s.length-1;0<=l;l--)e.containsParam(s[l])&&(o+=`##${s[l]}= ${e.getParam(s[l],"")}${Ae}`);if(e.isDataClassPeak()){o+=`##PEAK TABLE= (XY..XY)${Ae}`;for(var i=0;i<e.getNbPoints();i++)o+=`${e.getX(i)}, ${e.getY(i)}${Ae}`;o+="##END "}else if(e.isDataClassXY()){o+=`##DELTAX= ${e.getDeltaX()}${Ae}`,o+=`##XYDATA=(X++(Y..Y))${Ae}`;for(var u="",p=Array(e.getNbPoints()),c=p.length-1;0<=c;c--)p[c]=t(e.getY(c)*n);u+=d(p,e.getFirstX()*r,e.getDeltaX()*r,a),o+=u+Ae,o+="##END= "}return e.setActiveElement(0),o}function j(e,t={}){t=Object.assign({},He,t,{optimize:!1,broadWidth:!1});var i=t,n=i.from,r=i.to,a=i.broadWidth,s=i.optimize,o=i.noiseLevel,l=void 0===o?_(e.getNoiseLevel(t))*t.thresholdFactor:o,d=void 0!==n&&void 0!==r?e.getVector({from:n,to:r,outputX:!0}):e.getSpectrumData(),u=ce.gsd(d.x,d.y,t);return a&&(u=ce.post.joinBroadPeaks(u,{width:t.broadWidth})),s&&(u=ce.post.optimizePeaks(u,d.x,d.y,t)),u.filter((e)=>e.y>=l)}function E(e){var t=e.getNbPoints(),i=e.getNbSubSpectra()/2,n="NMR SPECTRUM",r=fe.FFT;1<i&&(n="nD NMR SPECTRUM"),r.init(t);for(var a=e.getParamDouble("$FCOR",0),s=0;s<i;s++){var o=e.getYData(2*s),l=e.getYData(2*s+1);o[0]*=a,l[0]*=a,r.fft(o,l),o=o.concat(o.slice(0,(t+1)/2)),o.splice(0,(t+1)/2),l=l.concat(l.slice(0,(t+1)/2)),l.splice(0,(t+1)/2),e.setActiveElement(2*s),D(e,n),e.setActiveElement(2*s+1),D(e,n)}if(e.is2D())throw new Error("FT of 2D is not implemented");return e.setActiveElement(0),e}function D(e,t){var n=e.getParamDouble("$BF1",NaN),r=e.getParamDouble("$SFO1",NaN),a=e.getParamDouble("$SW",NaN),s=1e6*((r-n)/n),o=0.5*a*r/n;e.setDataType(t),e.setFirstX(s+o),e.setLastX(s-o),e.setXUnits("PPM");var l=e.getXData(),d=s+o;o=-2*o/(l.length-1);for(var u=0;u<l.length;u++)l[u]=d,d+=o}function A(e,t){var i=e.getNbSubSpectra(),n=void 0,r=void 0,a=void 0,s=void 0,o=void 0,l=void 0;if(0!==t)for(var d=0;d<i;d++){for(e.setActiveElement(d),n=e.getNbPoints(),l=e.getYData(),o=e.getXData(),r=e.getLastX(),a=(r-o[0])/(n-1),s=n;s<t;s++)l.push(0),o.push(r+a);t<n&&(l.splice(t,l.length-1),o.splice(t,o.length-1)),e.setFirstX(o[0]),e.setLastX(o[o.length-1])}return e.setActiveElement(0),e}function T(e,t,n){var a=Number.isFinite;t=a(t)?t:0,n=a(n)?n:0;for(var s=e.getNbPoints(),o=e.getYData(0),l=e.getYData(1),d=n/s,u=2*f(r(d/2),2),p=r(d),c=Math.cos(t),m=r(t),h=void 0,g=void 0,y=void 0,b=void 0,x=void 0,_=0;_<s;_++)x=s-_-1,x=_,y=o[x]*c-l[x]*m,b=o[x]*m+l[x]*c,o[x]=y,l[x]=b,h=c-(u*c+p*m),g=m-(u*m-p*c),c=h,m=g;return e.resetMinMax(),e.putParam("PHC0",t),e.putParam("PHC1",n),e}function I(e,t){var i=e.length;if(t%=i,_(t)>i/2&&(t=0<t?t-i:t+i),0!==t)for(var n=0,r=t,a=i,s=e[n],o=void 0,l=t,d=0<t?1:-1;0<a;)r=P(r,i),o=e[r],e[r]=s,r+=t,s=o,a--,r===l&&(r=P(r+d,i),l=r,n=P(r-t,i),s=e[n])}function P(e,t){return 0>e&&(e+=t),e>=t&&(e-=t),e}function H(e,t){var i=e.activeElement,n=0;t.nbPoints?n=t.nbPoints:t.brukerFilter&&(n=0);var r=e.getNbSubSpectra();if(0!==n)for(var a=0;a<r;a++)e.setActiveElement(a),I(e.getYData(),n),t.rotateX&&(I(e.getXData(),n),e.setFirstX(e.getX(0)),e.setLastX(e.getX(e.getNbPoints()-1)));return e.setActiveElement(i),e}function F(e){if(e.is2D())throw TypeError("The data should be one dimensional");if("ppm"!==e.getXUnits(0).toLowerCase())throw TypeError("NMR data should be in ppm");if("ppm"!==e.getXUnits(1).toLowerCase())throw TypeError("The data has no imaginary part");var t=e.getYData(0),i=e.getYData(1),n=JSON.parse(JSON.stringify(e.sd));return n.spectra.splice(1),n.spectra[0].data[0].y=t.map((e,t)=>{var n=f(i[t],2);return o(n+e*e)}),n}function O(e,t){var i=e.peaksComp,n=i.length;e.startX=i[0].x/e.observe-i[0].width,e.stopX=i[n-1].x/e.observe+i[n-1].width,e.integralData.from=i[0].x/e.observe-3*i[0].width,e.integralData.to=i[n-1].x/e.observe+3*i[n-1].width,e.maskPattern=e.mask2,e.multiplicity=R(e,t),e.pattern=e.multiplicity}function R(e,t){var n=void 0,i="",r=1,a=[];if(t&&0<t.length){for(t.sort(function(e,t){return t-e}),n=0;n<t.length-1;n++)_(t[n]-t[n+1])<0.05?r++:(a.push({coupling:_(t[n]),multiplicity:Re[r]}),i+=Re[r],r=1);a.push({coupling:_(t[n]),multiplicity:Re[r]}),i+=Re[r],e.nmrJs=a}else i="s",16<_(e.startX-e.stopX)*e.observe&&(i="br s");return i}function z(e){var t=f(2,e.length),n=void 0,i=void 0,r=[{x:0,intensity:t}];for(n=0;n<e.length;n++)for(i=r.length-1;0<=i;i--)r.push({x:r[i].x+e[n]/2,intensity:r[i].intensity/2}),r[i].x-=e[n]/2,r[i].intensity/=2;for(r.sort(function(e,t){return e.x-t.x}),i=r.length-2;0<=i;i--)0.1>_(r[i].x-r[i+1].x)&&(r[i].intensity+=r[i+1].intensity,r.splice(i+1,1));return r}function N(t,n){for(var r=e(0.5*t.values.length),a=t.values.length,s=0,o=void 0,i=void 0;s!==n;){for(i=!1;!i;)if(i=!0,t.currentIndex[t.active]++,t.currentIndex[t.active]>=t.values[t.active].length){if(t.active+1===r)return null;t.currentIndex[t.active]=0,i=!1,t.active++}else t.active=0;for(s=0,o=0;o<r;o++)s+=2*t.values[o][t.currentIndex[o]];0!=t.values.length%2&&(s-=t.values[r-1][t.currentIndex[r-1]])}if(s===n){var l=Array(a);for(o=0;o<r;o++)l[o]=t.values[o][t.currentIndex[o]],l[a-o-1]=t.values[o][t.currentIndex[o]];return l}return null}function L(e){var n=Array(e.length),r=Array(e.length),a=void 0,s=void 0;n[0]=[1],n[e.length-1]=[1],r[0]=-1,r[e.length-1]=0;for(var o=1;o<e.length-1;o++){a=t(0.85*e[o].intensity),s=t(1.15*e[o].intensity),n[o]=[];for(var i=a;i<=s;i++)n[o].push(i);r[o]=0}return{values:n,currentIndex:r,active:0}}function M(e,t,i){var n=X(e,t,i),r=e.peaksComp,a=e.mask,s=e.delta1;e.delta1=(e.peaks[0].x+e.peaks[e.peaks.length-1].x)/2;var o=X(e,t,i);return e.peaksComp.length>r.length?o:(e.delta1=s,e.peaksComp=r,e.mask=a,n)}function X(t,n,r){var a=void 0,s=void 0,o=void 0,l=void 0,d=void 0,u=void 0,i=Array(t.peaks.length);for(u=0;u<i.length;u++)i[u]={x:t.peaks[u].x*t.observe,intensity:t.peaks[u].intensity,width:t.peaks[u].width};for(u=i.length-2;0<=u;u--)0.25>_(i[u].x-i[u+1].x)&&(i[u].x=i[u].x*i[u].intensity+i[u+1].x*i[u+1].intensity,i[u].intensity+=i[u+1].intensity,i[u].x/=i[u].intensity,i[u].intensity/=2,i[u].width+=i[u+1].width,i.splice(u+1,1));t.peaksComp=i;var p=i.length,c=Array(p);t.mask=c;var m=0,h=i.length-1,g=t.delta1*t.observe,f=[(i[0].x+i[p-1].x)/2,1];n=U(_(g-f[0]));var y=0;for(u=0;u<p;u++)c[u]=!0,y+=t.peaks[u].intensity;for(;m<=h;){if(c[m]=!0,c[h]=!0,m==h)2<p&&_(i[m].x-g)>n&&(c[m]=!1);else if(a=C(i[m].intensity,i[h].intensity),s=w(i[m].intensity,i[h].intensity),l=a/s,l>ze)i[m].intensity===s?(c[m]=!1,h++):(c[h]=!1,m--);else{var b=_(i[m].x-g),x=_(i[h].x-g);_(b-x)<n?(o=w(i[m].intensity,i[h].intensity),d=w(i[m].width,i[h].width),i[m].intensity=i[h].intensity=o,i[m].width=i[h].width=d,f=[f[0]+(i[h].x+i[m].x)/2,f[1]+1]):C(b,x)===x?(c[h]=!1,m--):(c[m]=!1,h++)}if(m++,h--,1===r&&(g=Y(i,c),isNaN(g)))return 0;n=U(_(g-f[0]/f[1]))}for(u=p-1;0<=u;u--)!1===c[u]&&i.splice(u,1);if(g=Y(i),isNaN(g))return 0;t.delta1=g/t.observe;var k=0,v=0;if(1<i.length){for(u=e(i.length/2)-1;0<=u;u--)k+=(3+w(_(i[u].x-g),_(i[i.length-1-u].x-g)))/(3+C(_(i[u].x-g),_(i[i.length-1-u].x-g)))*i[u].intensity,v+=i[u].intensity;k/=v}else 1===i.length&&(k=1);var S=0;for(u=0;u<i.length;u++)S+=i[u].intensity;if(k-=0.12*((y-S)/y),0.8<k&&0.97>k&&2>r)return X(t,Ne,2);if(1<i.length){var j;for(u=e(i.length/2)-1;0<=u;u--)j=(i[u].x-i[i.length-1-u].x)/2,i[u].x=g+j,i[i.length-1-u].x=g-j}return k}function U(e){var t=2.5*e;return 0.75>t&&(t=0.75),3<t&&(t=3),t}function B(e,t){for(var n=JSON.parse(JSON.stringify(e.peaksComp)),r=0,a=0,s=0;s<n.length;s++)r+=n[s].intensity;r=f(2,t)/r,e.mask2=JSON.parse(JSON.stringify(e.mask));var i=e.mask2.length-1;for(s=n.length-1;0<=s;s--){for(n[s].intensity*=r;0<=i&&!1===e.mask2[i];)i--;0.75>n[s].intensity?(n.splice(s,1),e.mask2[i]=!1):a+=n[s].intensity,i--}for(a=f(2,t)/a,s=n.length-1;0<=s;s--)n[s].intensity*=a;return n}function Y(e,t){var n=0,r=0,a=void 0,i=void 0;if(t)for(a=0;a<e.length;a++)!0===t[a]&&(i=q(e[a]),n+=i,r+=i*e[a].x);else for(a=0;a<e.length;a++)i=q(e[a]),n+=i,r+=i*e[a].x;return r/n}function q(e){return _(1.57*(e.intensity*e.width))}function W(e,t,n){for(var r=void 0,a=void 0,s=void 0,o=t.length;o--;)for(r=e.length;r--;)e[r].asymmetric||(a=n.error+e[r].width,s=_(t[o].shift-e[r].x),s<a&&e.splice(r,1))}function V(e,t={}){var i=t.solvent,n=i===void 0?"":i,r=t.error,a=r===void 0?0.025:r;n=n.toLowerCase(),"(cd3)2so"===n&&(n="dmso"),"meod"===n&&(n="cd3od");var s=Me[n];if(s)for(var o of Xe){var l=s[o.toLowerCase()];W(e,l,{error:a})}return e}function Z(e,n,r){r=Object.assign({},Ue,r);var a=void 0,i=void 0,s=r.nH;n=V(n,r.removeImpurity);var o=$(e,n,r);if(r.clean)for(a=0;a<o.length;a++)o[a].integralData.value<r.clean&&o.splice(a,1);if(r.compile){var l,d;for(a=0;a<o.length;a++)if(Le.compilePattern(o[a]),o[a].maskPattern&&"m"!==o[a].multiplicity&&""!==o[a].multiplicity){l=0,d=0;var u=[];for(i=o[a].maskPattern.length-1;0<=i;i--)if(d+=G(o[a].peaks[i]),!1===o[a].maskPattern[i]){var p=o[a].peaks.splice(i,1)[0];u.push({x:p.x,y:p.intensity,width:p.width}),o[a].mask.splice(i,1),o[a].mask2.splice(i,1),o[a].maskPattern.splice(i,1),o[a].nbPeaks--,l+=G(p)}if(0<u.length){l=l*o[a].integralData.value/d,o[a].integralData.value-=l;var c=[];for(i=u.length-1;0<=i;i--)c.push(u[i]);r.nH=l;var m=$(e,c,r);for(i=0;i<m.length;i++)o.push(m[i])}}var h=0,g=0;for(a=0;a<o.length;a++)g+=t(o[a].integralData.value);if(g!==s)for(h=s/g,a=0;a<o.length;a++)o[a].integralData.value*=h}if(o.sort(function(e,t){return t.delta1-e.delta1}),r.clean)for(a=o.length-1;0<=a;a--)o[a].integralData.value<r.clean&&o.splice(a,1);var f=Array(o.length);for(a=0;a<o.length;a++){var y=o[a];f[a]={from:be(y.integralData.from,5),to:be(y.integralData.to,5),integral:be(y.integralData.value,5),signal:[{nbAtoms:0,diaID:[],multiplicity:y.multiplicity,kind:"",remark:""}]},r.keepPeaks&&(f[a].signal[0].peak=y.peaks),y.nmrJs&&(f[a].signal[0].j=y.nmrJs),y.asymmetric&&"m"!==y.multiplicity||(f[a].signal[0].delta=be(y.delta1,5))}return new ye.Ranges(f)}function $(e,t,n={}){var r=n.nH,a=r===void 0?100:r,s=n.integralType,o=s===void 0?"sum":s,l=n.frequencyCluster,d=l===void 0?16:l,u=n.frequency,p=u===void 0?e.observeFrequencyX():u,c=void 0,i=void 0,m=void 0,h=void 0,g=[],f={x:1e5},y=0;for(d/=p,c=0;c<t.length;c++){if(_(t[c].x-f.x)>d)m={nbPeaks:1,units:"PPM",startX:t[c].x-t[c].width,stopX:t[c].x+t[c].width,multiplicity:"",pattern:"",observe:p,nucleus:e.getNucleus(1),integralData:{from:t[c].x-3*t[c].width,to:t[c].x+3*t[c].width},peaks:[{x:t[c].x,intensity:t[c].y,width:t[c].width}]},g.push(m);else{var b=t[c].x+t[c].width;m.stopX=C(m.stopX,b),m.startX=w(m.startX,b),m.nbPeaks++,m.peaks.push({x:t[c].x,intensity:t[c].y,width:t[c].width}),m.integralData.from=w(m.integralData.from,t[c].x-3*t[c].width),m.integralData.to=C(m.integralData.to,t[c].x+3*t[c].width)}f=t[c]}for(c=0;c<g.length;c++){h=g[c].peaks;var x=g[c].integralData,k=0,v=0;for(i=0;i<h.length;i++){var S=G(h[i]);k+=h[i].x*S,v+=S}g[c].delta1=k/v,x.value="sum"===o?e.getArea(x.from,x.to):v,y+=x.value}if(0<a){var j=a/y;for(c=0;c<g.length;c++){var E=g[c].integralData;E.value*=j}}return g}function G(e){return _(1.57*(e.intensity*e.width))}function J(e,t,i,n){var r=Q(e,t,i,-n[0],!0),a=0,s=null,o=null;0>r&&(s={nucleusX:i.nucleusX,nucleusY:i.nucleusY},s.resolutionX=i.resolutionX,s.resolutionY=i.resolutionY,s.shiftX=i.shiftY,s.shiftY=i.shiftX,s.peaks=[{x:i.shiftY,y:i.shiftX,z:1}],e.push(s),o=[-n[0],n[1]],t.push(o),a++);var l=void 0,d=void 0,u=!1,p=!1;for(l=e.length-1;0<=l;l--)d=e[l],0===t[l][0]&&(_(d.shiftX-i.shiftX)<Ye&&(u=!0),_(d.shiftY-i.shiftY)<Ye&&(p=!0));return!1==u&&(s={nucleusX:i.nucleusX,nucleusY:i.nucleusY},s.resolutionX=i.resolutionX,s.resolutionY=i.resolutionY,s.shiftX=i.shiftX,s.shiftY=i.shiftX,s.peaks=[{x:i.shiftX,y:i.shiftX,z:1}],e.push(s),o=[0,n[1]],t.push(o),a++),!1==p&&(s={nucleusX:i.nucleusX,nucleusY:i.nucleusY},s.resolutionX=i.resolutionX,s.resolutionY=i.resolutionY,s.shiftX=i.shiftY,s.shiftY=i.shiftY,s.peaks=[{x:i.shiftY,y:i.shiftY,z:1}],e.push(s),o=[0,n[1]],t.push(o),a++),a}function K(e,t,n,r){for(var a=0,s=4*n.shiftX,o=[],l=[],d=void 0,u=e.length-1;0<=u;u--)d=e[u],0!==t[u][0]&&(_(d.shiftX-n.shiftX)<Ye?(a++,r&&t[u][1]++,o.push(u),s+=d.shiftX):_(d.shiftY-n.shiftY)<Ye&&(a++,r&&t[u][1]++,l.push(u),s+=d.shiftY));if(s/=o.length+l.length+4,0<o.length)for(u=o.length-1;0<=u;u--)e[o[u]].shiftX=s;if(0<l.length)for(u=l.length-1;0<=u;u--)e[l[u]].shiftY=s;return n.shiftX=s,n.shiftY=s,a}function Q(e,t,n,r,a){for(var s=e.length-1;0<=s;s--)if(t[s][0]===r&&te(n,e[s],a)<qe){if(!a){var i=(e[s].shiftX+n.shiftX)/2,o=(e[s].shiftY+n.shiftY)/2;e[s].shiftX=i,e[s].shiftY=o,n.shiftX=i,n.shiftY=o}else{var l=n.shiftX,d=e[s].shiftX;e[s].shiftY=l,n.shiftY=d}return s}return-1}function ee(e){for(var t=Array(e.length),n=e.length-1;0<=n;n--)if(t[n]=[0,0],_(e[n].shiftX-e[n].shiftY)<=Ye){t[n][1]=1;var i=(2*e[n].shiftX+e[n].shiftY)/3;e[n].shiftX=i,e[n].shiftY=i}else t[n][0]=0<e[n].shiftX-e[n].shiftY?1:-1;return t}function te(e,t,i){return i?o(f(e.shiftX-t.shiftY,2)+f(e.shiftY-t.shiftX,2)):o(f(e.shiftX-t.shiftX,2)+f(e.shiftY-t.shiftY,2))}function ie(e,t){var n=0,r=0,a=void 0,i=void 0;for(a=0;a<e.length;a++){var s=e[a];for(i=0;i<t.length;i++)n=(t[i].startX+t[i].stopX)/2,r=_(t[i].startX-t[i].stopX)/2,s.nucleusX===t[i].nucleus&&_(s.shiftX-n)<=r&&s._highlight.push(t[i]._highlight[0]),s.nucleusY===t[i].nucleus&&_(s.shiftY-n)<=r&&s._highlight.push(t[i]._highlight[0])}}function ne(e,t){0===t&&(t=1),0>t&&(t=-t);for(var n=e.getNbPoints(),r=e.getNbSubSpectra(),a=Array(n*r),s=e.isHomoNuclear(),o=0,l;o<r;o++){l=e.getYData(o);for(var d=0;d<n;d++)a[o*n+d]=s?0<l[d]?l[d]:0:_(l[d])}var u=re(e);if(s){for(var p=ge.FFTUtils.convolute(a,Ve,r,n),c=_e.findPeaks2DRegion(a,{filteredData:p,rows:r,cols:n,nStdDev:u*t}),m=_e.findPeaks2DMax(a,{filteredData:p,rows:r,cols:n,nStdDev:(u+0.5)*t}),h=0;h<c.length;h++)m.push(c[h]);return We.enhanceSymmetry(ae(m,e,24))}var i=ge.FFTUtils.convolute(a,Ve,r,n),g=_e.findPeaks2DRegion(a,{filteredData:i,rows:r,cols:n,nStdDev:u*t});return ae(We.clean(g,0.05),e,24)}function re(e){return e.isHomoNuclear()?1.5:3}function ae(e,t,n){var r=t.observeFrequencyX(),a=t.observeFrequencyY(),o=t.getFirstY(),l=t.getDeltaY(),d=void 0;for(d=e.length-1;0<=d;d--)e[d].x=t.arrayPointToUnits(e[d].x),e[d].y=o+l*e[d].y,(-1>e[d].y||210<=e[d].y)&&e.splice(d,1);var i=[],u=0;for(n*=n,d=0;d<e.length;d++)for(var p=d;p<e.length;p++)u=f((e[d].x-e[p].x)*r,2)+f((e[d].y-e[p].y)*a,2),u<n?i.push(1):i.push(0);var c=xe(i),m=[];if(null!=e)for(var h=0,g;h<c.length;h++){g={nucleusX:t.getNucleus(1),nucleusY:t.getNucleus(2)},g.resolutionX=(t.getLastX()-t.getFirstX())/t.getNbPoints(),g.resolutionY=l;var y=[];g.shiftX=0,g.shiftY=0;for(var b=[s,0],x=[s,0],_=0,k=c[h].length-1;0<=k;k--)1===c[h][k]&&(y.push({x:e[k].x,y:e[k].y,z:e[k].z}),g.shiftX+=e[k].x*e[k].z,g.shiftY+=e[k].y*e[k].z,_+=e[k].z,e[k].x<b[0]&&(b[0]=e[k].x),e[k].x>b[1]&&(b[1]=e[k].x),e[k].y<x[0]&&(x[0]=e[k].y),e[k].y>x[1]&&(x[1]=e[k].y));g.fromTo=[{from:b[0],to:b[1]},{from:x[0],to:x[1]}],g.shiftX/=_,g.shiftY/=_,g.peaks=y,m.push(g)}return m}Object.defineProperty(a,"__esModule",{value:!0});var se=l(i("ml-array-utils")),oe=l(i("ml-array-min")),le=l(i("ml-array-max")),de=l(i("ml-array-median")),ue=l(i("ml-array-rescale")),pe=l(i("jcampconverter")),ce=l(i("ml-gsd")),me=l(i("brukerconverter")),he=i("nmr-simulation"),ge=i("ml-fft"),fe=l(ge),ye=i("spectra-data-ranges"),be=l(i("lodash.round")),xe=l(i("ml-simple-clustering")),_e=l(i("ml-matrix-peaks-finder")),ke="\r\n",Ce=[["0","1","2","3","4","5","6","7","8","9"],["@","A","B","C","D","E","F","G","H","I"],["@","a","b","c","d","e","f","g","h","i"],["%","J","K","L","M","N","O","P","Q","R"],["%","j","k","l","m","n","o","p","q","r"],[" ","S","T","U","V","W","X","Y","Z","s"]],we=1,ve=2,Se=3,je=4,Ee=5,De=100,Ae="\r\n",Te=`Cheminfo tools ${"3.4.8"}`,Ie={encode:"DIFDUP",yFactor:1,type:"SIMPLE",keep:[]};class Pe{convert(e,t){t=Object.assign({},Ie,t);var i=t.encode.toUpperCase().trim(),n=t.yFactor||1,r=2147483648,a=t.type,s=t.keep;(null===a||0===a.length)&&(a="SIMPLE");var o="";e.setActiveElement(0);var l=n/e.getParamDouble("YFACTOR",1),d={};d=e.is2D()?{min:e.getMinZ(),max:e.getMaxZ()}:e.getMinMaxY(),d.max*l>=r&&(l=r/d.max);var u=_(1/e.getDeltaX());return o+=`##TITLE= ${e.getTitle()}${Ae}`,o+=`##JCAMP-DX= 5.00\t$$${Te}${Ae}`,o+=`##OWNER= ${e.getParamString("##OWNER=","")}${Ae}`,o+=`##DATA TYPE= ${e.getDataType()}${Ae}`,"NTUPLES"===a&&(o+=v(e,l,u,i,s)),"SIMPLE"===a&&(o+=S(e,l,u,i,s)),o}}var He={thresholdFactor:1,minMaxRatio:0.01,broadRatio:2.5e-4,smoothY:!0,widthFactor:4,realTop:!0,functionName:"gaussian",broadWidth:0.25,sgOptions:{windowSize:9,polynomial:3}},Fe=2;class Oe{constructor(e){this.sd=e,this.activeElement=0}static fromJcamp(e,t={}){t=Object.assign({},{keepSpectra:!0,keepRecordsRegExp:/^.+$/},t,{xy:!0});var i=pe.convert(e,t);return new this(i)}static fromXY(e,t,i={}){var n={profiling:[],logs:[],info:{}},r={};return r.isXYdata=!0,r.nbPoints=e.length,r.firstX=e[0],r.firstY=t[0],r.lastX=e[r.nbPoints-1],r.lastY=t[r.nbPoints-1],r.xFactor=1,r.yFactor=1,r.xUnit=i.xUnit,r.yUnit=i.yUnit,r.deltaX=(r.lastX-r.firstX)/(r.nbPoints-1),r.title=i.title||"spectra-data from xy",r.dataType=i.dataType,r.data=[{x:e,y:t}],n.twoD=!1,n.spectra=[r],new this(n)}setActiveElement(e){this.activeElement=e}getActiveElement(){return this.activeElement}getXUnits(){return this.getSpectrum().xUnit}setXUnits(e){this.getSpectrum().xUnit=e}getYUnits(){return this.getSpectrum().yUnit}getSpectraVariable(e){return this.sd.ntuples[e]}getPage(e){return this.sd.spectra[e].page}getNbPoints(e){return this.getSpectrumData(e).y.length}getFirstX(e=this.activeElement){return this.sd.spectra[e].firstX}setFirstX(e,t=this.activeElement){this.sd.spectra[t].firstX=e}getLastX(e=this.activeElement){return this.sd.spectra[e].lastX}setLastX(e,t=this.activeElement){this.sd.spectra[t].lastX=e}getFirstY(e=this.activeElement){return this.sd.spectra[e].firstY}setFirstY(e,t=this.activeElement){this.sd.spectra[t].firstY=e}getLastY(e=this.activeElement){return this.sd.spectra[e].lastY}setLastY(e,t=this.activeElement){this.sd.spectra[t].lastY=e}setDataClass(e){e===Fe&&(this.getSpectrum().isPeaktable=!0,this.getSpectrum().isXYdata=!1),e===1&&(this.getSpectrum().isXYdata=!0,this.getSpectrum().isPeaktable=!1)}isDataClassPeak(){return!!this.getSpectrum().isPeaktable&&this.getSpectrum().isPeaktable}isDataClassXY(){return!!this.getSpectrum().isXYdata&&this.getSpectrum().isXYdata}setDataType(e){this.getSpectrum().dataType=e}getDataType(){return this.getSpectrum().dataType}getSpectrumData(e=this.activeElement){return this.sd.spectra[e].data[0]}getSpectrum(e=this.activeElement){return this.sd.spectra[e]}getNbSubSpectra(){return this.sd.spectra.length}getXData(e){return this.getSpectrumData(e).x}getYData(e){return this.getSpectrumData(e).y}getX(e){return this.getXData()[e]}getY(e){return this.getYData()[e]}getXYData(e=this.activeElement){return[this.getXData(e),this.getYData(e)]}getTitle(e){return this.getSpectrum(e).title}setTitle(e,t){this.getSpectrum(t).title=e}getMinY(e){return oe(this.getYData(e))}getMaxY(e){return le(this.getYData(e))}getMinMaxY(e){return{min:this.getMinY(e),max:this.getMaxY(e)}}getNoiseLevel(e={}){var t=e.from,i=e.to,n=t!==void 0&&i!==void 0?this.getVector({from:t,to:i}):this.getYData(),r=de(n);return r*this.getNMRPeakThreshold(this.getNucleus(1))}arrayPointToUnits(e){return this.getFirstX()-e*(this.getFirstX()-this.getLastX())/(this.getNbPoints()-1)}unitsToArrayPoint(e){if(this.isDataClassXY())return t((this.getFirstX()-e)*(-1/this.getDeltaX()));if(this.isDataClassPeak()){var i=0,n=this.getNbPoints()-1,r=0,a=void 0;if(this.getFirstX()>this.getLastX()){if(n=0,r=this.getNbPoints()-1,e>this.getFirstX())return this.getNbPoints();if(e<this.getLastX())return-1}else{if(e<this.getFirstX())return-1;if(e>this.getLastX())return this.getNbPoints()}for(;1<_(n-r);){if(a=t(p((n+r)/2)),this.getX(a)===e)return a;this.getX(a)>e?n=a:r=a}return i=r,_(this.getX(r)-e)>_(this.getX(n)-e)&&(i=n),i}return 0}getDeltaX(){return(this.getLastX()-this.getFirstX())/(this.getNbPoints()-1)}setMinMax(e,t){var i=this.getYData();ue(i,{min:e,max:t,output:i}),this.updateFirstLastY()}setMin(e){var t=this.getYData();ue(t,{min:e,output:t,autoMinMax:!0}),this.updateFirstLastY()}setMax(e){var t=this.getYData();ue(t,{max:e,output:t,autoMinMax:!0}),this.updateFirstLastY()}yShift(e){for(var t=this.getYData(),n=0;n<t.length;n++)t[n]+=e;this.updateFirstLastY(t)}shift(e){for(var t=0;t<this.getNbSubSpectra();t++){this.setActiveElement(t);for(var i=this.getSpectrumData().x,n=this.getNbPoints(),r=0;r<n;r++)i[r]+=e;this.updateFirstLastX(i)}}updateFirstLastY(e){Array.isArray(e)||(e=this.getYData()),this.setFirstY(e[0]),this.setLastY(e[e.length-1])}updateFirstLastX(e){Array.isArray(e)||(e=this.getXData()),this.setFirstX(e[0]),this.setLastX(e[e.length-1])}fill(e,t,n=0){if(e>t){var r=[t,e];e=r[0],t=r[1]}for(var a=this.getActiveElement(),s=0;s<this.getNbSubSpectra();s++){this.setActiveElement(s);var i=this.getFirstX(),o=this.getLastX();if(this.getDeltaX()){var l=[o,i];i=l[0],o=l[1]}if(e>o||t<i)return;e=C(e,i),t=w(t,o);var d=this.unitsToArrayPoint(e),u=this.unitsToArrayPoint(t);if(d>u){var p=[u,d];d=p[0],u=p[1]}for(var c=this.getYData(),m=d;m<=u;m++)c[m]=n;this.updateFirstLastY()}this.setActiveElement(a)}suppressRange(e,t){this.suppressRanges([{from:e,to:t}])}suppressRanges(e=[]){var t=this.getActiveElement();for(var n of e)if(n.active){var r=n.from,a=n.to;if(r===a)return;if(r>a){var s=[a,r];r=s[0],a=s[1]}for(var o=void 0,l=void 0,d=void 0,u=void 0,p=0;p<this.getNbSubSpectra();p++){this.setActiveElement(p),d=this.getXData(),u=this.getYData();var i=this.getFirstX(),c=this.getLastX();if(this.getDeltaX()){var m=[c,i];i=m[0],c=m[1]}if(r>c||a<i)return;if(r=C(r,i),a=w(a,c),o=this.unitsToArrayPoint(r),l=this.unitsToArrayPoint(a),o>l){var h=[l,o];o=h[0],l=h[1]}u.splice(o,l-o+1),d.splice(o,l-o+1),this.updateFirstLastX(),this.updateFirstLastY(),this.setDataClass(Fe)}}this.setActiveElement(t)}getMaxPeak(){for(var e=this.getSpectraDataY(),t=e[0],n=0,r=0;r<e.length;r++)t<e[r]&&(t=e[r],n=r);return[this.getX(n),t]}getParamDouble(e,t){var i=this.sd.info[e];return i||(i=t),i}getParamString(e,t){var i=this.sd.info[e];return i||(i=t),`${i}`}getParamInt(e,t){var i=this.sd.info[e];return i||(i=t),i}getParam(e,t){var i=this.sd.info[e];return i||(i=t),i}containsParam(e){return!!this.sd.info[e]}getSpectraDataY(){return this.getYData()}getSpectraDataX(){return this.getXData()}resetMinMax(){}putParam(e,t){this.sd.info[e]=t}getArea(e,t){var n=this.unitsToArrayPoint(e),r=this.unitsToArrayPoint(t),a=0;if(n>r){var s=[r,n];n=s[0],r=s[1]}for(var o=n;o<r;o++)a+=this.getY(o);return a*_(this.getDeltaX())}updateIntegrals(e,t={}){e.forEach((e)=>{e.integral=this.getArea(e.from,e.to)}),e.updateIntegrals({sum:t.nH})}getVector(e={}){var t=e.from,i=e.to,n=e.nbPoints,r=e.variant;return n?se.getEquallySpacedData(this.getSpectraDataX(),this.getSpectraDataY(),{from:t,to:i,numberOfPoints:n,variant:r}):this.getPointsInWindow(t,i,e)}reduceData(e={}){if(!this.isDataClassXY())throw Error("reduceData can only apply on equidistant data");for(var t=e.from,n=e.to,r=e.nbPoints,a=this.activeElement,s=0;s<this.getNbSubSpectra();s++)if(this.setActiveElement(s),"hz"!==this.getXUnits().toLowerCase())if(e.nbPoints){var i=this.getSpectraDataX(),o=this.getSpectraDataY();if(i[0]>i[1]&&t<n){var l=[n,t];t=l[0],n=l[1]}else if(t>n){var d=[n,t];t=d[0],n=d[1]}o=se.getEquallySpacedData(i,o,{from:t,to:n,numberOfPoints:r});var u=(n-t)/(o.length-1);i=Array(o.length).fill(t);for(var p=0;p<o.length;p++)i[p]+=u*p;this.sd.spectra[s].data[0].x=i,this.sd.spectra[s].data[0].y=o,this.setFirstX(i[0]),this.setLastX(i[i.length-1]),this.sd.spectra[s].nbPoints=o.length}else{var c=this.getPointsInWindow(t,n,{outputX:!0});this.sd.spectra[s].data[0]=c,this.setFirstX(c.x[0]),this.setLastX(c.x[c.x.length-1]),this.sd.spectra[s].nbPoints=c.y.length}return this.setActiveElement(a),this}getPointsInWindow(e,t,i={}){if(!this.isDataClassXY())throw Error("getPointsInWindow can only apply on equidistant data");var n=i.outputX,r=this.unitsToArrayPoint(e),a=this.unitsToArrayPoint(t);if(r>a){var s=[a,r];r=s[0],a=s[1]}if(0<=r&&a<=this.getNbPoints()-2){var o=this.getSpectraDataY().slice(r,a+1);if(n!==void 0&&n){var l=this.getSpectraDataX().slice(r,a+1);o={x:l,y:o}}return o}throw Error("values outside this in range")}is2D(){return"undefined"!=typeof this.sd.twoD&&this.sd.twoD}setTotalIntegral(e){this.totalIntegralValue=e}get totalIntegral(){if(this.totalIntegralValue)return this.totalIntegralValue;if(this.molecule){if(this.getNucleus(0).indexOf("H"))return 1*this.mf.replace(/.*H([0-9]+).*/,"$1");if(this.getNucleus(0).indexOf("C"))return 1*this.mf.replace(/.*C([0-9]+).*/,"$1")}else return 100;return 1}setMolfile(e){this.molfile=e}setMF(e){this.mf=e}createPeaks(e={}){return this.peaks=j(this,e),this.peaks}getPeaks(e){var t;return t=this.peaks?this.peaks:j(this,e),t}toJcamp(e={}){var t=new Pe;return t.convert(this,Object.assign({},{yFactor:1,encode:"DIFDUP",type:"SIMPLE"},e))}}var Re=["s","d","t","q","quint","h","sept","o","n"],ze=1.5,Ne=1,Le={compilePattern:function(e){if(e.multiplicity="m",e.symRank=M(e,2.5,1),e.asymmetric=!0,0.95<=e.symRank&&32>e.peaksComp.length){e.asymmetric=!1;var t=1,r=[],a,i,s,n,o,l;for(s=0;9>s;s++){var d=B(e,s),p=!1;if(1===d.length&&0===s)p=!0;else if(1>=d.length)continue;var c=L(d);o=f(2,s);for(var m=null,h=1,g;!p&&null!==(m=N(c,o))&&400>h;){for(g=Array(m.length),t=1,a=0;a<m.length;a++)for(g[a]=Array(m[a]),i=0;i<m[a];i++)g[a][i]=t++;r=[],i=1,r.push(d[1].x-d[0].x),n=d[0].x,g[0].splice(0,1),g[1].splice(0,1),t=1;var y=2;for(l=f(2,s)-1;r.length<s&&y<l&&t<d.length;){for(h+=1,i++;t<d.length&&0===g[t].length;)t++;if(t<d.length){r.push(d[t].x-d[0].x),g[t].splice(0,1),y++;for(var b=2,u;b<=i;b++){for(u=0,a=0;a<b;a++)u+=r[a];for(a=1;a<g.length;a++)if(0.25>_(d[a].x-(n+u))){g[a].splice(0,1),y++;break}}}}var x=z(r);for(p=!0,a=0;a<x.length;a++)x[a].intensity!==m[a]&&(p=!1)}p&&O(e,r)}}for(a=0;a<e.peaksComp.length;a++)e.peaksComp[a].x/=e.observe}},Me={cdcl3:{tms:[{proton:"X",coupling:0,multiplicity:"",shift:0}],solvent_residual_peak:[{proton:"X",coupling:0,multiplicity:"ds",shift:7.26}],h2o:[{proton:"H2O",coupling:0,multiplicity:"bs",shift:1.56}],acetic_acid:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.1}],acetone:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.17}],acetonitrile:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.1}],benzene:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.36}],"tert-butyl_alcohol":[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.28}],"tert-butyl_methyl_ether":[{proton:"CCH3",coupling:0,multiplicity:"s",shift:1.19},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.22}],bhtb:[{proton:"ArH",coupling:0,multiplicity:"s",shift:6.98},{proton:"OHc",coupling:0,multiplicity:"s",shift:5.01},{proton:"ArCH3",coupling:0,multiplicity:"s",shift:2.27},{proton:"ArC(CH3)3",coupling:0,multiplicity:"s",shift:1.43}],chloroform:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.26}],cyclohexane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:1.43}],"1,2-dichloroethane":[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.73}],dichloromethane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:5.3}],diethyl_ether:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.21},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.48}],diglyme:[{proton:"CH2",coupling:0,multiplicity:"m",shift:3.65},{proton:"CH2",coupling:0,multiplicity:"m",shift:3.57},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.39}],"1,2-dimethoxyethane":[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.4},{proton:"CH2",coupling:0,multiplicity:"s",shift:3.55}],dimethylacetamide:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.09},{proton:"NCH3",coupling:0,multiplicity:"s",shift:3.02},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.94}],dimethylformamide:[{proton:"CH",coupling:0,multiplicity:"s",shift:8.02},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.96},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.88}],dimethyl_sulfoxide:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.62}],dioxane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.71}],ethanol:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.25},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.72},{proton:"OH",coupling:5,multiplicity:"s,t",shift:1.32}],ethyl_acetate:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.05},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:4.12},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.26}],ethyl_methyl_ketone:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.14},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:2.46},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.06}],ethylene_glycol:[{proton:"CH",coupling:0,multiplicity:"s",shift:3.76}],"grease^f":[{proton:"CH3",coupling:0,multiplicity:"m",shift:0.86},{proton:"CH2",coupling:0,multiplicity:"br_s",shift:1.26}],"n-hexane":[{proton:"CH3",coupling:0,multiplicity:"t",shift:0.88},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.26}],hmpag:[{proton:"CH3",coupling:9.5,multiplicity:"d",shift:2.65}],methanol:[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.49},{proton:"OH",coupling:0,multiplicity:"s",shift:1.09}],nitromethane:[{proton:"CH3",coupling:0,multiplicity:"s",shift:4.33}],"n-pentane":[{proton:"CH3",coupling:7,multiplicity:"t",shift:7},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.27}],"2-propanol":[{proton:"CH3",coupling:6,multiplicity:"d",shift:1.22},{proton:"CH",coupling:6,multiplicity:"sep",shift:4.04}],pyridine:[{proton:"CH(2)",coupling:0,multiplicity:"m",shift:8.62},{proton:"CH(3)",coupling:0,multiplicity:"m",shift:7.29},{proton:"CH(4)",coupling:0,multiplicity:"m",shift:7.68}],silicone_greasei:[{proton:"CH3",coupling:0,multiplicity:"s",shift:0.07}],tetrahydrofuran:[{proton:"CH2",coupling:0,multiplicity:"m",shift:1.85},{proton:"CH2O",coupling:0,multiplicity:"m",shift:3.76}],toluene:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.36},{proton:"CH(o/p)",coupling:0,multiplicity:"m",shift:7.17},{proton:"CH(m)",coupling:0,multiplicity:"m",shift:7.25}],triethylamine:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.03},{proton:"CH2",coupling:7,multiplicity:"q",shift:2.53}]},"(cd3)2co":{tms:[{proton:"X",coupling:0,multiplicity:"",shift:0}],solvent_residual_peak:[{proton:"X",coupling:0,multiplicity:"",shift:2.05}],h2o:[{proton:"H2O",coupling:0,multiplicity:"s",shift:2.84}],acetic_acid:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.96}],acetone:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.09}],acetonitrile:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.05}],benzene:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.36}],"tert-butyl_alcohol":[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.18}],"tert-butyl_methyl_ether":[{proton:"CCH3",coupling:0,multiplicity:"s",shift:1.13},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.13}],bhtb:[{proton:"ArH",coupling:0,multiplicity:"s",shift:6.96},{proton:"ArCH3",coupling:0,multiplicity:"s",shift:2.22},{proton:"ArC(CH3)3",coupling:0,multiplicity:"s",shift:1.41}],chloroform:[{proton:"CH",coupling:0,multiplicity:"s",shift:8.02}],cyclohexane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:1.43}],"1,2-dichloroethane":[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.87}],dichloromethane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:5.63}],diethyl_ether:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.11},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.41}],diglyme:[{proton:"CH2",coupling:0,multiplicity:"m",shift:3.56},{proton:"CH2",coupling:0,multiplicity:"m",shift:3.47},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.28}],"1,2-dimethoxyethane":[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.28},{proton:"CH2",coupling:0,multiplicity:"s",shift:3.46}],dimethylacetamide:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.97},{proton:"NCH3",coupling:0,multiplicity:"s",shift:3},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.83}],dimethylformamide:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.96},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.94},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.78}],dimethyl_sulfoxide:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.52}],dioxane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.59}],ethanol:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.12},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.57},{proton:"OH",coupling:5,multiplicity:"s,t",shift:3.39}],ethyl_acetate:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.97},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:4.05},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.2}],ethyl_methyl_ketone:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.07},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:2.45},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:0.96}],ethylene_glycol:[{proton:"CH",coupling:0,multiplicity:"s",shift:3.28}],"grease^f":[{proton:"CH3",coupling:0,multiplicity:"m",shift:0.87},{proton:"CH2",coupling:0,multiplicity:"br_s",shift:1.29}],"n-hexane":[{proton:"CH3",coupling:0,multiplicity:"t",shift:0.88},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.28}],hmpag:[{proton:"CH3",coupling:9.5,multiplicity:"d",shift:2.59}],methanol:[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.31},{proton:"OH",coupling:0,multiplicity:"s",shift:3.12}],nitromethane:[{proton:"CH3",coupling:0,multiplicity:"s",shift:4.43}],"n-pentane":[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.88},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.27}],"2-propanol":[{proton:"CH3",coupling:6,multiplicity:"d",shift:1.1},{proton:"CH",coupling:6,multiplicity:"sep",shift:3.9}],pyridine:[{proton:"CH(2)",coupling:0,multiplicity:"m",shift:8.58},{proton:"CH(3)",coupling:0,multiplicity:"m",shift:7.35},{proton:"CH(4)",coupling:0,multiplicity:"m",shift:7.76}],silicone_greasei:[{proton:"CH3",coupling:0,multiplicity:"s",shift:0.13}],tetrahydrofuran:[{proton:"CH2",coupling:0,multiplicity:"m",shift:1.79},{proton:"CH2O",coupling:0,multiplicity:"m",shift:3.63}],toluene:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.32},{proton:"CH(o/p)",coupling:0,multiplicity:"m",shift:7.5},{proton:"CH(m)",coupling:0,multiplicity:"m",shift:7.5}],triethylamine:[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.96},{proton:"CH2",coupling:7,multiplicity:"q",shift:2.45}]},dmso:{tms:[{proton:"X",coupling:0,multiplicity:"",shift:0}],solvent_residual_peak:[{proton:"X",coupling:0,multiplicity:"quint",shift:2.5}],h2o:[{proton:"H2O",coupling:0,multiplicity:"s",shift:3.33}],acetic_acid:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.91}],acetone:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.09}],acetonitrile:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.07}],benzene:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.37}],"tert-butyl_alcohol":[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.11},{proton:"OHc",coupling:0,multiplicity:"s",shift:4.19}],"tert-butyl_methyl_ether":[{proton:"CCH3",coupling:0,multiplicity:"s",shift:1.11},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.08}],bhtb:[{proton:"ArH",coupling:0,multiplicity:"s",shift:6.87},{proton:"OHc",coupling:0,multiplicity:"s",shift:6.65},{proton:"ArCH3",coupling:0,multiplicity:"s",shift:2.18},{proton:"ArC(CH3)3",coupling:0,multiplicity:"s",shift:1.36}],chloroform:[{proton:"CH",coupling:0,multiplicity:"s",shift:8.32}],cyclohexane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:1.4}],"1,2-dichloroethane":[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.9}],dichloromethane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:5.76}],diethyl_ether:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.09},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.38}],diglyme:[{proton:"CH2",coupling:0,multiplicity:"m",shift:3.51},{proton:"CH2",coupling:0,multiplicity:"m",shift:3.38},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.24}],"1,2-dimethoxyethane":[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.24},{proton:"CH2",coupling:0,multiplicity:"s",shift:3.43}],dimethylacetamide:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.96},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.94},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.78}],dimethylformamide:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.95},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.89},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.73}],dimethyl_sulfoxide:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.54}],dioxane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.57}],ethanol:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.06},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.44},{proton:"OH",coupling:5,multiplicity:"s,t",shift:4.63}],ethyl_acetate:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.99},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:4.03},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.17}],ethyl_methyl_ketone:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.07},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:2.43},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:0.91}],ethylene_glycol:[{proton:"CH",coupling:0,multiplicity:"s",shift:3.34}],"grease^f":[],"n-hexane":[{proton:"CH3",coupling:0,multiplicity:"t",shift:0.86},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.25}],hmpag:[{proton:"CH3",coupling:9.5,multiplicity:"d",shift:2.53}],methanol:[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.16},{proton:"OH",coupling:0,multiplicity:"s",shift:4.01}],nitromethane:[{proton:"CH3",coupling:0,multiplicity:"s",shift:4.42}],"n-pentane":[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.88},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.27}],"2-propanol":[{proton:"CH3",coupling:6,multiplicity:"d",shift:1.04},{proton:"CH",coupling:6,multiplicity:"sep",shift:3.78}],pyridine:[{proton:"CH(2)",coupling:0,multiplicity:"m",shift:8.58},{proton:"CH(3)",coupling:0,multiplicity:"m",shift:7.39},{proton:"CH(4)",coupling:0,multiplicity:"m",shift:7.79}],silicone_greasei:[],tetrahydrofuran:[{proton:"CH2",coupling:0,multiplicity:"m",shift:1.76},{proton:"CH2O",coupling:0,multiplicity:"m",shift:3.6}],toluene:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.3},{proton:"CH(o/p)",coupling:0,multiplicity:"m",shift:7.18},{proton:"CH(m)",coupling:0,multiplicity:"m",shift:7.25}],triethylamine:[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.93},{proton:"CH2",coupling:7,multiplicity:"q",shift:2.43}]},c6d6:{tms:[{proton:"X",coupling:0,multiplicity:"",shift:0}],solvent_residual_peak:[{proton:"X",coupling:0,multiplicity:"",shift:7.16}],h2o:[{proton:"H2O",coupling:0,multiplicity:"s",shift:0.4}],acetic_acid:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.55}],acetone:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.55}],acetonitrile:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.55}],benzene:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.15}],"tert-butyl_alcohol":[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.05},{proton:"OHc",coupling:0,multiplicity:"s",shift:1.55}],"tert-butyl_methyl_ether":[{proton:"CCH3",coupling:0,multiplicity:"s",shift:1.07},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.04}],bhtb:[{proton:"ArH",coupling:0,multiplicity:"s",shift:7.05},{proton:"OHc",coupling:0,multiplicity:"s",shift:4.79},{proton:"ArCH3",coupling:0,multiplicity:"s",shift:2.24},{proton:"ArC(CH3)3",coupling:0,multiplicity:"s",shift:1.38}],chloroform:[{proton:"CH",coupling:0,multiplicity:"s",shift:6.15}],cyclohexane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:1.4}],"1,2-dichloroethane":[{proton:"CH2",coupling:0,multiplicity:"s",shift:2.9}],dichloromethane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:4.27}],diethyl_ether:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.11},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.26}],diglyme:[{proton:"CH2",coupling:0,multiplicity:"m",shift:3.46},{proton:"CH2",coupling:0,multiplicity:"m",shift:3.34},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.11}],"1,2-dimethoxyethane":[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.12},{proton:"CH2",coupling:0,multiplicity:"s",shift:3.33}],dimethylacetamide:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.6},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.57},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.05}],dimethylformamide:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.63},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.36},{proton:"CH3",coupling:0,multiplicity:"s",shift:1.86}],dimethyl_sulfoxide:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.68}],dioxane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.35}],ethanol:[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.96},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.34}],ethyl_acetate:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.65},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:3.89},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:0.92}],ethyl_methyl_ketone:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.58},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:1.81},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:0.85}],ethylene_glycol:[{proton:"CH",coupling:0,multiplicity:"s",shift:3.41}],"grease^f":[{proton:"CH3",coupling:0,multiplicity:"m",shift:0.92},{proton:"CH2",coupling:0,multiplicity:"br_s",shift:1.36}],"n-hexane":[{proton:"CH3",coupling:0,multiplicity:"t",shift:0.89},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.24}],hmpag:[{proton:"CH3",coupling:9.5,multiplicity:"d",shift:2.4}],methanol:[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.07}],nitromethane:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.94}],"n-pentane":[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.86},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.23}],"2-propanol":[{proton:"CH3",coupling:6,multiplicity:"d",shift:0.95},{proton:"CH",coupling:6,multiplicity:"sep",shift:3.67}],pyridine:[{proton:"CH(2)",coupling:0,multiplicity:"m",shift:8.53},{proton:"CH(3)",coupling:0,multiplicity:"m",shift:6.66},{proton:"CH(4)",coupling:0,multiplicity:"m",shift:6.98}],silicone_greasei:[{proton:"CH3",coupling:0,multiplicity:"s",shift:0.29}],tetrahydrofuran:[{proton:"CH2",coupling:0,multiplicity:"m",shift:1.4},{proton:"CH2O",coupling:0,multiplicity:"m",shift:3.57}],toluene:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.11},{proton:"CH(o/p)",coupling:0,multiplicity:"m",shift:7.02},{proton:"CH(m)",coupling:0,multiplicity:"m",shift:7.13}],triethylamine:[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.96},{proton:"CH2",coupling:7,multiplicity:"q",shift:2.4}]},cd3cn:{tms:[{proton:"X",coupling:0,multiplicity:"",shift:0}],solvent_residual_peak:[{proton:"X",coupling:0,multiplicity:"",shift:1.94}],h2o:[{proton:"H2O",coupling:0,multiplicity:"s",shift:2.13}],acetic_acid:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.96}],acetone:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.08}],acetonitrile:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.96}],benzene:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.37}],"tert-butyl_alcohol":[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.16},{proton:"OHc",coupling:0,multiplicity:"s",shift:2.18}],"tert-butyl_methyl_ether":[{proton:"CCH3",coupling:0,multiplicity:"s",shift:1.14},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.13}],bhtb:[{proton:"ArH",coupling:0,multiplicity:"s",shift:6.97},{proton:"OHc",coupling:0,multiplicity:"s",shift:5.2},{proton:"ArCH3",coupling:0,multiplicity:"s",shift:2.22},{proton:"ArC(CH3)3",coupling:0,multiplicity:"s",shift:1.39}],chloroform:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.58}],cyclohexane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:1.44}],"1,2-dichloroethane":[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.81}],dichloromethane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:5.44}],diethyl_ether:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.12},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.42}],diglyme:[{proton:"CH2",coupling:0,multiplicity:"m",shift:3.53},{proton:"CH2",coupling:0,multiplicity:"m",shift:3.45},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.29}],"1,2-dimethoxyethane":[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.28},{proton:"CH2",coupling:0,multiplicity:"s",shift:3.45}],dimethylacetamide:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.97},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.96},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.83}],dimethylformamide:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.92},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.89},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.77}],dimethyl_sulfoxide:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.5}],dioxane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.6}],ethanol:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.12},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.54},{proton:"OH",coupling:5,multiplicity:"s,t",shift:2.47}],ethyl_acetate:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:1.97},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:4.06},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.2}],ethyl_methyl_ketone:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.06},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:2.43},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:0.96}],ethylene_glycol:[{proton:"CH",coupling:0,multiplicity:"s",shift:3.51}],"grease^f":[{proton:"CH3",coupling:0,multiplicity:"m",shift:0.86},{proton:"CH2",coupling:0,multiplicity:"br_s",shift:1.27}],"n-hexane":[{proton:"CH3",coupling:0,multiplicity:"t",shift:0.89},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.28}],hmpag:[{proton:"CH3",coupling:9.5,multiplicity:"d",shift:2.57}],methanol:[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.28},{proton:"OH",coupling:0,multiplicity:"s",shift:2.16}],nitromethane:[{proton:"CH3",coupling:0,multiplicity:"s",shift:4.31}],"n-pentane":[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.87},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.29}],"2-propanol":[{proton:"CH3",coupling:6,multiplicity:"d",shift:1.09},{proton:"CH",coupling:6,multiplicity:"sep",shift:3.87}],pyridine:[{proton:"CH(2)",coupling:0,multiplicity:"m",shift:8.57},{proton:"CH(3)",coupling:0,multiplicity:"m",shift:7.33},{proton:"CH(4)",coupling:0,multiplicity:"m",shift:7.73}],silicone_greasei:[{proton:"CH3",coupling:0,multiplicity:"s",shift:0.08}],tetrahydrofuran:[{proton:"CH2",coupling:0,multiplicity:"m",shift:1.8},{proton:"CH2O",coupling:0,multiplicity:"m",shift:3.64}],toluene:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.33},{proton:"CH(o/p)",coupling:0,multiplicity:"m",shift:7.2},{proton:"CH(m)",coupling:0,multiplicity:"m",shift:7.2}],triethylamine:[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.96},{proton:"CH2",coupling:7,multiplicity:"q",shift:2.45}]},cd3od:{tms:[{proton:"X",coupling:0,multiplicity:"",shift:0}],solvent_residual_peak:[{proton:"X",coupling:0,multiplicity:"",shift:3.31}],h2o:[{proton:"H2O",coupling:0,multiplicity:"s",shift:4.87}],acetic_acid:[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.99}],acetone:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.15}],acetonitrile:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.03}],benzene:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.33}],"tert-butyl_alcohol":[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.4}],"tert-butyl_methyl_ether":[{proton:"CCH3",coupling:0,multiplicity:"s",shift:1.15},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.2}],bhtb:[{proton:"ArH",coupling:0,multiplicity:"s",shift:6.92},{proton:"ArCH3",coupling:0,multiplicity:"s",shift:2.21},{proton:"ArC(CH3)3",coupling:0,multiplicity:"s",shift:1.4}],chloroform:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.9}],cyclohexane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:1.45}],"1,2-dichloroethane":[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.78}],dichloromethane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:5.49}],diethyl_ether:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.18},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.49}],diglyme:[{proton:"CH2",coupling:0,multiplicity:"m",shift:3.61},{proton:"CH2",coupling:0,multiplicity:"m",shift:3.58},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.35}],"1,2-dimethoxyethane":[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.35},{proton:"CH2",coupling:0,multiplicity:"s",shift:3.52}],dimethylacetamide:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.07},{proton:"NCH3",coupling:0,multiplicity:"s",shift:3.31},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.92}],dimethylformamide:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.97},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.99},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.86}],dimethyl_sulfoxide:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.65}],dioxane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.66}],ethanol:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.19},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.6}],ethyl_acetate:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.01},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:4.09},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.24}],ethyl_methyl_ketone:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.12},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:2.5},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.01}],ethylene_glycol:[{proton:"CH",coupling:0,multiplicity:"s",shift:3.59}],"grease^f":[{proton:"CH3",coupling:0,multiplicity:"m",shift:0.88},{proton:"CH2",coupling:0,multiplicity:"br_s",shift:1.29}],"n-hexane":[{proton:"CH3",coupling:0,multiplicity:"t",shift:0.9},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.29}],hmpag:[{proton:"CH3",coupling:9.5,multiplicity:"d",shift:2.64}],methanol:[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.34}],nitromethane:[{proton:"CH3",coupling:0,multiplicity:"s",shift:4.34}],"n-pentane":[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.89},{proton:"CH2",coupling:0,multiplicity:"m",shift:1.29}],"2-propanol":[{proton:"CH3",coupling:6,multiplicity:"d",shift:1.5},{proton:"CH",coupling:6,multiplicity:"sep",shift:3.92}],pyridine:[{proton:"CH(2)",coupling:0,multiplicity:"m",shift:8.53},{proton:"CH(3)",coupling:0,multiplicity:"m",shift:7.44},{proton:"CH(4)",coupling:0,multiplicity:"m",shift:7.85}],silicone_greasei:[{proton:"CH3",coupling:0,multiplicity:"s",shift:0.1}],tetrahydrofuran:[{proton:"CH2",coupling:0,multiplicity:"m",shift:1.87},{proton:"CH2O",coupling:0,multiplicity:"m",shift:3.71}],toluene:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.32},{proton:"CH(o/p)",coupling:0,multiplicity:"m",shift:7.16},{proton:"CH(m)",coupling:0,multiplicity:"m",shift:7.16}],triethylamine:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.05},{proton:"CH2",coupling:7,multiplicity:"q",shift:2.58}]},d2o:{tms:[{proton:"X",coupling:0,multiplicity:"",shift:0}],solvent_residual_peak:[{proton:"X",coupling:0,multiplicity:"",shift:4.79}],h2o:[],acetic_acid:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.08}],acetone:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.22}],acetonitrile:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.06}],benzene:[],"tert-butyl_alcohol":[{proton:"CH3",coupling:0,multiplicity:"s",shift:1.24}],"tert-butyl_methyl_ether":[{proton:"CCH3",coupling:0,multiplicity:"s",shift:1.21},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.22}],bhtb:[],chloroform:[],cyclohexane:[],"1,2-dichloroethane":[],dichloromethane:[],diethyl_ether:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.17},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.56}],diglyme:[{proton:"CH2",coupling:0,multiplicity:"m",shift:3.67},{proton:"CH2",coupling:0,multiplicity:"m",shift:3.61},{proton:"OCH3",coupling:0,multiplicity:"s",shift:3.37}],"1,2-dimethoxyethane":[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.37},{proton:"CH2",coupling:0,multiplicity:"s",shift:3.6}],dimethylacetamide:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.08},{proton:"NCH3",coupling:0,multiplicity:"s",shift:3.06},{proton:"NCH3",coupling:0,multiplicity:"s",shift:2.9}],dimethylformamide:[{proton:"CH",coupling:0,multiplicity:"s",shift:7.92},{proton:"CH3",coupling:0,multiplicity:"s",shift:3.01},{proton:"CH3",coupling:0,multiplicity:"s",shift:2.85}],dimethyl_sulfoxide:[{proton:"CH3",coupling:0,multiplicity:"s",shift:2.71}],dioxane:[{proton:"CH2",coupling:0,multiplicity:"s",shift:3.75}],ethanol:[{proton:"CH3",coupling:7,multiplicity:"t",shift:1.17},{proton:"CH2",coupling:7,multiplicity:"q",shift:3.65}],ethyl_acetate:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.07},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:4.14},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.24}],ethyl_methyl_ketone:[{proton:"CH3CO",coupling:0,multiplicity:"s",shift:2.19},{proton:"CH2CH3",coupling:7,multiplicity:"q",shift:3.18},{proton:"CH2CH3",coupling:7,multiplicity:"t",shift:1.26}],ethylene_glycol:[{proton:"CH",coupling:0,multiplicity:"s",shift:3.65}],"grease^f":[],"n-hexane":[],hmpag:[{proton:"CH3",coupling:9.5,multiplicity:"d",shift:2.61}],methanol:[{proton:"CH3",coupling:0,multiplicity:"s",shift:3.34}],nitromethane:[{proton:"CH3",coupling:0,multiplicity:"s",shift:4.4}],"n-pentane":[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.9}],"2-propanol":[{proton:"CH3",coupling:6,multiplicity:"d",shift:1.17},{proton:"CH",coupling:6,multiplicity:"sep",shift:4.02}],pyridine:[{proton:"CH(2)",coupling:0,multiplicity:"m",shift:8.52},{proton:"CH(3)",coupling:0,multiplicity:"m",shift:7.45},{proton:"CH(4)",coupling:0,multiplicity:"m",shift:7.87}],silicone_greasei:[],tetrahydrofuran:[{proton:"CH2",coupling:0,multiplicity:"m",shift:1.88},{proton:"CH2O",coupling:0,multiplicity:"m",shift:3.74}],toluene:[],triethylamine:[{proton:"CH3",coupling:7,multiplicity:"t",shift:0.99},{proton:"CH2",coupling:7,multiplicity:"q",shift:2.57}]}},Xe=["solvent_residual_peak","H2O","TMS"],Ue={nH:100,clean:0.5,thresholdFactor:1,compile:!0,integralType:"sum",optimize:!0,frequencyCluster:16,keepPeaks:!1};class Be extends Oe{static fromSignals(e,t={}){t=Object.assign({},{nbPoints:16384,maxClusterSize:8,output:"xy"},t);var i=he.SpinSystem.fromPrediction(e);i.ensureClusterSize(t);var n=he.simulate1D(i,t);return Be.fromXY(n.x,n.y,t)}static fromXY(e,t,i){i=Object.assign({},i,{xUnit:"PPM",yUnit:"Intensity",dataType:"NMR SPECTRUM"});var n=Oe.fromXY(e,t,i),r=n.sd.spectra[0];return r.observeFrequency=i.frequency||400,n.putParam("observefrequency",r.observeFrequency),n.putParam(".SOLVENTNAME",i.solvent||"none"),n.putParam("$SW_h",_(r.lastX-r.firstX)*r.observeFrequency),n.putParam("$SW",_(r.lastX-r.firstX)),n.putParam("$TD",r.nbPoints),n.sd.xType=i.nucleus||"1H",new Be(n.sd)}static fromBruker(e,t){t=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},t);var i=null;return i=Array.isArray(e)?me.converFolder(e,t):me.convertZip(e,t),i?i.map(function(e){return new Be(e)}):null}getMagnitude(){return new Be(F(this))}getNucleus(e){return e&&0!==e&&1!==e?"":this.sd.xType}getSolventName(){return(this.sd.info[".SOLVENTNAME"]||this.sd.info.$SOLVENT||"").replace("<","").replace(">","")}observeFrequencyX(){return this.sd.spectra[0].observeFrequency}getNMRPeakThreshold(e){return"1H"===e?3:"13C"===e?5:1}fourierTransform(){return E(this)}postFourierTransform(e){return T(0,e)}zeroFilling(e){return A(this,e)}brukerFilter(){return H(this,{brukerFilter:!0})}digitalFilter(e){return H(this,e)}echoAntiechoFilter(){return this}SNVFilter(){return this}powerFilter(e){var t=this.getMinY();return 1>e&&0>t&&this.YShift(-1*t),this}phaseCorrection(e,t){return T(this,e,t)}getRanges(e={}){if(this.ranges)return this.ranges;var t=this.getPeaks(e),i=Z(this,t,e);return i}createRanges(e){return this.ranges=null,this.peaks=null,this.ranges=this.getRanges(e),this.ranges}getResidual(e){return this.getImpurity(e,"solvent_residual_peak")}getImpurities(e){return this.getImpurity(e)}getImpurity(e,t=null){e=e.toLowerCase(),"(cd3)2so"===e&&(e="dmso");var i=Me[e];return t&&(i=i[t.toLocaleLowerCase()]),i}fillImpurity(e,t={}){var i=t.impurity,n=i===void 0?null:i,r=t.value,a=r===void 0?0:r,s=t.error,o=s===void 0?0.025:s,l=this.getImpurities(e,n);if(!l)throw Error("The solvent does not mach with a impurities into the list");var d=this.getPeaks(t);d.forEach((e)=>{for(var t in l)for(var i of t)if(e.width+o>_(i.shift-e.x)){var n=e.x+e.width,r=e.x-e.width;this.fill(n,r,a)}})}}var Ye=0.05,qe=0.05,We={clean:function(e,t){var n=Number.NEGATIVE_INFINITY,r=void 0;for(r=e.length-1;0<=r;r--)_(e[r].z)>n&&(n=_(e[r].z));for(n*=t,r=e.length-1;0<=r;r--)_(e[r].z)<n&&e.splice(r,1);return e},enhanceSymmetry:function(e){var t=ee(e),n=e,r=void 0,i=void 0,a=void 0,s=void 0;for(r=n.length-1;0<=r;r--)s=n[r],1<s.peaks.length&&t[r][1]++,1===t[r][0]&&(a=Q(n,t,s,-1,!0),0<=a&&(t[r][1]+=2,t[a][1]+=2));for(r=n.length-1;0<=r;r--)s=n[r],0===t[r][0]&&(i=K(n,t,s,!0),t[r][1]+=i);var o=0;for(r=n.length-1;0<=r;r--)0!==t[r][0]&&2<t[r][1]&&(o++,o+=J(n,t,n[r],t[r])),2<=t[r][1]&&0===t[r][0]&&o++;var l=Array(o);for(o--,r=n.length-1;0<=r;r--)(0!==t[r][0]&&2<t[r][1]||0===t[r][0]&&1<t[r][1])&&(l[o--]=n[r]);return l},alignDimensions:function(e,t){for(var n=0,i;n<t.length;n++)i=t[n],i&&ie(e,i)}},Ve=[[0,0,1,2,2,2,1,0,0],[0,1,4,7,7,7,4,1,0],[1,4,5,3,0,3,5,4,1],[2,7,3,-12,-23,-12,3,7,2],[2,7,0,-23,-40,-23,0,7,2],[2,7,3,-12,-23,-12,3,7,2],[1,4,5,3,0,3,5,4,1],[0,1,3,7,7,7,3,1,0],[0,0,1,2,2,2,1,0,0]];class Ze extends Oe{static fromPrediction(e,t){var i=he.simulate2D(e,t),n=Ze.fromMatrix(i,t),r=n.toJcamp({type:"NTUPLES"});return Ze.fromJcamp(r)}static fromBruker(e,t){t=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},t);var i=null;return i=Array.isArray(e)?me.converFolder(e,t):me.convertZip(e,t),i?i.map(function(e){return new Ze(e)}):null}static fromMatrix(e,t){var n={profiling:[],logs:[]},r=[],a=e[0].length;n.spectra=r,n.info={};var s=t.firstY||0,o=t.lastY||e.length-1,l=(o-s)/(e.length-1),d=t.firstX||0,u=t.lastX||a-1,p=t.x;if(!p){p=Array(a);for(var c=0;c<a;c++)p[c]=d+(o-s)/(a-1)*c}var i=t.frequencyX||400,m=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;return e.forEach((e,o)=>{var c={};c.isXYdata=!0,c.nbPoints=a,c.firstX=d,c.firstY=e[0],c.lastX=u,c.lastY=e[c.nbPoints-1],c.xFactor=1,c.yFactor=1,c.deltaX=(c.lastX-c.firstX)/(c.nbPoints-1),c.title=t.title||"spectra-data from matrix",c.dataType=t.dataType||"nD NMR SPECTRUM",c.observeFrequency=i,c.data=[{x:p,y:e}],c.page=s+o*l,n.xType=t.xType||t.nucleusX||"1H",r.push(c),m=w(m,oe(e)),h=C(h,le(e))}),n.ntuples=[{units:t.xUnit||"PPM"},{units:t.yUnit||"PPM"},{units:t.zUnit||"Intensity"}],n.info["2D_Y_FREQUENCY"]=t.frequencyY||400,n.info["2D_X_FREQUENCY"]=t.frequencyX||400,n.info.observefrequency=n.info["2D_X_FREQUENCY"],n.info.$BF1=n.info.observefrequency,n.info[".SOLVENTNAME"]=t.solvent||"none",n.info.$SW_h=_(u-d)*i,n.info.$SW=_(u-d),n.info.$TD=a,n.info.firstY=s,n.info.lastY=o,n.minMax={minY:s,maxY:o,minX:d,maxX:u,minZ:m,maxZ:h},n.yType=t.yType||t.nucleusY||"1H",n.twoD=!0,new Ze(n)}isHomoNuclear(){return this.sd.xType===this.sd.yType}observeFrequencyX(){return this.sd.spectra[0].observeFrequency}observeFrequencyY(){return this.sd.indirectFrequency}getSolventName(){return(this.sd.info[".SOLVENTNAME"]||this.sd.info.$SOLVENT).replace("<","").replace(">","")}getXUnits(){return this.sd.ntuples[1].units}getYUnits(){return this.sd.ntuples[0].units}getZUnits(){return this.sd.ntuples[2].units}getLastY(){return this.sd.minMax.maxY}getFirstY(){return this.sd.minMax.minY}getDeltaY(){return(this.getLastY()-this.getFirstY())/(this.getNbSubSpectra()-1)}getMinZ(){return this.sd.minMax.minZ}getMaxZ(){return this.sd.minMax.maxZ}getZones(e){e=e||{},e.thresholdFactor||(e.thresholdFactor=1);var n=t(255*Math.random());e.idPrefix&&(n=e.idPrefix);for(var r=ne(this,e.thresholdFactor),a=0;a<r.length;a++)r[a]._highlight=[`${n}_${a}`],r[a].signalID=`${n}_${a}`;if(e.references&&We.alignDimensions(r,e.references),"new"===e.format){for(var i=Array(r.length),s=r.length-1,o;0<=s;s--)o=r[s],i[s]={fromTo:o.fromTo,integral:o.intensity||1,remark:"",signal:[{peak:o.peaks,delta:[o.shiftX,o.shiftY]}],_highlight:o._highlight,signalID:o.signalID};r=i}return this.zones=r,this.zones}getNMRPeakThreshold(e){return"1H"===e?3:"13C"===e?5:1}getNucleus(e){return 1===e?this.sd.xType:2===e?this.sd.yType:this.sd.xType}zeroFilling(e){return A(this,e)}brukerFilter(){return H(this,{brukerFilter:!0})}digitalFilter(e){return H(this,e)}fourierTransform(){return E(this)}postFourierTransform(e){return T(0,e)}}Object.defineProperty(a,"Ranges",{enumerable:!0,get:function(){return ye.Ranges}}),Object.defineProperty(a,"getACS",{enumerable:!0,get:function(){return ye.getACS}}),a.NMR=Be,a.NMR2D=Ze,a.SD=Oe},{brukerconverter:6,jcampconverter:24,"lodash.round":61,"ml-array-max":63,"ml-array-median":64,"ml-array-min":65,"ml-array-rescale":66,"ml-array-utils":69,"ml-fft":79,"ml-gsd":81,"ml-matrix-peaks-finder":97,"ml-simple-clustering":124,"nmr-simulation":149,"spectra-data-ranges":189}],193:[function(e,t,i){"use strict";function n(e,t=0.05){var n=e.j,a="";if(n&&0<n.length){var s=n[0].assignment?n[0].assignment.length:0;n.sort(function(e,t){return t.coupling-e.coupling});for(var o=0;o<n.length-1;o++)_(n[o].coupling-n[o+1].coupling)<t?s+=n[o+1].assignment?n[o+1].assignment.length:1:(a+=r[s],s=n[o+1].assignment?n[o+1].assignment.length:1);a+=r[s]}else a=e.delta?"s":"m";return a}Object.defineProperty(i,"__esModule",{value:!0}),i.nmrJ=function(e,t={}){var n="";t=Object.assign({},{separator:", ",nbDecimal:2},t);var r,a;for(a=0;a<e.length;a++)r=e[a],11<r.length&&(r+=t.separator),n+=`${r.multiplicity} ${r.coupling.toFixed(t.nbDecimal)}`;return n},i.joinCoupling=function(e,t=0.05){var n=e.j;if(n&&0<n.length){var a=n[0].assignment?n[0].assignment.length:1,s="",o=[],l=[],d=[];n.sort(function(e,t){return t.coupling-e.coupling}),n[0].diaID&&(l=[n[0].diaID]),n[0].assignment&&(d=n[0].assignment);for(var u=0;u<n.length-1;u++)if(_(n[u].coupling-n[u+1].coupling)<t)a+=n[u+1].assignment?n[u+1].assignment.length:1,l.push(n[u].diaID),d=d.concat(n[u+1].assignment);else{var i={coupling:_(n[u].coupling),multiplicity:r[a]};0<l.length&&(i.diaID=l),0<d.length&&(i.assignment=d),o.push(i),n[0].diaID&&(l=[n[u].diaID]),n[0].assignment&&(d=n[u].assignment),s+=r[a],a=n[u+1].assignment?n[u+1].assignment.length:1}var p={coupling:_(n[u].coupling),multiplicity:r[a]};0<l.length&&(p.diaID=l),0<d.length&&(p.assignment=d),o.push(p),s+=r[a],e.j=o}else s=e.delta?"s":"m";return s},i.group=function(e,t={}){var a,i;for(a=0;a<e.length;a++){var s=e[a].j;if(s&&0<s.length)for(i=s.length-2;0<=i;i--)for(var o=s.length-1;o>i;o--)s[i].diaID===s[o].diaID&&s[i].coupling===s[o].coupling&&s[i].distance===s[o].distance&&(s[i].assignment=s[i].assignment.concat(s[o].assignment),s.splice(o,1))}for(e.sort((e,t)=>{return e.diaIDs[0]<t.diaIDs[0]?-1:e.diaIDs[0]>t.diaIDs[0]?1:0}),a=e.length-2;0<=a;a--)e[a].diaIDs[0]===e[a+1].diaIDs[0]&&(e[a].nbAtoms+=e[a+1].nbAtoms,e[a].atomIDs=e[a].atomIDs.concat(e[a+1].atomIDs),e.splice(a+1,1));for(a=0;a<e.length;a++){if(s=e[a].j,s)for(i=0;i<s.length;i++)s[i].multiplicity=r[s[i].assignment.length];e[a].multiplicity=n(e[a],t.tolerance)}return e},i.compilePattern=n;var r=["s","d","t","q","quint","h","sept","o","n"]},{}],194:[function(e,t){"use strict";function i(){n.call(this)}t.exports=i;var n=e("events").EventEmitter,r=e("inherits");r(i,n),i.Readable=e("readable-stream/readable.js"),i.Writable=e("readable-stream/writable.js"),i.Duplex=e("readable-stream/duplex.js"),i.Transform=e("readable-stream/transform.js"),i.PassThrough=e("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(e,t){function i(t){e.writable&&!1===e.write(t)&&d.pause&&d.pause()}function r(){d.readable&&d.resume&&d.resume()}function a(){u||(u=!0,e.end())}function s(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function o(e){if(l(),0===n.listenerCount(this,"error"))throw e}function l(){d.removeListener("data",i),e.removeListener("drain",r),d.removeListener("end",a),d.removeListener("close",s),d.removeListener("error",o),e.removeListener("error",o),d.removeListener("end",l),d.removeListener("close",l),e.removeListener("close",l)}var d=this;d.on("data",i),e.on("drain",r),e._isStdio||t&&!1===t.end||(d.on("end",a),d.on("close",s));var u=!1;return d.on("error",o),e.on("error",o),d.on("end",l),d.on("close",l),e.on("close",l),e.emit("pipe",d),e}},{events:9,inherits:19,"readable-stream/duplex.js":173,"readable-stream/passthrough.js":182,"readable-stream/readable.js":183,"readable-stream/transform.js":184,"readable-stream/writable.js":185}],195:[function(e,t,i){"use strict";function n(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0;}}function r(e){var t=n(e);if("string"!=typeof t&&(f.isEncoding===y||!y(e)))throw new Error("Unknown encoding: "+e);return t||e}function a(e){this.encoding=r(e);var t;switch(this.encoding){case"utf16le":this.text=u,this.end=p,t=4;break;case"utf8":this.fillLast=d,t=4;break;case"base64":this.text=c,this.end=m,t=3;break;default:return this.write=h,void(this.end=g);}this.lastNeed=0,this.lastTotal=0,this.lastChar=f.allocUnsafe(t)}function s(e){if(127>=e)return 0;return 6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function o(e,t,n){var i=t.length-1;if(i<n)return 0;var r=s(t[i]);return 0<=r?(0<r&&(e.lastNeed=r-1),r):--i<n||-2===r?0:(r=s(t[i]),0<=r)?(0<r&&(e.lastNeed=r-2),r):--i<n||-2===r?0:(r=s(t[i]),0<=r?(0<r&&(2===r?r=0:e.lastNeed=r-3),r):0)}function l(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"\uFFFD";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"\uFFFD";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"\uFFFD"}}function d(e){var t=this.lastTotal-this.lastNeed,i=l(this,e,t);return void 0===i?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length):i}function u(e,t){if(0==(e.length-t)%2){var i=e.toString("utf16le",t);if(i){var n=i.charCodeAt(i.length-1);if(55296<=n&&56319>=n)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function p(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,i)}return t}function c(e,t){var i=(e.length-t)%3;return 0==i?e.toString("base64",t):(this.lastNeed=3-i,this.lastTotal=3,1==i?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-i))}function m(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}var f=e("safe-buffer").Buffer,y=f.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1;}};i.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t},a.prototype.text=function(e,t){var i=o(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=i;var n=e.length-(i-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},a.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length)}},{"safe-buffer":186}],196:[function(e,t,i){(function(t,n){"use strict";function r(e,t){this._id=e,this._clearFn=t}var a=e("process/browser.js").nextTick,s=Function.prototype.apply,o=Array.prototype.slice,l={},d=0;i.setTimeout=function(){return new r(s.call(setTimeout,window,arguments),clearTimeout)},i.setInterval=function(){return new r(s.call(setInterval,window,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(e){e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},i.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},i.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i.setImmediate="function"==typeof t?t:function(e){var t=d++,n=!(2>arguments.length)&&o.call(arguments,1);return l[t]=!0,a(function(){l[t]&&(n?e.apply(null,n):e.call(null),i.clearImmediate(t))}),t},i.clearImmediate="function"==typeof n?n:function(e){delete l[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":172,timers:196}],197:[function(e,t,i){"use strict";(function(e){function t(e){for(var t=[],i=0,n=e.length,r,a;i<n;)r=e.charCodeAt(i++),55296<=r&&56319>=r&&i<n?(a=e.charCodeAt(i++),56320==(64512&a)?t.push(((1023&r)<<10)+(1023&a)+65536):(t.push(r),i--)):t.push(r);return t}function i(e){for(var t=e.length,i=-1,n="",r;++i<t;)r=e[i],65535<r&&(r-=65536,n+=l(55296|1023&r>>>10),r=56320|1023&r),n+=l(r);return n}function n(e){if(55296<=e&&57343>=e)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function r(e,t){return l(128|63&e>>t)}function a(e){if(0==(4294967168&e))return l(e);var t="";return 0==(4294965248&e)?t=l(192|31&e>>6):0==(4294901760&e)?(n(e),t=l(224|15&e>>12),t+=r(e,6)):0==(4292870144&e)&&(t=l(240|7&e>>18),t+=r(e,12),t+=r(e,6)),t+=l(128|63&e),t}function s(){if(p>=u)throw Error("Invalid byte index");var e=255&d[p];if(p++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function o(){var e,t,i,r,a;if(p>u)throw Error("Invalid byte index");if(p==u)return!1;if(e=255&d[p],p++,0==(128&e))return e;if(192==(224&e)){if(t=s(),a=(31&e)<<6|t,128<=a)return a;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=s(),i=s(),a=(15&e)<<12|t<<6|i,2048<=a)return n(a),a;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=s(),i=s(),r=s(),a=(7&e)<<18|t<<12|i<<6|r,65536<=a&&1114111>=a))return a;throw Error("Invalid UTF-8 detected")}var l=c,d,u,p;e.version="3.0.0",e.encode=function(e){for(var i=t(e),n=i.length,r=-1,s="",o;++r<n;)o=i[r],s+=a(o);return s},e.decode=function(e){d=t(e),u=d.length,p=0;for(var n=[],r;!1!==(r=o());)n.push(r);return i(n)}})("undefined"==typeof i?(void 0).utf8={}:i)},{}],198:[function(e,t){(function(e){"use strict";function i(t){try{if(!e.localStorage)return!1}catch(e){return!1}var i=e.localStorage[t];return null!=i&&"true"===(i+"").toLowerCase()}t.exports=function(e,t){if(i("noDeprecation"))return e;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(t);else i("traceDeprecation")?console.trace(t):console.warn(t);n=!0}return e.apply(this,arguments)}}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],199:[function(e,t){"use strict";t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],200:[function(e,t,i){(function(t,n){"use strict";function r(e,t){var n={seen:[],stylize:s};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&i._extend(n,t),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),l(n,e,n.depth)}function a(e,t){var i=r.styles[t];return i?"\x1B["+r.colors[i][0]+"m"+e+"\x1B["+r.colors[i][1]+"m":e}function s(e){return e}function o(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function l(e,t,r){if(e.customInspect&&t&&v(t.inspect)&&t.inspect!==i.inspect&&!(t.constructor&&t.constructor.prototype===t)){var a=t.inspect(r,e);return b(a)||(a=l(e,a,r)),a}var s=d(e,t);if(s)return s;var g=Object.keys(t),f=o(g);if(e.showHidden&&(g=Object.getOwnPropertyNames(t)),w(t)&&(0<=g.indexOf("message")||0<=g.indexOf("description")))return u(t);if(0===g.length){if(v(t)){var y=t.name?": "+t.name:"";return e.stylize("[Function"+y+"]","special")}if(_(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(C(t))return e.stylize(Date.prototype.toString.call(t),"date");if(w(t))return u(t)}var x="",k=!1,S=["{","}"];if(h(t)&&(k=!0,S=["[","]"]),v(t)){var j=t.name?": "+t.name:"";x=" [Function"+j+"]"}if(_(t)&&(x=" "+RegExp.prototype.toString.call(t)),C(t)&&(x=" "+Date.prototype.toUTCString.call(t)),w(t)&&(x=" "+u(t)),0===g.length&&(!k||0==t.length))return S[0]+x+S[1];if(0>r)return _(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var n;return n=k?p(e,t,r,f,g):g.map(function(i){return c(e,t,r,f,i,k)}),e.seen.pop(),m(n,x,S)}function d(e,t){if(x(t))return e.stylize("undefined","undefined");if(b(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\"")+"'";return e.stylize(i,"string")}return f(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,a){for(var s=[],o=0,i=t.length;o<i;++o)D(t,o+"")?s.push(c(e,t,n,r,o+"",!0)):s.push("");return a.forEach(function(i){i.match(/^\d+$/)||s.push(c(e,t,n,r,i,!0))}),s}function c(e,t,i,n,r,a){var s,o,d;if(d=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},d.get?d.set?o=e.stylize("[Getter/Setter]","special"):o=e.stylize("[Getter]","special"):d.set&&(o=e.stylize("[Setter]","special")),D(n,r)||(s="["+r+"]"),o||(0>e.seen.indexOf(d.value)?(o=y(i)?l(e,d.value,null):l(e,d.value,i-1),-1<o.indexOf("\n")&&(a?o=o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):o="\n"+o.split("\n").map(function(e){return"   "+e}).join("\n"))):o=e.stylize("[Circular]","special")),x(s)){if(a&&r.match(/^\d+$/))return o;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,"\"").replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+o}function m(e,t,i){var n=0,r=e.reduce(function(e,t){return n++,0<=t.indexOf("\n")&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return 60<r?i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}function h(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function y(e){return null===e}function f(e){return"number"==typeof e}function b(e){return"string"==typeof e}function x(e){return void 0===e}function _(e){return k(e)&&"[object RegExp]"===S(e)}function k(e){return"object"==typeof e&&null!==e}function C(e){return k(e)&&"[object Date]"===S(e)}function w(t){return k(t)&&("[object Error]"===S(t)||t instanceof Error)}function v(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function j(e){return 10>e?"0"+e.toString(10):e.toString(10)}function E(){var e=new Date,t=[j(e.getHours()),j(e.getMinutes()),j(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var A=/%[sdj%]/g;i.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,a=i.length,s=(e+"").replace(A,function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return i[n++]+"";case"%d":return+i[n++];case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e;}}),o=i[n];n<a;o=i[++n])s+=y(o)||!k(o)?" "+o:" "+r(o);return s},i.deprecate=function(e,r){if(x(n.process))return function(){return i.deprecate(e,r).apply(this,arguments)};if(!0===t.noDeprecation)return e;var a=!1;return function(){if(!a){if(t.throwDeprecation)throw new Error(r);else t.traceDeprecation?console.trace(r):console.error(r);a=!0}return e.apply(this,arguments)}};var T={},I;i.debuglog=function(e){if(x(I)&&(I=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!T[e])if(new RegExp("\\b"+e+"\\b","i").test(I)){var n=t.pid;T[e]=function(){var t=i.format.apply(i,arguments);console.error("%s %d: %s",e,n,t)}}else T[e]=function(){};return T[e]},i.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},i.isArray=h,i.isBoolean=g,i.isNull=y,i.isNullOrUndefined=function(e){return null==e},i.isNumber=f,i.isString=b,i.isSymbol=function(e){return"symbol"==typeof e},i.isUndefined=x,i.isRegExp=_,i.isObject=k,i.isDate=C,i.isError=w,i.isFunction=v,i.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e},i.isBuffer=e("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];i.log=function(){console.log("%s - %s",E(),i.format.apply(i,arguments))},i.inherits=e("inherits"),i._extend=function(e,t){if(!t||!k(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./support/isBuffer":199,_process:172,inherits:19}],201:[function(e,t){"use strict";function n(e,t){var n=t.jpath;if(!n)throw new Error("createFromJpath: undefined jpath argument");for(var r=0;r<n.length;r++)void 0===e[n[r]]&&(r===n.length-1?e[n[r]]=t.getEmpty():e[n[r]]={}),e=e[n[r]];return 0===n.length&&(e=Object.assign(e,t.getEmpty())),e}function i(e,t){if(e){var n=t.jpath;if(!n)throw new Error("getFromJpath: undefined jpath argument");for(var r=0;r<n.length;r++){if(void 0===e[n[r]])return;e=e[n[r]]}return e}}var r=e("./types"),a=e("./util/defaults"),s=e("./types/common");t.exports={util:s,process:function(e,i,a,o,l={}){var d=a.filename,u=r.getType(e),p=n(i,u),c=u.find(p,d),m=u.getProperty(d,a);if(void 0===m)throw new Error(`Could not get property of ${d} (type ${e}`);var h=u.process(d,a);return h[m]={filename:t.exports.getFilename(e,a.filename)},l.keepContent&&(h[m].data=s.getContent(a,m)),c?Object.assign(c,h,o):(Object.assign(h,o),p.push(h)),i},getType:function(e,t,n){var a=r.getType(e,n);return i(t,a)},getFilename(e,t){var i=/[^/]*$/.exec(t);i&&(t=i[0]);var n=r.getType(e),a=n.jpath;if(!a)throw new Error("No such type or no jpath");return a.concat(t).join("/")},getEmpty(e,t){var a=r.getAllTypes(e);t||(t={});for(var s=0;s<a.length;s++)n(t,a[s]);return t},defaults(e,i){var n=t.exports.getEmpty(e);return a(!0,i,n),i}}},{"./types":202,"./types/common":203,"./util/defaults":223}],202:[function(e,t){"use strict";var i={types:{common:e("./types/common.js"),default:e("./types/default.js"),nmr:e("./types/nmr.js"),reaction:{general:e("./types/reaction/general.js")},sample:{chromatogram:e("./types/sample/chromatogram.js"),cyclicVoltammetry:e("./types/sample/cyclicVoltammetry.js"),differentialScanningCalorimetry:e("./types/sample/differentialScanningCalorimetry.js"),elementAnalysis:e("./types/sample/elementAnalysis.js"),genbank:e("./types/sample/genbank.js"),general:e("./types/sample/general.js"),image:e("./types/sample/image.js"),ir:e("./types/sample/ir.js"),iv:e("./types/sample/iv.js"),mass:e("./types/sample/mass.js"),nmr:e("./types/sample/nmr.js"),physical:e("./types/sample/physical.js"),raman:e("./types/sample/raman.js"),thermogravimetricAnalysis:e("./types/sample/thermogravimetricAnalysis.js"),uv:e("./types/sample/uv.js"),xray:e("./types/sample/xray.js")}}};t.exports={getType(e,t,n){if(!t){for(t in i.types)if(i.types[t][e])return Object.assign({},i.types.default,i.types[t].default,i.types[t][e],n);}else if(i.types[t][e])return Object.assign({},i.types.default,i.types[t].default,i.types[t][e],n);return Object.assign({},i.types.default)},getAllTypes(e,n){var r=[];for(var a in i.types[e])"default"!=a&&r.push(t.exports.getType(a,e,n));return r}}},{"./types/common.js":203,"./types/default.js":204,"./types/nmr.js":205,"./types/reaction/general.js":206,"./types/sample/chromatogram.js":207,"./types/sample/cyclicVoltammetry.js":208,"./types/sample/differentialScanningCalorimetry.js":209,"./types/sample/elementAnalysis.js":210,"./types/sample/genbank.js":211,"./types/sample/general.js":212,"./types/sample/image.js":213,"./types/sample/ir.js":214,"./types/sample/iv.js":215,"./types/sample/mass.js":216,"./types/sample/nmr.js":217,"./types/sample/physical.js":218,"./types/sample/raman.js":219,"./types/sample/thermogravimetricAnalysis.js":220,"./types/sample/uv.js":221,"./types/sample/xray.js":222}],203:[function(e,t){"use strict";var i=e("atob"),n=e("base64-js"),r=n.toByteArray,a=t.exports={};a.getBasename=function(e){var t=e.replace(/.*\//,"");return t.replace(/\.[0-9]+$/,"")},a.getExtension=function(e){var t=a.getBasename(e);return t.replace(/.*\./,"").toLowerCase()},a.getFilename=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)if(e[t[n]]&&e[t[n]].filename)return e[t[n]].filename},a.basenameFind=function(e,t){var i=a.getBasename(t);return e.find((e)=>{return a.getBasename(a.getFilename(e))===i})},a.getTargetProperty=function(e){switch(a.getExtension(e)){case"jdx":case"dx":case"jcamp":return"jcamp";case"png":case"jpg":case"jpeg":case"tif":case"tiff":case"svg":return"image";case"cif":return"cif";case"pdb":return"pdb";case"xml":return"xml";case"cdf":case"nc":case"netcdf":return"cdf";case"pdf":return"pdf";case"txt":case"text":case"csv":case"tsv":return"text";case"gbk":case"gb":return"genbank";default:return"file";}},a.getContent=function(e,t){return"text"===t||"xml"===t||"pdb"===t||"jcamp"===t||"cif"===t||"genbank"===t?a.getTextContent(e):a.getBufferContent(e)},a.getTextContent=function(e){switch(e.encoding){case"base64":return i(e.content);default:return e.content;}},a.getBufferContent=function(e){switch(e.encoding){case"base64":return r(e.content);default:return e.content;}}},{atob:1,"base64-js":2}],204:[function(e,t){"use strict";t.exports={process(){return{}},getEmpty(){return[]}}},{}],205:[function(e,t,i){"use strict";var n=e("nmr-metadata");i.getMetadata=n.parseJcamp,i.getSpectrumType=n.getSpectrumType,i.getNucleusFrom2DExperiment=n.getNucleusFrom2DExperiment},{"nmr-metadata":147}],206:[function(e,t){"use strict";t.exports={jpath:[],getEmpty(){return{code:"",date:Date.now(),procedure:"",products:[],reagents:[],conditions:"",keywords:[],remarks:"",title:"",reactionRXN:"$RXN\n\n\n\n  0  0\n"}}}},{}],207:[function(e,t){"use strict";var i=e("netcdf-gcms"),n=e("../common");t.exports={jpath:["spectra","chromatogram"],find:n.basenameFind,getProperty:n.getTargetProperty,process:function(e,t){var r=n.getExtension(e),a={};if("cdf"===r||"netcdf"===r){var s=n.getBufferContent(t),o=i(s,{meta:!0});1===o.series.length&&(a.detector=o.series[0].name)}return a}}},{"../common":203,"netcdf-gcms":135}],208:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","cyclicVoltammetry"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":203}],209:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","differentialScanningCalorimetry"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":203}],210:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","elementalAnalysis"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":203}],211:[function(e,t){"use strict";var i=e("genbank-parser"),n=e("../common");t.exports={find(e,t){var i=n.getBasename(t);return e.find((e)=>{return n.getBasename(n.getFilename(e))===i})},getProperty(e){return n.getTargetProperty(e)},process(e,t){var r=n.getTextContent(t),a=void 0,s=i(r);return a={seq:s.map((e)=>e.parsedSequence)},a},jpath:["biology","nucleic"]}},{"../common":203,"genbank-parser":11}],212:[function(e,t){"use strict";t.exports={jpath:["general"],getEmpty(){return{description:"",title:"",name:[],mf:"",molfile:"",mw:0,keyword:[],sequence:"",kind:""}}}},{}],213:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["image"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":203}],214:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","ir"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":203}],215:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","iv"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":203}],216:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","mass"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":203}],217:[function(e,t){"use strict";function i(e){if("undefined"!=typeof e){var t=a.getBasename(e);return t=t.replace(o,"$1"),n.test(e)&&(t=t.replace(r,"")),t}}var n=/[^a-z]fid[^a-z]/i,r=/[^a-z]fid[^a-z]?/i,a=e("../common"),s=e("../nmr");t.exports={find(e,t){var n=i(t);return e.find((e)=>{return i(a.getFilename(e))===n})},getProperty(e){var t=a.getExtension(e);return("jdx"===t||"dx"===t||"jcamp"===t)&&n.test(e)?"jcampFID":a.getTargetProperty(e)},process(e,t){var i=a.getExtension(e),n={};if("jdx"===i||"dx"===i||"jcamp"===i){var r=a.getTextContent(t);n=s.getMetadata(r)}return n},jpath:["spectra","nmr"]};var o=/(.*)\.(.*)/},{"../common":203,"../nmr":205}],218:[function(e,t){"use strict";t.exports={jpath:["physical"],getEmpty(){return{}}}},{}],219:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","raman"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":203}],220:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","thermogravimetricAnalysis"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":203}],221:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","uv"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":203}],222:[function(e,t){"use strict";var i=e("../common");t.exports={jpath:["spectra","xray"],find:i.basenameFind,getProperty:i.getTargetProperty}},{"../common":203}],223:[function(e,t){"use strict";var i=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t=i.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&i.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!r)return!1;for(var a in e);return"undefined"==typeof a||i.call(e,a)};t.exports=function e(){var t=arguments[0],n=1,i=arguments.length,s=!1,o,l,d,u,p,c;for("boolean"==typeof t?(s=t,t=arguments[1]||{},n=2):("object"!=typeof t&&"function"!=typeof t||null==t)&&(t={});n<i;++n)if(o=arguments[n],null!=o)for(l in o)d=t[l],u=o[l],t!==u&&(s&&u&&(a(u)||(p=r(u)))?(p?(p=!1,c=d&&r(d)?d:[]):c=d&&a(d)?d:{},"undefined"==typeof t[l]?t[l]=e(s,c,u):e(s,c,u)):"undefined"!=typeof u&&"undefined"==typeof t[l]&&(t[l]=u));return t}},{}]},{},[201])(201)});

